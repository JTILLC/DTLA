(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function XE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Hp={exports:{}},lu={};var B0;function HA(){if(B0)return lu;B0=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:c,ref:o!==void 0?o:null,props:u}}return lu.Fragment=t,lu.jsx=e,lu.jsxs=e,lu}var F0;function GA(){return F0||(F0=1,Hp.exports=HA()),Hp.exports}var T=GA(),Gp={exports:{}},Vt={};var q0;function YA(){if(q0)return Vt;q0=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function w(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,U={};function ht(V,W,ut){this.props=V,this.context=W,this.refs=U,this.updater=ut||O}ht.prototype.isReactComponent={},ht.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},ht.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ft(){}ft.prototype=ht.prototype;function lt(V,W,ut){this.props=V,this.context=W,this.refs=U,this.updater=ut||O}var bt=lt.prototype=new ft;bt.constructor=lt,Q(bt,ht.prototype),bt.isPureReactComponent=!0;var jt=Array.isArray;function At(){}var R={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(V,W,ut){var dt=ut.ref;return{$$typeof:i,type:V,key:W,ref:dt!==void 0?dt:null,props:ut}}function L(V,W){return N(V.type,W,V.props)}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function z(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ut){return W[ut]})}var I=/\/+/g;function ce(V,W){return typeof V=="object"&&V!==null&&V.key!=null?z(""+V.key):W.toString(36)}function Ve(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(At,At):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function $(V,W,ut,dt,Nt){var kt=typeof V;(kt==="undefined"||kt==="boolean")&&(V=null);var Gt=!1;if(V===null)Gt=!0;else switch(kt){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(V.$$typeof){case i:case t:Gt=!0;break;case S:return Gt=V._init,$(Gt(V._payload),W,ut,dt,Nt)}}if(Gt)return Nt=Nt(V),Gt=dt===""?"."+ce(V,0):dt,jt(Nt)?(ut="",Gt!=null&&(ut=Gt.replace(I,"$&/")+"/"),$(Nt,W,ut,"",function(Mi){return Mi})):Nt!=null&&(k(Nt)&&(Nt=L(Nt,ut+(Nt.key==null||V&&V.key===Nt.key?"":(""+Nt.key).replace(I,"$&/")+"/")+Gt)),W.push(Nt)),1;Gt=0;var xe=dt===""?".":dt+":";if(jt(V))for(var me=0;me<V.length;me++)dt=V[me],kt=xe+ce(dt,me),Gt+=$(dt,W,ut,kt,Nt);else if(me=w(V),typeof me=="function")for(V=me.call(V),me=0;!(dt=V.next()).done;)dt=dt.value,kt=xe+ce(dt,me++),Gt+=$(dt,W,ut,kt,Nt);else if(kt==="object"){if(typeof V.then=="function")return $(Ve(V),W,ut,dt,Nt);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function ct(V,W,ut){if(V==null)return V;var dt=[],Nt=0;return $(V,dt,"","",function(kt){return W.call(ut,kt,Nt++)}),dt}function vt(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(ut){(V._status===0||V._status===-1)&&(V._status=1,V._result=ut)},function(ut){(V._status===0||V._status===-1)&&(V._status=2,V._result=ut)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var Xt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ee={map:ct,forEach:function(V,W,ut){ct(V,function(){W.apply(this,arguments)},ut)},count:function(V){var W=0;return ct(V,function(){W++}),W},toArray:function(V){return ct(V,function(W){return W})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Vt.Activity=E,Vt.Children=ee,Vt.Component=ht,Vt.Fragment=e,Vt.Profiler=o,Vt.PureComponent=lt,Vt.StrictMode=r,Vt.Suspense=m,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return R.H.useMemoCache(V)}},Vt.cache=function(V){return function(){return V.apply(null,arguments)}},Vt.cacheSignal=function(){return null},Vt.cloneElement=function(V,W,ut){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var dt=Q({},V.props),Nt=V.key;if(W!=null)for(kt in W.key!==void 0&&(Nt=""+W.key),W)!C.call(W,kt)||kt==="key"||kt==="__self"||kt==="__source"||kt==="ref"&&W.ref===void 0||(dt[kt]=W[kt]);var kt=arguments.length-2;if(kt===1)dt.children=ut;else if(1<kt){for(var Gt=Array(kt),xe=0;xe<kt;xe++)Gt[xe]=arguments[xe+2];dt.children=Gt}return N(V.type,Nt,dt)},Vt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Vt.createElement=function(V,W,ut){var dt,Nt={},kt=null;if(W!=null)for(dt in W.key!==void 0&&(kt=""+W.key),W)C.call(W,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(Nt[dt]=W[dt]);var Gt=arguments.length-2;if(Gt===1)Nt.children=ut;else if(1<Gt){for(var xe=Array(Gt),me=0;me<Gt;me++)xe[me]=arguments[me+2];Nt.children=xe}if(V&&V.defaultProps)for(dt in Gt=V.defaultProps,Gt)Nt[dt]===void 0&&(Nt[dt]=Gt[dt]);return N(V,kt,Nt)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(V){return{$$typeof:p,render:V}},Vt.isValidElement=k,Vt.lazy=function(V){return{$$typeof:S,_payload:{_status:-1,_result:V},_init:vt}},Vt.memo=function(V,W){return{$$typeof:g,type:V,compare:W===void 0?null:W}},Vt.startTransition=function(V){var W=R.T,ut={};R.T=ut;try{var dt=V(),Nt=R.S;Nt!==null&&Nt(ut,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(At,Xt)}catch(kt){Xt(kt)}finally{W!==null&&ut.types!==null&&(W.types=ut.types),R.T=W}},Vt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Vt.use=function(V){return R.H.use(V)},Vt.useActionState=function(V,W,ut){return R.H.useActionState(V,W,ut)},Vt.useCallback=function(V,W){return R.H.useCallback(V,W)},Vt.useContext=function(V){return R.H.useContext(V)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(V,W){return R.H.useDeferredValue(V,W)},Vt.useEffect=function(V,W){return R.H.useEffect(V,W)},Vt.useEffectEvent=function(V){return R.H.useEffectEvent(V)},Vt.useId=function(){return R.H.useId()},Vt.useImperativeHandle=function(V,W,ut){return R.H.useImperativeHandle(V,W,ut)},Vt.useInsertionEffect=function(V,W){return R.H.useInsertionEffect(V,W)},Vt.useLayoutEffect=function(V,W){return R.H.useLayoutEffect(V,W)},Vt.useMemo=function(V,W){return R.H.useMemo(V,W)},Vt.useOptimistic=function(V,W){return R.H.useOptimistic(V,W)},Vt.useReducer=function(V,W,ut){return R.H.useReducer(V,W,ut)},Vt.useRef=function(V){return R.H.useRef(V)},Vt.useState=function(V){return R.H.useState(V)},Vt.useSyncExternalStore=function(V,W,ut){return R.H.useSyncExternalStore(V,W,ut)},Vt.useTransition=function(){return R.H.useTransition()},Vt.version="19.2.1",Vt}var H0;function Zm(){return H0||(H0=1,Gp.exports=YA()),Gp.exports}var Ot=Zm();const QA=XE(Ot);var Yp={exports:{}},uu={},Qp={exports:{}},Kp={};var G0;function KA(){return G0||(G0=1,(function(i){function t($,ct){var vt=$.length;$.push(ct);t:for(;0<vt;){var Xt=vt-1>>>1,ee=$[Xt];if(0<o(ee,ct))$[Xt]=ct,$[vt]=ee,vt=Xt;else break t}}function e($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ct=$[0],vt=$.pop();if(vt!==ct){$[0]=vt;t:for(var Xt=0,ee=$.length,V=ee>>>1;Xt<V;){var W=2*(Xt+1)-1,ut=$[W],dt=W+1,Nt=$[dt];if(0>o(ut,vt))dt<ee&&0>o(Nt,ut)?($[Xt]=Nt,$[dt]=vt,Xt=dt):($[Xt]=ut,$[W]=vt,Xt=W);else if(dt<ee&&0>o(Nt,vt))$[Xt]=Nt,$[dt]=vt,Xt=dt;else break t}}return ct}function o($,ct){var vt=$.sortIndex-ct.sortIndex;return vt!==0?vt:$.id-ct.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,p=c.now();i.unstable_now=function(){return c.now()-p}}var m=[],g=[],S=1,E=null,b=3,w=!1,O=!1,Q=!1,U=!1,ht=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;function bt($){for(var ct=e(g);ct!==null;){if(ct.callback===null)r(g);else if(ct.startTime<=$)r(g),ct.sortIndex=ct.expirationTime,t(m,ct);else break;ct=e(g)}}function jt($){if(Q=!1,bt($),!O)if(e(m)!==null)O=!0,At||(At=!0,z());else{var ct=e(g);ct!==null&&Ve(jt,ct.startTime-$)}}var At=!1,R=-1,C=5,N=-1;function L(){return U?!0:!(i.unstable_now()-N<C)}function k(){if(U=!1,At){var $=i.unstable_now();N=$;var ct=!0;try{t:{O=!1,Q&&(Q=!1,ft(R),R=-1),w=!0;var vt=b;try{e:{for(bt($),E=e(m);E!==null&&!(E.expirationTime>$&&L());){var Xt=E.callback;if(typeof Xt=="function"){E.callback=null,b=E.priorityLevel;var ee=Xt(E.expirationTime<=$);if($=i.unstable_now(),typeof ee=="function"){E.callback=ee,bt($),ct=!0;break e}E===e(m)&&r(m),bt($)}else r(m);E=e(m)}if(E!==null)ct=!0;else{var V=e(g);V!==null&&Ve(jt,V.startTime-$),ct=!1}}break t}finally{E=null,b=vt,w=!1}ct=void 0}}finally{ct?z():At=!1}}}var z;if(typeof lt=="function")z=function(){lt(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ce=I.port2;I.port1.onmessage=k,z=function(){ce.postMessage(null)}}else z=function(){ht(k,0)};function Ve($,ct){R=ht(function(){$(i.unstable_now())},ct)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function($){switch(b){case 1:case 2:case 3:var ct=3;break;default:ct=b}var vt=b;b=ct;try{return $()}finally{b=vt}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function($,ct){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var vt=b;b=$;try{return ct()}finally{b=vt}},i.unstable_scheduleCallback=function($,ct,vt){var Xt=i.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Xt+vt:Xt):vt=Xt,$){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=vt+ee,$={id:S++,callback:ct,priorityLevel:$,startTime:vt,expirationTime:ee,sortIndex:-1},vt>Xt?($.sortIndex=vt,t(g,$),e(m)===null&&$===e(g)&&(Q?(ft(R),R=-1):Q=!0,Ve(jt,vt-Xt))):($.sortIndex=ee,t(m,$),O||w||(O=!0,At||(At=!0,z()))),$},i.unstable_shouldYield=L,i.unstable_wrapCallback=function($){var ct=b;return function(){var vt=b;b=ct;try{return $.apply(this,arguments)}finally{b=vt}}}})(Kp)),Kp}var Y0;function $A(){return Y0||(Y0=1,Qp.exports=KA()),Qp.exports}var $p={exports:{}},kn={};var Q0;function XA(){if(Q0)return kn;Q0=1;var i=Zm();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:g,implementation:S}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(m,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(m,g,null,S)},kn.flushSync=function(m){var g=c.T,S=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=S,r.d.f()}},kn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},kn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},kn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var S=g.as,E=p(S,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;S==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:w}):S==="script"&&r.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},kn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var S=p(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},kn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var S=g.as,E=p(S,g.crossOrigin);r.d.L(m,S,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},kn.preloadModule=function(m,g){if(typeof m=="string")if(g){var S=p(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},kn.requestFormReset=function(m){r.d.r(m)},kn.unstable_batchedUpdates=function(m,g){return m(g)},kn.useFormState=function(m,g,S){return c.H.useFormState(m,g,S)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.2.1",kn}var K0;function WA(){if(K0)return $p.exports;K0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),$p.exports=XA(),$p.exports}var $0;function JA(){if($0)return uu;$0=1;var i=$A(),t=Zm(),e=WA();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),n;if(d===l)return m(f),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var y=!1,x=f.child;x;){if(x===a){y=!0,a=f,l=d;break}if(x===l){y=!0,l=f,a=d;break}x=x.sibling}if(!y){for(x=d.child;x;){if(x===a){y=!0,a=d,l=f;break}if(x===l){y=!0,l=d,a=f;break}x=x.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function S(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=S(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),ft=Symbol.for("react.consumer"),lt=Symbol.for("react.context"),bt=Symbol.for("react.forward_ref"),jt=Symbol.for("react.suspense"),At=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case ht:return"Profiler";case U:return"StrictMode";case jt:return"Suspense";case At:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case lt:return n.displayName||"Context";case ft:return(n._context.displayName||"Context")+".Consumer";case bt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:ce(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return ce(n(s))}catch{}}return null}var Ve=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},Xt=[],ee=-1;function V(n){return{current:n}}function W(n){0>ee||(n.current=Xt[ee],Xt[ee]=null,ee--)}function ut(n,s){ee++,Xt[ee]=n.current,n.current=s}var dt=V(null),Nt=V(null),kt=V(null),Gt=V(null);function xe(n,s){switch(ut(kt,s),ut(Nt,n),ut(dt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?c0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=c0(s),n=h0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(dt),ut(dt,n)}function me(){W(dt),W(Nt),W(kt)}function Mi(n){n.memoizedState!==null&&ut(Gt,n);var s=dt.current,a=h0(s,n.type);s!==a&&(ut(Nt,n),ut(dt,a))}function Wi(n){Nt.current===n&&(W(dt),W(Nt)),Gt.current===n&&(W(Gt),su._currentValue=vt)}var Tn,Ts;function ii(n){if(Tn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Tn=s&&s[1]||"",Ts=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tn+n+Ts}var Wr=!1;function Ss(n,s){if(!n||Wr)return"";Wr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Y){var H=Y}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(Y){H=Y}n.call(Z.prototype)}}else{try{throw Error()}catch(Y){H=Y}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],x=d[1];if(y&&x){var D=y.split(`
`),q=x.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===q.length)for(l=D.length-1,f=q.length-1;1<=l&&0<=f&&D[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==q[f]){var X=`
`+D[l].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=l&&0<=f);break}}}finally{Wr=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ii(a):""}function Jr(n,s){switch(n.tag){case 26:case 27:case 5:return ii(n.type);case 16:return ii("Lazy");case 13:return n.child!==s&&s!==null?ii("Suspense Fallback"):ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return Ss(n.type,!1);case 11:return Ss(n.type.render,!1);case 1:return Ss(n.type,!0);case 31:return ii("Activity");default:return""}}function qa(n){try{var s="",a=null;do s+=Jr(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var je=Object.prototype.hasOwnProperty,Ue=i.unstable_scheduleCallback,ki=i.unstable_cancelCallback,ul=i.unstable_shouldYield,Ha=i.unstable_requestPaint,pn=i.unstable_now,bs=i.unstable_getCurrentPriorityLevel,Zs=i.unstable_ImmediatePriority,Zr=i.unstable_UserBlockingPriority,Vi=i.unstable_NormalPriority,cl=i.unstable_LowPriority,Ga=i.unstable_IdlePriority,Ya=i.log,Qa=i.unstable_setDisableYieldValue,si=null,an=null;function qn(n){if(typeof Ya=="function"&&Qa(n),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(si,n)}catch{}}var ke=Math.clz32?Math.clz32:P,Ka=Math.log,st=Math.LN2;function P(n){return n>>>=0,n===0?32:31-(Ka(n)/st|0)|0}var it=256,yt=262144,rt=4194304;function Et(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function K(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,y=n.pingedLanes;n=n.warmLanes;var x=l&134217727;return x!==0?(l=x&~d,l!==0?f=Et(l):(y&=x,y!==0?f=Et(y):a||(a=x&~n,a!==0&&(f=Et(a))))):(x=l&~d,x!==0?f=Et(x):y!==0?f=Et(y):a||(a=l&~n,a!==0&&(f=Et(a)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:f}function Ct(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function wt(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var n=rt;return rt<<=1,(rt&62914560)===0&&(rt=4194304),n}function nt(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function he(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function on(n,s,a,l,f,d){var y=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var x=n.entanglements,D=n.expirationTimes,q=n.hiddenUpdates;for(a=y&~a;0<a;){var X=31-ke(a),Z=1<<X;x[X]=0,D[X]=-1;var H=q[X];if(H!==null)for(q[X]=null,X=0;X<H.length;X++){var Y=H[X];Y!==null&&(Y.lane&=-536870913)}a&=~Z}l!==0&&On(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(y&~s))}function On(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-ke(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function gi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-ke(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function Li(n,s){var a=s&-s;return a=(a&42)!==0?1:ne(a),(a&(n.suspendedLanes|s))!==0?0:a}function ne(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Se(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Mn(){var n=ct.p;return n!==0?n:(n=window.event,n===void 0?32:k0(n.type))}function Be(n,s){var a=ct.p;try{return ct.p=n,s()}finally{ct.p=a}}var Ye=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Ye,Qe="__reactProps$"+Ye,_i="__reactContainer$"+Ye,Rt="__reactEvents$"+Ye,Ke="__reactListeners$"+Ye,mn="__reactHandles$"+Ye,zi="__reactResources$"+Ye,Hn="__reactMarker$"+Ye;function yi(n){delete n[Ae],delete n[Qe],delete n[Rt],delete n[Ke],delete n[mn]}function $e(n){var s=n[Ae];if(s)return s;for(var a=n.parentNode;a;){if(s=a[_i]||a[Ae]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=y0(n);n!==null;){if(a=n[Ae])return a;n=y0(n)}return s}n=a,a=n.parentNode}return null}function Gn(n){if(n=n[Ae]||n[_i]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ri(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ji(n){var s=n[zi];return s||(s=n[zi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Xe(n){n[Hn]=!0}var hl=new Set,fl={};function Zi(n,s){ts(n,s),ts(n+"Capture",s)}function ts(n,s){for(fl[n]=s,n=0;n<s.length;n++)hl.add(s[n])}var dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},ml={};function uc(n){return je.call(ml,n)?!0:je.call(pl,n)?!1:dl.test(n)?ml[n]=!0:(pl[n]=!0,!1)}function $a(n,s,a){if(uc(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function ai(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function We(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tr(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gl(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function fe(n){if(!n._valueTracker){var s=tr(n)?"checked":"value";n._valueTracker=gl(n,s,""+n[s])}}function ta(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=tr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function es(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ea=/[\n"\\]/g;function Yn(n){return n.replace(ea,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xa(n,s,a,l,f,d,y,x){n.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?n.type=y:n.removeAttribute("type"),s!=null?y==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+gn(s)):n.value!==""+gn(s)&&(n.value=""+gn(s)):y!=="submit"&&y!=="reset"||n.removeAttribute("value"),s!=null?_l(n,y,gn(s)):a!=null?_l(n,y,gn(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+gn(x):n.removeAttribute("name")}function cc(n,s,a,l,f,d,y,x){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){fe(n);return}a=a!=null?""+gn(a):"",s=s!=null?""+gn(s):a,x||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=x?n.checked:!!l,n.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.name=y),fe(n)}function _l(n,s,a){s==="number"&&es(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function er(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+gn(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function hc(n,s,a){if(s!=null&&(s=""+gn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+gn(a):""}function nr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ve(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=gn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),fe(n)}function Qn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var fc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||fc.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function vl(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&yl(n,f,l)}else for(var d in s)s.hasOwnProperty(d)&&yl(n,d,s[d])}function Wa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(n){return ir.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Pi(){}var El=null;function vi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sr=null,ns=null;function na(n){var s=Gn(n);if(s&&(n=s.stateNode)){var a=n[Qe]||null;t:switch(n=s.stateNode,s.type){case"input":if(Xa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Yn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[Qe]||null;if(!f)throw Error(r(90));Xa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&ta(l)}break t;case"textarea":hc(n,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&er(n,!!a.multiple,s,!1)}}}var Za=!1;function rr(n,s,a){if(Za)return n(s,a);Za=!0;try{var l=n(s);return l}finally{if(Za=!1,(sr!==null||ns!==null)&&(ah(),sr&&(s=sr,n=ns,ns=sr=null,na(s),n)))for(s=0;s<n.length;s++)na(n[s])}}function ji(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Qe]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=!1;if(Ei)try{var ge={};Object.defineProperty(ge,"passive",{get:function(){ia=!0}}),window.addEventListener("test",ge,ge),window.removeEventListener("test",ge,ge)}catch{ia=!1}var is=null,Tl=null,sa=null;function Sl(){if(sa)return sa;var n,s=Tl,a=s.length,l,f="value"in is?is.value:is.textContent,d=f.length;for(n=0;n<a&&s[n]===f[n];n++);var y=a-n;for(l=1;l<=y&&s[a-l]===f[d-l];l++);return sa=f.slice(n,1<l?1-l:void 0)}function ra(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function xs(){return!0}function Ui(){return!1}function Sn(n){function s(a,l,f,d,y){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(d):d[x]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xs:Ui,this.isPropagationStopped=Ui,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),s}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ss=Sn(As),ar=E({},As,{view:0,detail:0}),bl=Sn(ar),or,to,rs,eo=E({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rs&&(rs&&n.type==="mousemove"?(or=n.screenX-rs.screenX,to=n.screenY-rs.screenY):to=or=0,rs=n),or)},movementY:function(n){return"movementY"in n?n.movementY:to}}),xl=Sn(eo),aa=E({},eo,{dataTransfer:0}),pc=Sn(aa),mc=E({},ar,{relatedTarget:0}),oa=Sn(mc),Al=E({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=Sn(Al),no=E({},As,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_c=Sn(no),yc=E({},As,{data:0}),as=Sn(yc),vc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Tc[n])?!!s[n]:!1}function lr(){return Sc}var Un=E({},ar,{key:function(n){if(n.key){var s=vc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ra(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ec[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(n){return n.type==="keypress"?ra(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ra(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),bc=Sn(Un),xc=E({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cs=Sn(xc),h=E({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),_=Sn(h),v=E({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Sn(v),B=E({},eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Sn(B),ot=E({},As,{newState:0,oldState:0}),zt=Sn(ot),Fe=[9,13,27,32],ae=Ei&&"CompositionEvent"in window,Oe=null;Ei&&"documentMode"in document&&(Oe=document.documentMode);var Ti=Ei&&"TextEvent"in window&&!Oe,os=Ei&&(!ae||Oe&&8<Oe&&11>=Oe),Bi=" ",Fi=!1;function la(n,s){switch(n){case"keyup":return Fe.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var so=!1;function px(n,s){switch(n){case"compositionend":return io(s);case"keypress":return s.which!==32?null:(Fi=!0,Bi);case"textInput":return n=s.data,n===Bi&&Fi?null:n;default:return null}}function mx(n,s){if(so)return n==="compositionend"||!ae&&la(n,s)?(n=Sl(),sa=Tl=is=null,so=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return os&&s.locale!=="ko"?null:s.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gx[n.type]:s==="textarea"}function S_(n,s,a,l){sr?ns?ns.push(l):ns=[l]:sr=l,s=dh(s,"onChange"),0<s.length&&(a=new ss("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Cl=null,wl=null;function _x(n){s0(n,0)}function Ac(n){var s=ri(n);if(ta(s))return n}function b_(n,s){if(n==="change")return s}var x_=!1;if(Ei){var Wf;if(Ei){var Jf="oninput"in document;if(!Jf){var A_=document.createElement("div");A_.setAttribute("oninput","return;"),Jf=typeof A_.oninput=="function"}Wf=Jf}else Wf=!1;x_=Wf&&(!document.documentMode||9<document.documentMode)}function C_(){Cl&&(Cl.detachEvent("onpropertychange",w_),wl=Cl=null)}function w_(n){if(n.propertyName==="value"&&Ac(wl)){var s=[];S_(s,wl,n,vi(n)),rr(_x,s)}}function yx(n,s,a){n==="focusin"?(C_(),Cl=s,wl=a,Cl.attachEvent("onpropertychange",w_)):n==="focusout"&&C_()}function vx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ac(wl)}function Ex(n,s){if(n==="click")return Ac(s)}function Tx(n,s){if(n==="input"||n==="change")return Ac(s)}function Sx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var oi=typeof Object.is=="function"?Object.is:Sx;function Rl(n,s){if(oi(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!je.call(s,f)||!oi(n[f],s[f]))return!1}return!0}function R_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function I_(n,s){var a=R_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=R_(a)}}function D_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?D_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function N_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=es(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=es(n.document)}return s}function Zf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var bx=Ei&&"documentMode"in document&&11>=document.documentMode,ro=null,td=null,Il=null,ed=!1;function O_(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ed||ro==null||ro!==es(l)||(l=ro,"selectionStart"in l&&Zf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Il&&Rl(Il,l)||(Il=l,l=dh(td,"onSelect"),0<l.length&&(s=new ss("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=ro)))}function ua(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ao={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},nd={},M_={};Ei&&(M_=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ca(n){if(nd[n])return nd[n];if(!ao[n])return n;var s=ao[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in M_)return nd[n]=s[a];return n}var k_=ca("animationend"),V_=ca("animationiteration"),L_=ca("animationstart"),xx=ca("transitionrun"),Ax=ca("transitionstart"),Cx=ca("transitioncancel"),z_=ca("transitionend"),P_=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function qi(n,s){P_.set(n,s),Zi(s,[n])}var Cc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Si=[],oo=0,sd=0;function wc(){for(var n=oo,s=sd=oo=0;s<n;){var a=Si[s];Si[s++]=null;var l=Si[s];Si[s++]=null;var f=Si[s];Si[s++]=null;var d=Si[s];if(Si[s++]=null,l!==null&&f!==null){var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}d!==0&&j_(a,f,d)}}function Rc(n,s,a,l){Si[oo++]=n,Si[oo++]=s,Si[oo++]=a,Si[oo++]=l,sd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function rd(n,s,a,l){return Rc(n,s,a,l),Ic(n)}function ha(n,s){return Rc(n,null,null,s),Ic(n)}function j_(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-ke(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),d):null}function Ic(n){if(50<Wl)throw Wl=0,pp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var lo={};function wx(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(n,s,a,l){return new wx(n,s,a,l)}function ad(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ws(n,s){var a=n.alternate;return a===null?(a=li(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function U_(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Dc(n,s,a,l,f,d){var y=0;if(l=n,typeof n=="function")ad(n)&&(y=1);else if(typeof n=="string")y=OA(n,a,dt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case N:return n=li(31,a,s,f),n.elementType=N,n.lanes=d,n;case Q:return fa(a.children,f,d,s);case U:y=8,f|=24;break;case ht:return n=li(12,a,s,f|2),n.elementType=ht,n.lanes=d,n;case jt:return n=li(13,a,s,f),n.elementType=jt,n.lanes=d,n;case At:return n=li(19,a,s,f),n.elementType=At,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case lt:y=10;break t;case ft:y=9;break t;case bt:y=11;break t;case R:y=14;break t;case C:y=16,l=null;break t}y=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=li(y,a,s,f),s.elementType=n,s.type=l,s.lanes=d,s}function fa(n,s,a,l){return n=li(7,n,l,s),n.lanes=a,n}function od(n,s,a){return n=li(6,n,null,s),n.lanes=a,n}function B_(n){var s=li(18,null,null,0);return s.stateNode=n,s}function ld(n,s,a){return s=li(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var F_=new WeakMap;function bi(n,s){if(typeof n=="object"&&n!==null){var a=F_.get(n);return a!==void 0?a:(s={value:n,source:s,stack:qa(s)},F_.set(n,s),s)}return{value:n,source:s,stack:qa(s)}}var uo=[],co=0,Nc=null,Dl=0,xi=[],Ai=0,ur=null,ls=1,us="";function Rs(n,s){uo[co++]=Dl,uo[co++]=Nc,Nc=n,Dl=s}function q_(n,s,a){xi[Ai++]=ls,xi[Ai++]=us,xi[Ai++]=ur,ur=n;var l=ls;n=us;var f=32-ke(l)-1;l&=~(1<<f),a+=1;var d=32-ke(s)+f;if(30<d){var y=f-f%5;d=(l&(1<<y)-1).toString(32),l>>=y,f-=y,ls=1<<32-ke(s)+f|a<<f|l,us=d+n}else ls=1<<d|a<<f|l,us=n}function ud(n){n.return!==null&&(Rs(n,1),q_(n,1,0))}function cd(n){for(;n===Nc;)Nc=uo[--co],uo[co]=null,Dl=uo[--co],uo[co]=null;for(;n===ur;)ur=xi[--Ai],xi[Ai]=null,us=xi[--Ai],xi[Ai]=null,ls=xi[--Ai],xi[Ai]=null}function H_(n,s){xi[Ai++]=ls,xi[Ai++]=us,xi[Ai++]=ur,ls=s.id,us=s.overflow,ur=n}var bn=null,Ce=null,Wt=!1,cr=null,Ci=!1,hd=Error(r(519));function hr(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(bi(s,n)),hd}function G_(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Ae]=n,s[Qe]=l,a){case"dialog":qt("cancel",s),qt("close",s);break;case"iframe":case"object":case"embed":qt("load",s);break;case"video":case"audio":for(a=0;a<Zl.length;a++)qt(Zl[a],s);break;case"source":qt("error",s);break;case"img":case"image":case"link":qt("error",s),qt("load",s);break;case"details":qt("toggle",s);break;case"input":qt("invalid",s),cc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":qt("invalid",s);break;case"textarea":qt("invalid",s),nr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||l0(s.textContent,a)?(l.popover!=null&&(qt("beforetoggle",s),qt("toggle",s)),l.onScroll!=null&&qt("scroll",s),l.onScrollEnd!=null&&qt("scrollend",s),l.onClick!=null&&(s.onclick=Pi),s=!0):s=!1,s||hr(n,!0)}function Y_(n){for(bn=n.return;bn;)switch(bn.tag){case 5:case 31:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:bn=bn.return}}function ho(n){if(n!==bn)return!1;if(!Wt)return Y_(n),Wt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Ip(n.type,n.memoizedProps)),a=!a),a&&Ce&&hr(n),Y_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ce=_0(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ce=_0(n)}else s===27?(s=Ce,Ar(n.type)?(n=kp,kp=null,Ce=n):Ce=s):Ce=bn?Ri(n.stateNode.nextSibling):null;return!0}function da(){Ce=bn=null,Wt=!1}function fd(){var n=cr;return n!==null&&(Wn===null?Wn=n:Wn.push.apply(Wn,n),cr=null),n}function Nl(n){cr===null?cr=[n]:cr.push(n)}var dd=V(null),pa=null,Is=null;function fr(n,s,a){ut(dd,s._currentValue),s._currentValue=a}function Ds(n){n._currentValue=dd.current,W(dd)}function pd(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function md(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;t:for(;d!==null;){var x=d;d=f;for(var D=0;D<s.length;D++)if(x.context===s[D]){d.lanes|=a,x=d.alternate,x!==null&&(x.lanes|=a),pd(d.return,a,n),l||(y=null);break t}d=x.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),pd(y,a,n),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===n){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function fo(n,s,a,l){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var x=f.type;oi(f.pendingProps.value,y.value)||(n!==null?n.push(x):n=[x])}}else if(f===Gt.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(su):n=[su])}f=f.return}n!==null&&md(s,n,a,l),s.flags|=262144}function Oc(n){for(n=n.firstContext;n!==null;){if(!oi(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ma(n){pa=n,Is=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function xn(n){return Q_(pa,n)}function Mc(n,s){return pa===null&&ma(n),Q_(n,s)}function Q_(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Is===null){if(n===null)throw Error(r(308));Is=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Is=Is.next=s;return a}var Rx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},Ix=i.unstable_scheduleCallback,Dx=i.unstable_NormalPriority,Je={$$typeof:lt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new Rx,data:new Map,refCount:0}}function Ol(n){n.refCount--,n.refCount===0&&Ix(Dx,function(){n.controller.abort()})}var Ml=null,_d=0,po=0,mo=null;function Nx(n,s){if(Ml===null){var a=Ml=[];_d=0,po=Ep(),mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return _d++,s.then(K_,K_),s}function K_(){if(--_d===0&&Ml!==null){mo!==null&&(mo.status="fulfilled");var n=Ml;Ml=null,po=0,mo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Ox(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var $_=$.S;$.S=function(n,s){Ov=pn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Nx(n,s),$_!==null&&$_(n,s)};var ga=V(null);function yd(){var n=ga.current;return n!==null?n:Ee.pooledCache}function kc(n,s){s===null?ut(ga,ga.current):ut(ga,s.pool)}function X_(){var n=yd();return n===null?null:{parent:Je._currentValue,pool:n}}var go=Error(r(460)),vd=Error(r(474)),Vc=Error(r(542)),Lc={then:function(){}};function W_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function J_(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Pi,Pi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ty(n),n;default:if(typeof s.status=="string")s.then(Pi,Pi);else{if(n=Ee,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ty(n),n}throw ya=s,go}}function _a(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ya=a,go):a}}var ya=null;function Z_(){if(ya===null)throw Error(r(459));var n=ya;return ya=null,n}function ty(n){if(n===go||n===Vc)throw Error(r(483))}var _o=null,kl=0;function zc(n){var s=kl;return kl+=1,_o===null&&(_o=[]),J_(_o,n,s)}function Vl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Pc(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function ey(n){function s(j,M){if(n){var F=j.deletions;F===null?(j.deletions=[M],j.flags|=16):F.push(M)}}function a(j,M){if(!n)return null;for(;M!==null;)s(j,M),M=M.sibling;return null}function l(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function f(j,M){return j=ws(j,M),j.index=0,j.sibling=null,j}function d(j,M,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<M?(j.flags|=67108866,M):F):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function y(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function x(j,M,F,J){return M===null||M.tag!==6?(M=od(F,j.mode,J),M.return=j,M):(M=f(M,F),M.return=j,M)}function D(j,M,F,J){var Tt=F.type;return Tt===Q?X(j,M,F.props.children,J,F.key):M!==null&&(M.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===C&&_a(Tt)===M.type)?(M=f(M,F.props),Vl(M,F),M.return=j,M):(M=Dc(F.type,F.key,F.props,null,j.mode,J),Vl(M,F),M.return=j,M)}function q(j,M,F,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=ld(F,j.mode,J),M.return=j,M):(M=f(M,F.children||[]),M.return=j,M)}function X(j,M,F,J,Tt){return M===null||M.tag!==7?(M=fa(F,j.mode,J,Tt),M.return=j,M):(M=f(M,F),M.return=j,M)}function Z(j,M,F){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=od(""+M,j.mode,F),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return F=Dc(M.type,M.key,M.props,null,j.mode,F),Vl(F,M),F.return=j,F;case O:return M=ld(M,j.mode,F),M.return=j,M;case C:return M=_a(M),Z(j,M,F)}if(Ve(M)||z(M))return M=fa(M,j.mode,F,null),M.return=j,M;if(typeof M.then=="function")return Z(j,zc(M),F);if(M.$$typeof===lt)return Z(j,Mc(j,M),F);Pc(j,M)}return null}function H(j,M,F,J){var Tt=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Tt!==null?null:x(j,M,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===Tt?D(j,M,F,J):null;case O:return F.key===Tt?q(j,M,F,J):null;case C:return F=_a(F),H(j,M,F,J)}if(Ve(F)||z(F))return Tt!==null?null:X(j,M,F,J,null);if(typeof F.then=="function")return H(j,M,zc(F),J);if(F.$$typeof===lt)return H(j,M,Mc(j,F),J);Pc(j,F)}return null}function Y(j,M,F,J,Tt){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return j=j.get(F)||null,x(M,j,""+J,Tt);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return j=j.get(J.key===null?F:J.key)||null,D(M,j,J,Tt);case O:return j=j.get(J.key===null?F:J.key)||null,q(M,j,J,Tt);case C:return J=_a(J),Y(j,M,F,J,Tt)}if(Ve(J)||z(J))return j=j.get(F)||null,X(M,j,J,Tt,null);if(typeof J.then=="function")return Y(j,M,F,zc(J),Tt);if(J.$$typeof===lt)return Y(j,M,F,Mc(M,J),Tt);Pc(M,J)}return null}function mt(j,M,F,J){for(var Tt=null,ie=null,gt=M,Ut=M=0,Qt=null;gt!==null&&Ut<F.length;Ut++){gt.index>Ut?(Qt=gt,gt=null):Qt=gt.sibling;var se=H(j,gt,F[Ut],J);if(se===null){gt===null&&(gt=Qt);break}n&&gt&&se.alternate===null&&s(j,gt),M=d(se,M,Ut),ie===null?Tt=se:ie.sibling=se,ie=se,gt=Qt}if(Ut===F.length)return a(j,gt),Wt&&Rs(j,Ut),Tt;if(gt===null){for(;Ut<F.length;Ut++)gt=Z(j,F[Ut],J),gt!==null&&(M=d(gt,M,Ut),ie===null?Tt=gt:ie.sibling=gt,ie=gt);return Wt&&Rs(j,Ut),Tt}for(gt=l(gt);Ut<F.length;Ut++)Qt=Y(gt,j,Ut,F[Ut],J),Qt!==null&&(n&&Qt.alternate!==null&&gt.delete(Qt.key===null?Ut:Qt.key),M=d(Qt,M,Ut),ie===null?Tt=Qt:ie.sibling=Qt,ie=Qt);return n&&gt.forEach(function(Dr){return s(j,Dr)}),Wt&&Rs(j,Ut),Tt}function xt(j,M,F,J){if(F==null)throw Error(r(151));for(var Tt=null,ie=null,gt=M,Ut=M=0,Qt=null,se=F.next();gt!==null&&!se.done;Ut++,se=F.next()){gt.index>Ut?(Qt=gt,gt=null):Qt=gt.sibling;var Dr=H(j,gt,se.value,J);if(Dr===null){gt===null&&(gt=Qt);break}n&&gt&&Dr.alternate===null&&s(j,gt),M=d(Dr,M,Ut),ie===null?Tt=Dr:ie.sibling=Dr,ie=Dr,gt=Qt}if(se.done)return a(j,gt),Wt&&Rs(j,Ut),Tt;if(gt===null){for(;!se.done;Ut++,se=F.next())se=Z(j,se.value,J),se!==null&&(M=d(se,M,Ut),ie===null?Tt=se:ie.sibling=se,ie=se);return Wt&&Rs(j,Ut),Tt}for(gt=l(gt);!se.done;Ut++,se=F.next())se=Y(gt,j,Ut,se.value,J),se!==null&&(n&&se.alternate!==null&&gt.delete(se.key===null?Ut:se.key),M=d(se,M,Ut),ie===null?Tt=se:ie.sibling=se,ie=se);return n&&gt.forEach(function(qA){return s(j,qA)}),Wt&&Rs(j,Ut),Tt}function ve(j,M,F,J){if(typeof F=="object"&&F!==null&&F.type===Q&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:t:{for(var Tt=F.key;M!==null;){if(M.key===Tt){if(Tt=F.type,Tt===Q){if(M.tag===7){a(j,M.sibling),J=f(M,F.props.children),J.return=j,j=J;break t}}else if(M.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===C&&_a(Tt)===M.type){a(j,M.sibling),J=f(M,F.props),Vl(J,F),J.return=j,j=J;break t}a(j,M);break}else s(j,M);M=M.sibling}F.type===Q?(J=fa(F.props.children,j.mode,J,F.key),J.return=j,j=J):(J=Dc(F.type,F.key,F.props,null,j.mode,J),Vl(J,F),J.return=j,j=J)}return y(j);case O:t:{for(Tt=F.key;M!==null;){if(M.key===Tt)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){a(j,M.sibling),J=f(M,F.children||[]),J.return=j,j=J;break t}else{a(j,M);break}else s(j,M);M=M.sibling}J=ld(F,j.mode,J),J.return=j,j=J}return y(j);case C:return F=_a(F),ve(j,M,F,J)}if(Ve(F))return mt(j,M,F,J);if(z(F)){if(Tt=z(F),typeof Tt!="function")throw Error(r(150));return F=Tt.call(F),xt(j,M,F,J)}if(typeof F.then=="function")return ve(j,M,zc(F),J);if(F.$$typeof===lt)return ve(j,M,Mc(j,F),J);Pc(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,M!==null&&M.tag===6?(a(j,M.sibling),J=f(M,F),J.return=j,j=J):(a(j,M),J=od(F,j.mode,J),J.return=j,j=J),y(j)):a(j,M)}return function(j,M,F,J){try{kl=0;var Tt=ve(j,M,F,J);return _o=null,Tt}catch(gt){if(gt===go||gt===Vc)throw gt;var ie=li(29,gt,null,j.mode);return ie.lanes=J,ie.return=j,ie}finally{}}}var va=ey(!0),ny=ey(!1),dr=!1;function Ed(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Td(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function pr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function mr(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(oe&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Ic(n),j_(n,null,a),s}return Rc(n,l,s,a),Ic(n)}function Ll(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,gi(n,a)}}function Sd(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?f=d=s:d=d.next=s}else f=d=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var bd=!1;function zl(){if(bd){var n=mo;if(n!==null)throw n}}function Pl(n,s,a,l){bd=!1;var f=n.updateQueue;dr=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var D=x,q=D.next;D.next=null,y===null?d=q:y.next=q,y=D;var X=n.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==y&&(x===null?X.firstBaseUpdate=q:x.next=q,X.lastBaseUpdate=D))}if(d!==null){var Z=f.baseState;y=0,X=q=D=null,x=d;do{var H=x.lane&-536870913,Y=H!==x.lane;if(Y?(Yt&H)===H:(l&H)===H){H!==0&&H===po&&(bd=!0),X!==null&&(X=X.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var mt=n,xt=x;H=s;var ve=a;switch(xt.tag){case 1:if(mt=xt.payload,typeof mt=="function"){Z=mt.call(ve,Z,H);break t}Z=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=xt.payload,H=typeof mt=="function"?mt.call(ve,Z,H):mt,H==null)break t;Z=E({},Z,H);break t;case 2:dr=!0}}H=x.callback,H!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(q=X=Y,D=Z):X=X.next=Y,y|=H;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;Y=x,x=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);X===null&&(D=Z),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=X,d===null&&(f.shared.lanes=0),Er|=y,n.lanes=y,n.memoizedState=Z}}function iy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function sy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)iy(a[n],s)}var yo=V(null),jc=V(0);function ry(n,s){n=js,ut(jc,n),ut(yo,s),js=n|s.baseLanes}function xd(){ut(jc,js),ut(yo,yo.current)}function Ad(){js=jc.current,W(yo),W(jc)}var ui=V(null),wi=null;function gr(n){var s=n.alternate;ut(qe,qe.current&1),ut(ui,n),wi===null&&(s===null||yo.current!==null||s.memoizedState!==null)&&(wi=n)}function Cd(n){ut(qe,qe.current),ut(ui,n),wi===null&&(wi=n)}function ay(n){n.tag===22?(ut(qe,qe.current),ut(ui,n),wi===null&&(wi=n)):_r()}function _r(){ut(qe,qe.current),ut(ui,ui.current)}function ci(n){W(ui),wi===n&&(wi=null),W(qe)}var qe=V(0);function Uc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Op(a)||Mp(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ns=0,Pt=null,_e=null,Ze=null,Bc=!1,vo=!1,Ea=!1,Fc=0,jl=0,Eo=null,Mx=0;function Le(){throw Error(r(321))}function wd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!oi(n[a],s[a]))return!1;return!0}function Rd(n,s,a,l,f,d){return Ns=d,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=n===null||n.memoizedState===null?qy:qd,Ea=!1,d=a(l,f),Ea=!1,vo&&(d=ly(s,a,l,f)),oy(n),d}function oy(n){$.H=Fl;var s=_e!==null&&_e.next!==null;if(Ns=0,Ze=_e=Pt=null,Bc=!1,jl=0,Eo=null,s)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&Oc(n)&&(tn=!0))}function ly(n,s,a,l){Pt=n;var f=0;do{if(vo&&(Eo=null),jl=0,vo=!1,25<=f)throw Error(r(301));if(f+=1,Ze=_e=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}$.H=Hy,d=s(a,l)}while(vo);return d}function kx(){var n=$.H,s=n.useState()[0];return s=typeof s.then=="function"?Ul(s):s,n=n.useState()[0],(_e!==null?_e.memoizedState:null)!==n&&(Pt.flags|=1024),s}function Id(){var n=Fc!==0;return Fc=0,n}function Dd(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Nd(n){if(Bc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Bc=!1}Ns=0,Ze=_e=Pt=null,vo=!1,jl=Fc=0,Eo=null}function Bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Pt.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function He(){if(_e===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=_e.next;var s=Ze===null?Pt.memoizedState:Ze.next;if(s!==null)Ze=s,_e=n;else{if(n===null)throw Pt.alternate===null?Error(r(467)):Error(r(310));_e=n,n={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Ze===null?Pt.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(n){var s=jl;return jl+=1,Eo===null&&(Eo=[]),n=J_(Eo,n,s),s=Pt,(Ze===null?s.memoizedState:Ze.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?qy:qd),n}function Hc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ul(n);if(n.$$typeof===lt)return xn(n)}throw Error(r(438,String(n)))}function Od(n){var s=null,a=Pt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Pt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=qc(),Pt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=L;return s.index++,a}function Os(n,s){return typeof s=="function"?s(n):s}function Gc(n){var s=He();return Md(s,_e,n)}function Md(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}s.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var x=y=null,D=null,q=s,X=!1;do{var Z=q.lane&-536870913;if(Z!==q.lane?(Yt&Z)===Z:(Ns&Z)===Z){var H=q.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Z===po&&(X=!0);else if((Ns&H)===H){q=q.next,H===po&&(X=!0);continue}else Z={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(x=D=Z,y=d):D=D.next=Z,Pt.lanes|=H,Er|=H;Z=q.action,Ea&&a(d,Z),d=q.hasEagerState?q.eagerState:a(d,Z)}else H={lane:Z,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(x=D=H,y=d):D=D.next=H,Pt.lanes|=Z,Er|=Z;q=q.next}while(q!==null&&q!==s);if(D===null?y=d:D.next=x,!oi(d,n.memoizedState)&&(tn=!0,X&&(a=mo,a!==null)))throw a;n.memoizedState=d,n.baseState=y,n.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function kd(n){var s=He(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=s.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do d=n(d,y.action),y=y.next;while(y!==f);oi(d,s.memoizedState)||(tn=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function uy(n,s,a){var l=Pt,f=He(),d=Wt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var y=!oi((_e||f).memoizedState,a);if(y&&(f.memoizedState=a,tn=!0),f=f.queue,zd(fy.bind(null,l,f,n),[n]),f.getSnapshot!==s||y||Ze!==null&&Ze.memoizedState.tag&1){if(l.flags|=2048,To(9,{destroy:void 0},hy.bind(null,l,f,a,s),null),Ee===null)throw Error(r(349));d||(Ns&127)!==0||cy(l,s,a)}return a}function cy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Pt.updateQueue,s===null?(s=qc(),Pt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function hy(n,s,a,l){s.value=a,s.getSnapshot=l,dy(s)&&py(n)}function fy(n,s,a){return a(function(){dy(s)&&py(n)})}function dy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!oi(n,a)}catch{return!0}}function py(n){var s=ha(n,2);s!==null&&Jn(s,n,2)}function Vd(n){var s=Bn();if(typeof n=="function"){var a=n;if(n=a(),Ea){qn(!0);try{a()}finally{qn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:n},s}function my(n,s,a,l){return n.baseState=a,Md(n,_e,typeof l=="function"?l:Os)}function Vx(n,s,a,l,f){if(Kc(n))throw Error(r(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};$.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,gy(s,d)):(d.next=a.next,s.pending=a.next=d)}}function gy(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var d=$.T,y={};$.T=y;try{var x=a(f,l),D=$.S;D!==null&&D(y,x),_y(n,s,x)}catch(q){Ld(n,s,q)}finally{d!==null&&y.types!==null&&(d.types=y.types),$.T=d}}else try{d=a(f,l),_y(n,s,d)}catch(q){Ld(n,s,q)}}function _y(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(n,s,l)},function(l){return Ld(n,s,l)}):yy(n,s,a)}function yy(n,s,a){s.status="fulfilled",s.value=a,vy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,gy(n,a)))}function Ld(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,vy(s),s=s.next;while(s!==l)}n.action=null}function vy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Ey(n,s){return s}function Ty(n,s){if(Wt){var a=Ee.formState;if(a!==null){t:{var l=Pt;if(Wt){if(Ce){e:{for(var f=Ce,d=Ci;f.nodeType!==8;){if(!d){f=null;break e}if(f=Ri(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Ce=Ri(f.nextSibling),l=f.data==="F!";break t}}hr(l)}l=!1}l&&(s=a[0])}}return a=Bn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ey,lastRenderedState:s},a.queue=l,a=Uy.bind(null,Pt,l),l.dispatch=a,l=Vd(!1),d=Fd.bind(null,Pt,!1,l.queue),l=Bn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=Vx.bind(null,Pt,f,d,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function Sy(n){var s=He();return by(s,_e,n)}function by(n,s,a){if(s=Md(n,s,Ey)[0],n=Gc(Os)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ul(s)}catch(y){throw y===go?Vc:y}else l=s;s=He();var f=s.queue,d=f.dispatch;return a!==s.memoizedState&&(Pt.flags|=2048,To(9,{destroy:void 0},Lx.bind(null,f,a),null)),[l,d,n]}function Lx(n,s){n.action=s}function xy(n){var s=He(),a=_e;if(a!==null)return by(s,a,n);He(),s=s.memoizedState,a=He();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function To(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Pt.updateQueue,s===null&&(s=qc(),Pt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Ay(){return He().memoizedState}function Yc(n,s,a,l){var f=Bn();Pt.flags|=n,f.memoizedState=To(1|s,{destroy:void 0},a,l===void 0?null:l)}function Qc(n,s,a,l){var f=He();l=l===void 0?null:l;var d=f.memoizedState.inst;_e!==null&&l!==null&&wd(l,_e.memoizedState.deps)?f.memoizedState=To(s,d,a,l):(Pt.flags|=n,f.memoizedState=To(1|s,d,a,l))}function Cy(n,s){Yc(8390656,8,n,s)}function zd(n,s){Qc(2048,8,n,s)}function zx(n){Pt.flags|=4;var s=Pt.updateQueue;if(s===null)s=qc(),Pt.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function wy(n){var s=He().memoizedState;return zx({ref:s,nextImpl:n}),function(){if((oe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Ry(n,s){return Qc(4,2,n,s)}function Iy(n,s){return Qc(4,4,n,s)}function Dy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,Qc(4,4,Dy.bind(null,s,n),a)}function Pd(){}function Oy(n,s){var a=He();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&wd(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function My(n,s){var a=He();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&wd(s,l[1]))return l[0];if(l=n(),Ea){qn(!0);try{n()}finally{qn(!1)}}return a.memoizedState=[l,s],l}function jd(n,s,a){return a===void 0||(Ns&1073741824)!==0&&(Yt&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=kv(),Pt.lanes|=n,Er|=n,a)}function ky(n,s,a,l){return oi(a,s)?a:yo.current!==null?(n=jd(n,a,l),oi(n,s)||(tn=!0),n):(Ns&42)===0||(Ns&1073741824)!==0&&(Yt&261930)===0?(tn=!0,n.memoizedState=a):(n=kv(),Pt.lanes|=n,Er|=n,s)}function Vy(n,s,a,l,f){var d=ct.p;ct.p=d!==0&&8>d?d:8;var y=$.T,x={};$.T=x,Fd(n,!1,s,a);try{var D=f(),q=$.S;if(q!==null&&q(x,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=Ox(D,l);Bl(n,s,X,di(n))}else Bl(n,s,l,di(n))}catch(Z){Bl(n,s,{then:function(){},status:"rejected",reason:Z},di())}finally{ct.p=d,y!==null&&x.types!==null&&(y.types=x.types),$.T=y}}function Px(){}function Ud(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=Ly(n).queue;Vy(n,f,s,vt,a===null?Px:function(){return zy(n),a(l)})}function Ly(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:vt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function zy(n){var s=Ly(n);s.next===null&&(s=n.alternate.memoizedState),Bl(n,s.next.queue,{},di())}function Bd(){return xn(su)}function Py(){return He().memoizedState}function jy(){return He().memoizedState}function jx(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=di();n=pr(a);var l=mr(s,n,a);l!==null&&(Jn(l,s,a),Ll(l,s,a)),s={cache:gd()},n.payload=s;return}s=s.return}}function Ux(n,s,a){var l=di();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Kc(n)?By(s,a):(a=rd(n,s,a,l),a!==null&&(Jn(a,n,l),Fy(a,s,l)))}function Uy(n,s,a){var l=di();Bl(n,s,a,l)}function Bl(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kc(n))By(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var y=s.lastRenderedState,x=d(y,a);if(f.hasEagerState=!0,f.eagerState=x,oi(x,y))return Rc(n,s,f,0),Ee===null&&wc(),!1}catch{}finally{}if(a=rd(n,s,f,l),a!==null)return Jn(a,n,l),Fy(a,s,l),!0}return!1}function Fd(n,s,a,l){if(l={lane:2,revertLane:Ep(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Kc(n)){if(s)throw Error(r(479))}else s=rd(n,a,l,2),s!==null&&Jn(s,n,2)}function Kc(n){var s=n.alternate;return n===Pt||s!==null&&s===Pt}function By(n,s){vo=Bc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Fy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,gi(n,a)}}var Fl={readContext:xn,use:Hc,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useLayoutEffect:Le,useInsertionEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useSyncExternalStore:Le,useId:Le,useHostTransitionStatus:Le,useFormState:Le,useActionState:Le,useOptimistic:Le,useMemoCache:Le,useCacheRefresh:Le};Fl.useEffectEvent=Le;var qy={readContext:xn,use:Hc,useCallback:function(n,s){return Bn().memoizedState=[n,s===void 0?null:s],n},useContext:xn,useEffect:Cy,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Yc(4194308,4,Dy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Yc(4194308,4,n,s)},useInsertionEffect:function(n,s){Yc(4,2,n,s)},useMemo:function(n,s){var a=Bn();s=s===void 0?null:s;var l=n();if(Ea){qn(!0);try{n()}finally{qn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Bn();if(a!==void 0){var f=a(s);if(Ea){qn(!0);try{a(s)}finally{qn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Ux.bind(null,Pt,n),[l.memoizedState,n]},useRef:function(n){var s=Bn();return n={current:n},s.memoizedState=n},useState:function(n){n=Vd(n);var s=n.queue,a=Uy.bind(null,Pt,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Pd,useDeferredValue:function(n,s){var a=Bn();return jd(a,n,s)},useTransition:function(){var n=Vd(!1);return n=Vy.bind(null,Pt,n.queue,!0,!1),Bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Pt,f=Bn();if(Wt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Ee===null)throw Error(r(349));(Yt&127)!==0||cy(l,s,a)}f.memoizedState=a;var d={value:a,getSnapshot:s};return f.queue=d,Cy(fy.bind(null,l,d,n),[n]),l.flags|=2048,To(9,{destroy:void 0},hy.bind(null,l,d,a,s),null),a},useId:function(){var n=Bn(),s=Ee.identifierPrefix;if(Wt){var a=us,l=ls;a=(l&~(1<<32-ke(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Fc++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Mx++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Bd,useFormState:Ty,useActionState:Ty,useOptimistic:function(n){var s=Bn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Fd.bind(null,Pt,!0,a),a.dispatch=s,[n,s]},useMemoCache:Od,useCacheRefresh:function(){return Bn().memoizedState=jx.bind(null,Pt)},useEffectEvent:function(n){var s=Bn(),a={impl:n};return s.memoizedState=a,function(){if((oe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},qd={readContext:xn,use:Hc,useCallback:Oy,useContext:xn,useEffect:zd,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:My,useReducer:Gc,useRef:Ay,useState:function(){return Gc(Os)},useDebugValue:Pd,useDeferredValue:function(n,s){var a=He();return ky(a,_e.memoizedState,n,s)},useTransition:function(){var n=Gc(Os)[0],s=He().memoizedState;return[typeof n=="boolean"?n:Ul(n),s]},useSyncExternalStore:uy,useId:Py,useHostTransitionStatus:Bd,useFormState:Sy,useActionState:Sy,useOptimistic:function(n,s){var a=He();return my(a,_e,n,s)},useMemoCache:Od,useCacheRefresh:jy};qd.useEffectEvent=wy;var Hy={readContext:xn,use:Hc,useCallback:Oy,useContext:xn,useEffect:zd,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:My,useReducer:kd,useRef:Ay,useState:function(){return kd(Os)},useDebugValue:Pd,useDeferredValue:function(n,s){var a=He();return _e===null?jd(a,n,s):ky(a,_e.memoizedState,n,s)},useTransition:function(){var n=kd(Os)[0],s=He().memoizedState;return[typeof n=="boolean"?n:Ul(n),s]},useSyncExternalStore:uy,useId:Py,useHostTransitionStatus:Bd,useFormState:xy,useActionState:xy,useOptimistic:function(n,s){var a=He();return _e!==null?my(a,_e,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Od,useCacheRefresh:jy};Hy.useEffectEvent=wy;function Hd(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gd={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=di(),f=pr(l);f.payload=s,a!=null&&(f.callback=a),s=mr(n,f,l),s!==null&&(Jn(s,n,l),Ll(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=di(),f=pr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=mr(n,f,l),s!==null&&(Jn(s,n,l),Ll(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=di(),l=pr(a);l.tag=2,s!=null&&(l.callback=s),s=mr(n,l,a),s!==null&&(Jn(s,n,a),Ll(s,n,a))}};function Gy(n,s,a,l,f,d,y){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,y):s.prototype&&s.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function Yy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&Gd.enqueueReplaceState(s,s.state,null)}function Ta(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Qy(n){Cc(n)}function Ky(n){console.error(n)}function $y(n){Cc(n)}function $c(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Xy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Yd(n,s,a){return a=pr(a),a.tag=3,a.payload={element:null},a.callback=function(){$c(n,s)},a}function Wy(n){return n=pr(n),n.tag=3,n}function Jy(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Xy(s,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(n.callback=function(){Xy(s,a,l),typeof f!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function Bx(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&fo(s,a,f,!0),a=ui.current,a!==null){switch(a.tag){case 31:case 13:return wi===null?oh():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Lc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),_p(n,l,f)),!1;case 22:return a.flags|=65536,l===Lc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),_p(n,l,f)),!1}throw Error(r(435,a.tag))}return _p(n,l,f),oh(),!1}if(Wt)return s=ui.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==hd&&(n=Error(r(422),{cause:l}),Nl(bi(n,a)))):(l!==hd&&(s=Error(r(423),{cause:l}),Nl(bi(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=bi(l,a),f=Yd(n.stateNode,l,f),Sd(n,f),ze!==4&&(ze=2)),!1;var d=Error(r(520),{cause:l});if(d=bi(d,a),Xl===null?Xl=[d]:Xl.push(d),ze!==4&&(ze=2),s===null)return!0;l=bi(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Yd(a.stateNode,l,n),Sd(a,n),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Tr===null||!Tr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Wy(f),Jy(f,n,a,l),Sd(a,f),!1}a=a.return}while(a!==null);return!1}var Qd=Error(r(461)),tn=!1;function An(n,s,a,l){s.child=n===null?ny(s,null,a,l):va(s,n.child,a,l)}function Zy(n,s,a,l,f){a=a.render;var d=s.ref;if("ref"in l){var y={};for(var x in l)x!=="ref"&&(y[x]=l[x])}else y=l;return ma(s),l=Rd(n,s,a,y,d,f),x=Id(),n!==null&&!tn?(Dd(n,s,f),Ms(n,s,f)):(Wt&&x&&ud(s),s.flags|=1,An(n,s,l,f),s.child)}function tv(n,s,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!ad(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,ev(n,s,d,l,f)):(n=Dc(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!ep(n,f)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(y,l)&&n.ref===s.ref)return Ms(n,s,f)}return s.flags|=1,n=ws(d,l),n.ref=s.ref,n.return=s,s.child=n}function ev(n,s,a,l,f){if(n!==null){var d=n.memoizedProps;if(Rl(d,l)&&n.ref===s.ref)if(tn=!1,s.pendingProps=l=d,ep(n,f))(n.flags&131072)!==0&&(tn=!0);else return s.lanes=n.lanes,Ms(n,s,f)}return Kd(n,s,a,l,f)}function nv(n,s,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,s.child=null;return iv(n,s,d,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&kc(s,d!==null?d.cachePool:null),d!==null?ry(s,d):xd(),ay(s);else return l=s.lanes=536870912,iv(n,s,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(kc(s,d.cachePool),ry(s,d),_r(),s.memoizedState=null):(n!==null&&kc(s,null),xd(),_r());return An(n,s,f,a),s.child}function ql(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function iv(n,s,a,l,f){var d=yd();return d=d===null?null:{parent:Je._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},n!==null&&kc(s,null),xd(),ay(s),n!==null&&fo(n,s,l,!0),s.childLanes=f,null}function Xc(n,s){return s=Jc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function sv(n,s,a){return va(s,n.child,null,a),n=Xc(s,s.pendingProps),n.flags|=2,ci(s),s.memoizedState=null,n}function Fx(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Wt){if(l.mode==="hidden")return n=Xc(s,l),s.lanes=536870912,ql(null,n);if(Cd(s),(n=Ce)?(n=g0(n,Ci),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ur!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},a=B_(n),a.return=s,s.child=a,bn=s,Ce=null)):n=null,n===null)throw hr(s);return s.lanes=536870912,null}return Xc(s,l)}var d=n.memoizedState;if(d!==null){var y=d.dehydrated;if(Cd(s),f)if(s.flags&256)s.flags&=-257,s=sv(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(tn||fo(n,s,a,!1),f=(a&n.childLanes)!==0,tn||f){if(l=Ee,l!==null&&(y=Li(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,ha(n,y),Jn(l,n,y),Qd;oh(),s=sv(n,s,a)}else n=d.treeContext,Ce=Ri(y.nextSibling),bn=s,Wt=!0,cr=null,Ci=!1,n!==null&&H_(s,n),s=Xc(s,l),s.flags|=4096;return s}return n=ws(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Wc(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Kd(n,s,a,l,f){return ma(s),a=Rd(n,s,a,l,void 0,f),l=Id(),n!==null&&!tn?(Dd(n,s,f),Ms(n,s,f)):(Wt&&l&&ud(s),s.flags|=1,An(n,s,a,f),s.child)}function rv(n,s,a,l,f,d){return ma(s),s.updateQueue=null,a=ly(s,l,a,f),oy(n),l=Id(),n!==null&&!tn?(Dd(n,s,d),Ms(n,s,d)):(Wt&&l&&ud(s),s.flags|=1,An(n,s,a,d),s.child)}function av(n,s,a,l,f){if(ma(s),s.stateNode===null){var d=lo,y=a.contextType;typeof y=="object"&&y!==null&&(d=xn(y)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gd,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Ed(s),y=a.contextType,d.context=typeof y=="object"&&y!==null?xn(y):lo,d.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Hd(s,a,y,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Gd.enqueueReplaceState(d,d.state,null),Pl(s,l,d,f),zl(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){d=s.stateNode;var x=s.memoizedProps,D=Ta(a,x);d.props=D;var q=d.context,X=a.contextType;y=lo,typeof X=="object"&&X!==null&&(y=xn(X));var Z=a.getDerivedStateFromProps;X=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x||q!==y)&&Yy(s,d,l,y),dr=!1;var H=s.memoizedState;d.state=H,Pl(s,l,d,f),zl(),q=s.memoizedState,x||H!==q||dr?(typeof Z=="function"&&(Hd(s,a,Z,l),q=s.memoizedState),(D=dr||Gy(s,a,D,l,H,q,y))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=q),d.props=l,d.state=q,d.context=y,l=D):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Td(n,s),y=s.memoizedProps,X=Ta(a,y),d.props=X,Z=s.pendingProps,H=d.context,q=a.contextType,D=lo,typeof q=="object"&&q!==null&&(D=xn(q)),x=a.getDerivedStateFromProps,(q=typeof x=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==Z||H!==D)&&Yy(s,d,l,D),dr=!1,H=s.memoizedState,d.state=H,Pl(s,l,d,f),zl();var Y=s.memoizedState;y!==Z||H!==Y||dr||n!==null&&n.dependencies!==null&&Oc(n.dependencies)?(typeof x=="function"&&(Hd(s,a,x,l),Y=s.memoizedState),(X=dr||Gy(s,a,X,l,H,Y,D)||n!==null&&n.dependencies!==null&&Oc(n.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,D)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Y),d.props=l,d.state=Y,d.context=D,l=X):(typeof d.componentDidUpdate!="function"||y===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),l=!1)}return d=l,Wc(n,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&l?(s.child=va(s,n.child,null,f),s.child=va(s,null,a,f)):An(n,s,a,f),s.memoizedState=d.state,n=s.child):n=Ms(n,s,f),n}function ov(n,s,a,l){return da(),s.flags|=256,An(n,s,a,l),s.child}var $d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(n){return{baseLanes:n,cachePool:X_()}}function Wd(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=fi),n}function lv(n,s,a){var l=s.pendingProps,f=!1,d=(s.flags&128)!==0,y;if((y=d)||(y=n!==null&&n.memoizedState===null?!1:(qe.current&2)!==0),y&&(f=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,n===null){if(Wt){if(f?gr(s):_r(),(n=Ce)?(n=g0(n,Ci),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ur!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},a=B_(n),a.return=s,s.child=a,bn=s,Ce=null)):n=null,n===null)throw hr(s);return Mp(n)?s.lanes=32:s.lanes=536870912,null}var x=l.children;return l=l.fallback,f?(_r(),f=s.mode,x=Jc({mode:"hidden",children:x},f),l=fa(l,f,a,null),x.return=s,l.return=s,x.sibling=l,s.child=x,l=s.child,l.memoizedState=Xd(a),l.childLanes=Wd(n,y,a),s.memoizedState=$d,ql(null,l)):(gr(s),Jd(s,x))}var D=n.memoizedState;if(D!==null&&(x=D.dehydrated,x!==null)){if(d)s.flags&256?(gr(s),s.flags&=-257,s=Zd(n,s,a)):s.memoizedState!==null?(_r(),s.child=n.child,s.flags|=128,s=null):(_r(),x=l.fallback,f=s.mode,l=Jc({mode:"visible",children:l.children},f),x=fa(x,f,a,null),x.flags|=2,l.return=s,x.return=s,l.sibling=x,s.child=l,va(s,n.child,null,a),l=s.child,l.memoizedState=Xd(a),l.childLanes=Wd(n,y,a),s.memoizedState=$d,s=ql(null,l));else if(gr(s),Mp(x)){if(y=x.nextSibling&&x.nextSibling.dataset,y)var q=y.dgst;y=q,l=Error(r(419)),l.stack="",l.digest=y,Nl({value:l,source:null,stack:null}),s=Zd(n,s,a)}else if(tn||fo(n,s,a,!1),y=(a&n.childLanes)!==0,tn||y){if(y=Ee,y!==null&&(l=Li(y,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ha(n,l),Jn(y,n,l),Qd;Op(x)||oh(),s=Zd(n,s,a)}else Op(x)?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,Ce=Ri(x.nextSibling),bn=s,Wt=!0,cr=null,Ci=!1,n!==null&&H_(s,n),s=Jd(s,l.children),s.flags|=4096);return s}return f?(_r(),x=l.fallback,f=s.mode,D=n.child,q=D.sibling,l=ws(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?x=ws(q,x):(x=fa(x,f,a,null),x.flags|=2),x.return=s,l.return=s,l.sibling=x,s.child=l,ql(null,l),l=s.child,x=n.child.memoizedState,x===null?x=Xd(a):(f=x.cachePool,f!==null?(D=Je._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=X_(),x={baseLanes:x.baseLanes|a,cachePool:f}),l.memoizedState=x,l.childLanes=Wd(n,y,a),s.memoizedState=$d,ql(n.child,l)):(gr(s),a=n.child,n=a.sibling,a=ws(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(y=s.deletions,y===null?(s.deletions=[n],s.flags|=16):y.push(n)),s.child=a,s.memoizedState=null,a)}function Jd(n,s){return s=Jc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Jc(n,s){return n=li(22,n,null,s),n.lanes=0,n}function Zd(n,s,a){return va(s,n.child,null,a),n=Jd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function uv(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),pd(n.return,s,a)}function tp(n,s,a,l,f,d){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=f,y.treeForkCount=d)}function cv(n,s,a){var l=s.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var y=qe.current,x=(y&2)!==0;if(x?(y=y&1|2,s.flags|=128):y&=1,ut(qe,y),An(n,s,l,a),l=Wt?Dl:0,!x&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uv(n,a,s);else if(n.tag===19)uv(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Uc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),tp(s,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Uc(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}tp(s,!0,a,null,d,l);break;case"together":tp(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Ms(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Er|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(fo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=ws(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ws(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function ep(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Oc(n)))}function qx(n,s,a){switch(s.tag){case 3:xe(s,s.stateNode.containerInfo),fr(s,Je,n.memoizedState.cache),da();break;case 27:case 5:Mi(s);break;case 4:xe(s,s.stateNode.containerInfo);break;case 10:fr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Cd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(gr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?lv(n,s,a):(gr(s),n=Ms(n,s,a),n!==null?n.sibling:null);gr(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(fo(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return cv(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ut(qe,qe.current),l)break;return null;case 22:return s.lanes=0,nv(n,s,a,s.pendingProps);case 24:fr(s,Je,n.memoizedState.cache)}return Ms(n,s,a)}function hv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)tn=!0;else{if(!ep(n,a)&&(s.flags&128)===0)return tn=!1,qx(n,s,a);tn=(n.flags&131072)!==0}else tn=!1,Wt&&(s.flags&1048576)!==0&&q_(s,Dl,s.index);switch(s.lanes=0,s.tag){case 16:t:{var l=s.pendingProps;if(n=_a(s.elementType),s.type=n,typeof n=="function")ad(n)?(l=Ta(n,l),s.tag=1,s=av(null,s,n,l,a)):(s.tag=0,s=Kd(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===bt){s.tag=11,s=Zy(null,s,n,l,a);break t}else if(f===R){s.tag=14,s=tv(null,s,n,l,a);break t}}throw s=ce(n)||n,Error(r(306,s,""))}}return s;case 0:return Kd(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Ta(l,s.pendingProps),av(n,s,l,f,a);case 3:t:{if(xe(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;f=d.element,Td(n,s),Pl(s,l,null,a);var y=s.memoizedState;if(l=y.cache,fr(s,Je,l),l!==d.cache&&md(s,[Je],a,!0),zl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=ov(n,s,l,a);break t}else if(l!==f){f=bi(Error(r(424)),s),Nl(f),s=ov(n,s,l,a);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ce=Ri(n.firstChild),bn=s,Wt=!0,cr=null,Ci=!0,a=ny(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(da(),l===f){s=Ms(n,s,a);break t}An(n,s,l,a)}s=s.child}return s;case 26:return Wc(n,s),n===null?(a=S0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Wt||(a=s.type,n=s.pendingProps,l=ph(kt.current).createElement(a),l[Ae]=s,l[Qe]=n,Cn(l,a,n),Xe(l),s.stateNode=l):s.memoizedState=S0(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Mi(s),n===null&&Wt&&(l=s.stateNode=v0(s.type,s.pendingProps,kt.current),bn=s,Ci=!0,f=Ce,Ar(s.type)?(kp=f,Ce=Ri(l.firstChild)):Ce=f),An(n,s,s.pendingProps.children,a),Wc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Wt&&((f=l=Ce)&&(l=vA(l,s.type,s.pendingProps,Ci),l!==null?(s.stateNode=l,bn=s,Ce=Ri(l.firstChild),Ci=!1,f=!0):f=!1),f||hr(s)),Mi(s),f=s.type,d=s.pendingProps,y=n!==null?n.memoizedProps:null,l=d.children,Ip(f,d)?l=null:y!==null&&Ip(f,y)&&(s.flags|=32),s.memoizedState!==null&&(f=Rd(n,s,kx,null,null,a),su._currentValue=f),Wc(n,s),An(n,s,l,a),s.child;case 6:return n===null&&Wt&&((n=a=Ce)&&(a=EA(a,s.pendingProps,Ci),a!==null?(s.stateNode=a,bn=s,Ce=null,n=!0):n=!1),n||hr(s)),null;case 13:return lv(n,s,a);case 4:return xe(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=va(s,null,l,a):An(n,s,l,a),s.child;case 11:return Zy(n,s,s.type,s.pendingProps,a);case 7:return An(n,s,s.pendingProps,a),s.child;case 8:return An(n,s,s.pendingProps.children,a),s.child;case 12:return An(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,fr(s,s.type,l.value),An(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,ma(s),f=xn(f),l=l(f),s.flags|=1,An(n,s,l,a),s.child;case 14:return tv(n,s,s.type,s.pendingProps,a);case 15:return ev(n,s,s.type,s.pendingProps,a);case 19:return cv(n,s,a);case 31:return Fx(n,s,a);case 22:return nv(n,s,a,s.pendingProps);case 24:return ma(s),l=xn(Je),n===null?(f=yd(),f===null&&(f=Ee,d=gd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),s.memoizedState={parent:l,cache:f},Ed(s),fr(s,Je,f)):((n.lanes&a)!==0&&(Td(n,s),Pl(s,null,null,a),zl()),f=n.memoizedState,d=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),fr(s,Je,l)):(l=d.cache,fr(s,Je,l),l!==f.cache&&md(s,[Je],a,!0))),An(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ks(n){n.flags|=4}function np(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Pv())n.flags|=8192;else throw ya=Lc,vd}else n.flags&=-16777217}function fv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!w0(s))if(Pv())n.flags|=8192;else throw ya=Lc,vd}function Zc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?le():536870912,n.lanes|=s,Ao|=s)}function Hl(n,s){if(!Wt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function we(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function Hx(n,s,a){var l=s.pendingProps;switch(cd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(s),null;case 1:return we(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ds(Je),me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ho(s)?ks(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,fd())),we(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(ks(s),d!==null?(we(s),fv(s,d)):(we(s),np(s,f,null,l,a))):d?d!==n.memoizedState?(ks(s),we(s),fv(s,d)):(we(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&ks(s),we(s),np(s,f,n,l,a)),null;case 27:if(Wi(s),a=kt.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ks(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return we(s),null}n=dt.current,ho(s)?G_(s):(n=v0(f,l,a),s.stateNode=n,ks(s))}return we(s),null;case 5:if(Wi(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ks(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return we(s),null}if(d=dt.current,ho(s))G_(s);else{var y=ph(kt.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(f,{is:l.is}):y.createElement(f)}}d[Ae]=s,d[Qe]=l;t:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break t;for(;y.sibling===null;){if(y.return===null||y.return===s)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=d;t:switch(Cn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&ks(s)}}return we(s),np(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&ks(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=kt.current,ho(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=bn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ae]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||l0(n.nodeValue,a)),n||hr(s,!0)}else n=ph(n).createTextNode(l),n[Ae]=s,s.stateNode=n}return we(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=ho(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ae]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),n=!1}else a=fd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(ci(s),s):(ci(s),null);if((s.flags&128)!==0)throw Error(r(558))}return we(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ho(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ae]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),f=!1}else f=fd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ci(s),s):(ci(s),null)}return ci(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Zc(s,s.updateQueue),we(s),null);case 4:return me(),n===null&&xp(s.stateNode.containerInfo),we(s),null;case 10:return Ds(s.type),we(s),null;case 19:if(W(qe),l=s.memoizedState,l===null)return we(s),null;if(f=(s.flags&128)!==0,d=l.rendering,d===null)if(f)Hl(l,!1);else{if(ze!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=Uc(n),d!==null){for(s.flags|=128,Hl(l,!1),n=d.updateQueue,s.updateQueue=n,Zc(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)U_(a,n),a=a.sibling;return ut(qe,qe.current&1|2),Wt&&Rs(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&pn()>sh&&(s.flags|=128,f=!0,Hl(l,!1),s.lanes=4194304)}else{if(!f)if(n=Uc(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Zc(s,n),Hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Wt)return we(s),null}else 2*pn()-l.renderingStartTime>sh&&a!==536870912&&(s.flags|=128,f=!0,Hl(l,!1),s.lanes=4194304);l.isBackwards?(d.sibling=s.child,s.child=d):(n=l.last,n!==null?n.sibling=d:s.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=pn(),n.sibling=null,a=qe.current,ut(qe,f?a&1|2:a&1),Wt&&Rs(s,l.treeForkCount),n):(we(s),null);case 22:case 23:return ci(s),Ad(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(we(s),s.subtreeFlags&6&&(s.flags|=8192)):we(s),a=s.updateQueue,a!==null&&Zc(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&W(ga),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ds(Je),we(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Gx(n,s){switch(cd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ds(Je),me(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Wi(s),null;case 31:if(s.memoizedState!==null){if(ci(s),s.alternate===null)throw Error(r(340));da()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(ci(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));da()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return W(qe),null;case 4:return me(),null;case 10:return Ds(s.type),null;case 22:case 23:return ci(s),Ad(),n!==null&&W(ga),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ds(Je),null;case 25:return null;default:return null}}function dv(n,s){switch(cd(s),s.tag){case 3:Ds(Je),me();break;case 26:case 27:case 5:Wi(s);break;case 4:me();break;case 31:s.memoizedState!==null&&ci(s);break;case 13:ci(s);break;case 19:W(qe);break;case 10:Ds(s.type);break;case 22:case 23:ci(s),Ad(),n!==null&&W(ga);break;case 24:Ds(Je)}}function Gl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==f)}}catch(x){pe(s,s.return,x)}}function yr(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var y=l.inst,x=y.destroy;if(x!==void 0){y.destroy=void 0,f=s;var D=a,q=x;try{q()}catch(X){pe(f,D,X)}}}l=l.next}while(l!==d)}}catch(X){pe(s,s.return,X)}}function pv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{sy(s,a)}catch(l){pe(n,n.return,l)}}}function mv(n,s,a){a.props=Ta(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){pe(n,s,l)}}function Yl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){pe(n,s,f)}}function cs(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){pe(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){pe(n,s,f)}else a.current=null}function gv(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){pe(n,n.return,f)}}function ip(n,s,a){try{var l=n.stateNode;dA(l,n.type,a,s),l[Qe]=s}catch(f){pe(n,n.return,f)}}function _v(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ar(n.type)||n.tag===4}function sp(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||_v(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ar(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rp(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Pi));else if(l!==4&&(l===27&&Ar(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(rp(n,s,a),n=n.sibling;n!==null;)rp(n,s,a),n=n.sibling}function th(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Ar(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(th(n,s,a),n=n.sibling;n!==null;)th(n,s,a),n=n.sibling}function yv(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Cn(s,l,a),s[Ae]=n,s[Qe]=a}catch(d){pe(n,n.return,d)}}var Vs=!1,en=!1,ap=!1,vv=typeof WeakSet=="function"?WeakSet:Set,_n=null;function Yx(n,s){if(n=n.containerInfo,wp=Th,n=N_(n),Zf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var y=0,x=-1,D=-1,q=0,X=0,Z=n,H=null;e:for(;;){for(var Y;Z!==a||f!==0&&Z.nodeType!==3||(x=y+f),Z!==d||l!==0&&Z.nodeType!==3||(D=y+l),Z.nodeType===3&&(y+=Z.nodeValue.length),(Y=Z.firstChild)!==null;)H=Z,Z=Y;for(;;){if(Z===n)break e;if(H===a&&++q===f&&(x=y),H===d&&++X===l&&(D=y),(Y=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=Y}a=x===-1||D===-1?null:{start:x,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rp={focusedElem:n,selectionRange:a},Th=!1,_n=s;_n!==null;)if(s=_n,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_n=n;else for(;_n!==null;){switch(s=_n,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=s,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var mt=Ta(a.type,f);n=l.getSnapshotBeforeUpdate(mt,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(xt){pe(a,a.return,xt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Np(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Np(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,_n=n;break}_n=s.return}}function Ev(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:zs(n,a),l&4&&Gl(5,a);break;case 1:if(zs(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(y){pe(a,a.return,y)}else{var f=Ta(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(y){pe(a,a.return,y)}}l&64&&pv(a),l&512&&Yl(a,a.return);break;case 3:if(zs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sy(n,s)}catch(y){pe(a,a.return,y)}}break;case 27:s===null&&l&4&&yv(a);case 26:case 5:zs(n,a),s===null&&l&4&&gv(a),l&512&&Yl(a,a.return);break;case 12:zs(n,a);break;case 31:zs(n,a),l&4&&bv(n,a);break;case 13:zs(n,a),l&4&&xv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=eA.bind(null,a),TA(n,a))));break;case 22:if(l=a.memoizedState!==null||Vs,!l){s=s!==null&&s.memoizedState!==null||en,f=Vs;var d=en;Vs=l,(en=s)&&!d?Ps(n,a,(a.subtreeFlags&8772)!==0):zs(n,a),Vs=f,en=d}break;case 30:break;default:zs(n,a)}}function Tv(n){var s=n.alternate;s!==null&&(n.alternate=null,Tv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&yi(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Me=null,Kn=!1;function Ls(n,s,a){for(a=a.child;a!==null;)Sv(n,s,a),a=a.sibling}function Sv(n,s,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(si,a)}catch{}switch(a.tag){case 26:en||cs(a,s),Ls(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||cs(a,s);var l=Me,f=Kn;Ar(a.type)&&(Me=a.stateNode,Kn=!1),Ls(n,s,a),eu(a.stateNode),Me=l,Kn=f;break;case 5:en||cs(a,s);case 6:if(l=Me,f=Kn,Me=null,Ls(n,s,a),Me=l,Kn=f,Me!==null)if(Kn)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(a.stateNode)}catch(d){pe(a,s,d)}else try{Me.removeChild(a.stateNode)}catch(d){pe(a,s,d)}break;case 18:Me!==null&&(Kn?(n=Me,p0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Mo(n)):p0(Me,a.stateNode));break;case 4:l=Me,f=Kn,Me=a.stateNode.containerInfo,Kn=!0,Ls(n,s,a),Me=l,Kn=f;break;case 0:case 11:case 14:case 15:yr(2,a,s),en||yr(4,a,s),Ls(n,s,a);break;case 1:en||(cs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&mv(a,s,l)),Ls(n,s,a);break;case 21:Ls(n,s,a);break;case 22:en=(l=en)||a.memoizedState!==null,Ls(n,s,a),en=l;break;default:Ls(n,s,a)}}function bv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Mo(n)}catch(a){pe(s,s.return,a)}}}function xv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Mo(n)}catch(a){pe(s,s.return,a)}}function Qx(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new vv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new vv),s;default:throw Error(r(435,n.tag))}}function eh(n,s){var a=Qx(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=nA.bind(null,n,l);l.then(f,f)}})}function $n(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,y=s,x=y;t:for(;x!==null;){switch(x.tag){case 27:if(Ar(x.type)){Me=x.stateNode,Kn=!1;break t}break;case 5:Me=x.stateNode,Kn=!1;break t;case 3:case 4:Me=x.stateNode.containerInfo,Kn=!0;break t}x=x.return}if(Me===null)throw Error(r(160));Sv(d,y,f),Me=null,Kn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Av(s,n),s=s.sibling}var Hi=null;function Av(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$n(s,n),Xn(n),l&4&&(yr(3,n,n.return),Gl(3,n),yr(5,n,n.return));break;case 1:$n(s,n),Xn(n),l&512&&(en||a===null||cs(a,a.return)),l&64&&Vs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Hi;if($n(s,n),Xn(n),l&512&&(en||a===null||cs(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Hn]||d[Ae]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Cn(d,l,a),d[Ae]=n,Xe(d),l=d;break t;case"link":var y=A0("link","href",f).get(l+(a.href||""));if(y){for(var x=0;x<y.length;x++)if(d=y[x],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(x,1);break e}}d=f.createElement(l),Cn(d,l,a),f.head.appendChild(d);break;case"meta":if(y=A0("meta","content",f).get(l+(a.content||""))){for(x=0;x<y.length;x++)if(d=y[x],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(x,1);break e}}d=f.createElement(l),Cn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ae]=n,Xe(d),l=d}n.stateNode=l}else C0(f,n.type,n.stateNode);else n.stateNode=x0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?C0(f,n.type,n.stateNode):x0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&ip(n,n.memoizedProps,a.memoizedProps)}break;case 27:$n(s,n),Xn(n),l&512&&(en||a===null||cs(a,a.return)),a!==null&&l&4&&ip(n,n.memoizedProps,a.memoizedProps);break;case 5:if($n(s,n),Xn(n),l&512&&(en||a===null||cs(a,a.return)),n.flags&32){f=n.stateNode;try{Qn(f,"")}catch(mt){pe(n,n.return,mt)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,ip(n,f,a!==null?a.memoizedProps:f)),l&1024&&(ap=!0);break;case 6:if($n(s,n),Xn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(mt){pe(n,n.return,mt)}}break;case 3:if(_h=null,f=Hi,Hi=mh(s.containerInfo),$n(s,n),Hi=f,Xn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Mo(s.containerInfo)}catch(mt){pe(n,n.return,mt)}ap&&(ap=!1,Cv(n));break;case 4:l=Hi,Hi=mh(n.stateNode.containerInfo),$n(s,n),Xn(n),Hi=l;break;case 12:$n(s,n),Xn(n);break;case 31:$n(s,n),Xn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,eh(n,l)));break;case 13:$n(s,n),Xn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ih=pn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,eh(n,l)));break;case 22:f=n.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=Vs,X=en;if(Vs=q||f,en=X||D,$n(s,n),en=X,Vs=q,Xn(n),l&8192)t:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||D||Vs||en||Sa(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(d=D.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{x=D.stateNode;var Z=D.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;x.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(mt){pe(D,D.return,mt)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(mt){pe(D,D.return,mt)}}}else if(s.tag===18){if(a===null){D=s;try{var Y=D.stateNode;f?m0(Y,!0):m0(D.stateNode,!1)}catch(mt){pe(D,D.return,mt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,eh(n,a))));break;case 19:$n(s,n),Xn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,eh(n,l)));break;case 30:break;case 21:break;default:$n(s,n),Xn(n)}}function Xn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(_v(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=sp(n);th(n,d,f);break;case 5:var y=a.stateNode;a.flags&32&&(Qn(y,""),a.flags&=-33);var x=sp(n);th(n,x,y);break;case 3:case 4:var D=a.stateNode.containerInfo,q=sp(n);rp(n,q,D);break;default:throw Error(r(161))}}catch(X){pe(n,n.return,X)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Cv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Cv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function zs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ev(n,s.alternate,s),s=s.sibling}function Sa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:yr(4,s,s.return),Sa(s);break;case 1:cs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&mv(s,s.return,a),Sa(s);break;case 27:eu(s.stateNode);case 26:case 5:cs(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}n=n.sibling}}function Ps(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,d=s,y=d.flags;switch(d.tag){case 0:case 11:case 15:Ps(f,d,a),Gl(4,d);break;case 1:if(Ps(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){pe(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var x=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)iy(D[f],x)}catch(q){pe(l,l.return,q)}}a&&y&64&&pv(d),Yl(d,d.return);break;case 27:yv(d);case 26:case 5:Ps(f,d,a),a&&l===null&&y&4&&gv(d),Yl(d,d.return);break;case 12:Ps(f,d,a);break;case 31:Ps(f,d,a),a&&y&4&&bv(f,d);break;case 13:Ps(f,d,a),a&&y&4&&xv(f,d);break;case 22:d.memoizedState===null&&Ps(f,d,a),Yl(d,d.return);break;case 30:break;default:Ps(f,d,a)}s=s.sibling}}function op(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ol(a))}function lp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ol(n))}function Gi(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)wv(n,s,a,l),s=s.sibling}function wv(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Gi(n,s,a,l),f&2048&&Gl(9,s);break;case 1:Gi(n,s,a,l);break;case 3:Gi(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ol(n)));break;case 12:if(f&2048){Gi(n,s,a,l),n=s.stateNode;try{var d=s.memoizedProps,y=d.id,x=d.onPostCommit;typeof x=="function"&&x(y,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){pe(s,s.return,D)}}else Gi(n,s,a,l);break;case 31:Gi(n,s,a,l);break;case 13:Gi(n,s,a,l);break;case 23:break;case 22:d=s.stateNode,y=s.alternate,s.memoizedState!==null?d._visibility&2?Gi(n,s,a,l):Ql(n,s):d._visibility&2?Gi(n,s,a,l):(d._visibility|=2,So(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&op(y,s);break;case 24:Gi(n,s,a,l),f&2048&&lp(s.alternate,s);break;default:Gi(n,s,a,l)}}function So(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,y=s,x=a,D=l,q=y.flags;switch(y.tag){case 0:case 11:case 15:So(d,y,x,D,f),Gl(8,y);break;case 23:break;case 22:var X=y.stateNode;y.memoizedState!==null?X._visibility&2?So(d,y,x,D,f):Ql(d,y):(X._visibility|=2,So(d,y,x,D,f)),f&&q&2048&&op(y.alternate,y);break;case 24:So(d,y,x,D,f),f&&q&2048&&lp(y.alternate,y);break;default:So(d,y,x,D,f)}s=s.sibling}}function Ql(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Ql(a,l),f&2048&&op(l.alternate,l);break;case 24:Ql(a,l),f&2048&&lp(l.alternate,l);break;default:Ql(a,l)}s=s.sibling}}var Kl=8192;function bo(n,s,a){if(n.subtreeFlags&Kl)for(n=n.child;n!==null;)Rv(n,s,a),n=n.sibling}function Rv(n,s,a){switch(n.tag){case 26:bo(n,s,a),n.flags&Kl&&n.memoizedState!==null&&MA(a,Hi,n.memoizedState,n.memoizedProps);break;case 5:bo(n,s,a);break;case 3:case 4:var l=Hi;Hi=mh(n.stateNode.containerInfo),bo(n,s,a),Hi=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Kl,Kl=16777216,bo(n,s,a),Kl=l):bo(n,s,a));break;default:bo(n,s,a)}}function Iv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function $l(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];_n=l,Nv(l,n)}Iv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Dv(n),n=n.sibling}function Dv(n){switch(n.tag){case 0:case 11:case 15:$l(n),n.flags&2048&&yr(9,n,n.return);break;case 3:$l(n);break;case 12:$l(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,nh(n)):$l(n);break;default:$l(n)}}function nh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];_n=l,Nv(l,n)}Iv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:yr(8,s,s.return),nh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,nh(s));break;default:nh(s)}n=n.sibling}}function Nv(n,s){for(;_n!==null;){var a=_n;switch(a.tag){case 0:case 11:case 15:yr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,_n=l;else t:for(a=n;_n!==null;){l=_n;var f=l.sibling,d=l.return;if(Tv(l),l===a){_n=null;break t}if(f!==null){f.return=d,_n=f;break t}_n=d}}}var Kx={getCacheForType:function(n){var s=xn(Je),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return xn(Je).controller.signal}},$x=typeof WeakMap=="function"?WeakMap:Map,oe=0,Ee=null,Ft=null,Yt=0,de=0,hi=null,vr=!1,xo=!1,up=!1,js=0,ze=0,Er=0,ba=0,cp=0,fi=0,Ao=0,Xl=null,Wn=null,hp=!1,ih=0,Ov=0,sh=1/0,rh=null,Tr=null,ln=0,Sr=null,Co=null,Us=0,fp=0,dp=null,Mv=null,Wl=0,pp=null;function di(){return(oe&2)!==0&&Yt!==0?Yt&-Yt:$.T!==null?Ep():Mn()}function kv(){if(fi===0)if((Yt&536870912)===0||Wt){var n=yt;yt<<=1,(yt&3932160)===0&&(yt=262144),fi=n}else fi=536870912;return n=ui.current,n!==null&&(n.flags|=32),fi}function Jn(n,s,a){(n===Ee&&(de===2||de===9)||n.cancelPendingCommit!==null)&&(wo(n,0),br(n,Yt,fi,!1)),he(n,a),((oe&2)===0||n!==Ee)&&(n===Ee&&((oe&2)===0&&(ba|=a),ze===4&&br(n,Yt,fi,!1)),hs(n))}function Vv(n,s,a){if((oe&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Ct(n,s),f=l?Jx(n,s):gp(n,s,!0),d=l;do{if(f===0){xo&&!l&&br(n,s,0,!1);break}else{if(a=n.current.alternate,d&&!Xx(a)){f=gp(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var y=0;else y=n.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;t:{var x=n;f=Xl;var D=x.current.memoizedState.isDehydrated;if(D&&(wo(x,y).flags|=256),y=gp(x,y,!1),y!==2){if(up&&!D){x.errorRecoveryDisabledLanes|=d,ba|=d,f=4;break t}d=Wn,Wn=f,d!==null&&(Wn===null?Wn=d:Wn.push.apply(Wn,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){wo(n,0),br(n,s,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:br(l,s,fi,!vr);break t;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=ih+300-pn(),10<f)){if(br(l,s,fi,!vr),K(l,0,!0)!==0)break t;Us=s,l.timeoutHandle=f0(Lv.bind(null,l,a,Wn,rh,hp,s,fi,ba,Ao,vr,d,"Throttled",-0,0),f);break t}Lv(l,a,Wn,rh,hp,s,fi,ba,Ao,vr,d,null,-0,0)}}break}while(!0);hs(n)}function Lv(n,s,a,l,f,d,y,x,D,q,X,Z,H,Y){if(n.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},Rv(s,d,Z);var mt=(d&62914560)===d?ih-pn():(d&4194048)===d?Ov-pn():0;if(mt=kA(Z,mt),mt!==null){Us=d,n.cancelPendingCommit=mt(Hv.bind(null,n,s,d,a,l,f,y,x,D,X,Z,null,H,Y)),br(n,d,y,!q);return}}Hv(n,s,d,a,l,f,y,x,D)}function Xx(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!oi(d(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function br(n,s,a,l){s&=~cp,s&=~ba,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var d=31-ke(f),y=1<<d;l[d]=-1,f&=~y}a!==0&&On(n,a,s)}function ah(){return(oe&6)===0?(Jl(0),!1):!0}function mp(){if(Ft!==null){if(de===0)var n=Ft.return;else n=Ft,Is=pa=null,Nd(n),_o=null,kl=0,n=Ft;for(;n!==null;)dv(n.alternate,n),n=n.return;Ft=null}}function wo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,gA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Us=0,mp(),Ee=n,Ft=a=ws(n.current,null),Yt=s,de=0,hi=null,vr=!1,xo=Ct(n,s),up=!1,Ao=fi=cp=ba=Er=ze=0,Wn=Xl=null,hp=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-ke(l),d=1<<f;s|=n[f],l&=~d}return js=s,wc(),a}function zv(n,s){Pt=null,$.H=Fl,s===go||s===Vc?(s=Z_(),de=3):s===vd?(s=Z_(),de=4):de=s===Qd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,hi=s,Ft===null&&(ze=1,$c(n,bi(s,n.current)))}function Pv(){var n=ui.current;return n===null?!0:(Yt&4194048)===Yt?wi===null:(Yt&62914560)===Yt||(Yt&536870912)!==0?n===wi:!1}function jv(){var n=$.H;return $.H=Fl,n===null?Fl:n}function Uv(){var n=$.A;return $.A=Kx,n}function oh(){ze=4,vr||(Yt&4194048)!==Yt&&ui.current!==null||(xo=!0),(Er&134217727)===0&&(ba&134217727)===0||Ee===null||br(Ee,Yt,fi,!1)}function gp(n,s,a){var l=oe;oe|=2;var f=jv(),d=Uv();(Ee!==n||Yt!==s)&&(rh=null,wo(n,s)),s=!1;var y=ze;t:do try{if(de!==0&&Ft!==null){var x=Ft,D=hi;switch(de){case 8:mp(),y=6;break t;case 3:case 2:case 9:case 6:ui.current===null&&(s=!0);var q=de;if(de=0,hi=null,Ro(n,x,D,q),a&&xo){y=0;break t}break;default:q=de,de=0,hi=null,Ro(n,x,D,q)}}Wx(),y=ze;break}catch(X){zv(n,X)}while(!0);return s&&n.shellSuspendCounter++,Is=pa=null,oe=l,$.H=f,$.A=d,Ft===null&&(Ee=null,Yt=0,wc()),y}function Wx(){for(;Ft!==null;)Bv(Ft)}function Jx(n,s){var a=oe;oe|=2;var l=jv(),f=Uv();Ee!==n||Yt!==s?(rh=null,sh=pn()+500,wo(n,s)):xo=Ct(n,s);t:do try{if(de!==0&&Ft!==null){s=Ft;var d=hi;e:switch(de){case 1:de=0,hi=null,Ro(n,s,d,1);break;case 2:case 9:if(W_(d)){de=0,hi=null,Fv(s);break}s=function(){de!==2&&de!==9||Ee!==n||(de=7),hs(n)},d.then(s,s);break t;case 3:de=7;break t;case 4:de=5;break t;case 7:W_(d)?(de=0,hi=null,Fv(s)):(de=0,hi=null,Ro(n,s,d,7));break;case 5:var y=null;switch(Ft.tag){case 26:y=Ft.memoizedState;case 5:case 27:var x=Ft;if(y?w0(y):x.stateNode.complete){de=0,hi=null;var D=x.sibling;if(D!==null)Ft=D;else{var q=x.return;q!==null?(Ft=q,lh(q)):Ft=null}break e}}de=0,hi=null,Ro(n,s,d,5);break;case 6:de=0,hi=null,Ro(n,s,d,6);break;case 8:mp(),ze=6;break t;default:throw Error(r(462))}}Zx();break}catch(X){zv(n,X)}while(!0);return Is=pa=null,$.H=l,$.A=f,oe=a,Ft!==null?0:(Ee=null,Yt=0,wc(),ze)}function Zx(){for(;Ft!==null&&!ul();)Bv(Ft)}function Bv(n){var s=hv(n.alternate,n,js);n.memoizedProps=n.pendingProps,s===null?lh(n):Ft=s}function Fv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=rv(a,s,s.pendingProps,s.type,void 0,Yt);break;case 11:s=rv(a,s,s.pendingProps,s.type.render,s.ref,Yt);break;case 5:Nd(s);default:dv(a,s),s=Ft=U_(s,js),s=hv(a,s,js)}n.memoizedProps=n.pendingProps,s===null?lh(n):Ft=s}function Ro(n,s,a,l){Is=pa=null,Nd(s),_o=null,kl=0;var f=s.return;try{if(Bx(n,f,s,a,Yt)){ze=1,$c(n,bi(a,n.current)),Ft=null;return}}catch(d){if(f!==null)throw Ft=f,d;ze=1,$c(n,bi(a,n.current)),Ft=null;return}s.flags&32768?(Wt||l===1?n=!0:xo||(Yt&536870912)!==0?n=!1:(vr=n=!0,(l===2||l===9||l===3||l===6)&&(l=ui.current,l!==null&&l.tag===13&&(l.flags|=16384))),qv(s,n)):lh(s)}function lh(n){var s=n;do{if((s.flags&32768)!==0){qv(s,vr);return}n=s.return;var a=Hx(s.alternate,s,js);if(a!==null){Ft=a;return}if(s=s.sibling,s!==null){Ft=s;return}Ft=s=n}while(s!==null);ze===0&&(ze=5)}function qv(n,s){do{var a=Gx(n.alternate,n);if(a!==null){a.flags&=32767,Ft=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Ft=n;return}Ft=n=a}while(n!==null);ze=6,Ft=null}function Hv(n,s,a,l,f,d,y,x,D){n.cancelPendingCommit=null;do uh();while(ln!==0);if((oe&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=sd,on(n,a,d,y,x,D),n===Ee&&(Ft=Ee=null,Yt=0),Co=s,Sr=n,Us=a,fp=d,dp=f,Mv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,iA(Vi,function(){return $v(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,f=ct.p,ct.p=2,y=oe,oe|=4;try{Yx(n,s,a)}finally{oe=y,ct.p=f,$.T=l}}ln=1,Gv(),Yv(),Qv()}}function Gv(){if(ln===1){ln=0;var n=Sr,s=Co,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=ct.p;ct.p=2;var f=oe;oe|=4;try{Av(s,n);var d=Rp,y=N_(n.containerInfo),x=d.focusedElem,D=d.selectionRange;if(y!==x&&x&&x.ownerDocument&&D_(x.ownerDocument.documentElement,x)){if(D!==null&&Zf(x)){var q=D.start,X=D.end;if(X===void 0&&(X=q),"selectionStart"in x)x.selectionStart=q,x.selectionEnd=Math.min(X,x.value.length);else{var Z=x.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var Y=H.getSelection(),mt=x.textContent.length,xt=Math.min(D.start,mt),ve=D.end===void 0?xt:Math.min(D.end,mt);!Y.extend&&xt>ve&&(y=ve,ve=xt,xt=y);var j=I_(x,xt),M=I_(x,ve);if(j&&M&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var F=Z.createRange();F.setStart(j.node,j.offset),Y.removeAllRanges(),xt>ve?(Y.addRange(F),Y.extend(M.node,M.offset)):(F.setEnd(M.node,M.offset),Y.addRange(F))}}}}for(Z=[],Y=x;Y=Y.parentNode;)Y.nodeType===1&&Z.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Z.length;x++){var J=Z[x];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Th=!!wp,Rp=wp=null}finally{oe=f,ct.p=l,$.T=a}}n.current=s,ln=2}}function Yv(){if(ln===2){ln=0;var n=Sr,s=Co,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=ct.p;ct.p=2;var f=oe;oe|=4;try{Ev(n,s.alternate,s)}finally{oe=f,ct.p=l,$.T=a}}ln=3}}function Qv(){if(ln===4||ln===3){ln=0,Ha();var n=Sr,s=Co,a=Us,l=Mv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ln=5:(ln=0,Co=Sr=null,Kv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Tr=null),Se(a),s=s.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(si,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=$.T,f=ct.p,ct.p=2,$.T=null;try{for(var d=n.onRecoverableError,y=0;y<l.length;y++){var x=l[y];d(x.value,{componentStack:x.stack})}}finally{$.T=s,ct.p=f}}(Us&3)!==0&&uh(),hs(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===pp?Wl++:(Wl=0,pp=n):Wl=0,Jl(0)}}function Kv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ol(s)))}function uh(){return Gv(),Yv(),Qv(),$v()}function $v(){if(ln!==5)return!1;var n=Sr,s=fp;fp=0;var a=Se(Us),l=$.T,f=ct.p;try{ct.p=32>a?32:a,$.T=null,a=dp,dp=null;var d=Sr,y=Us;if(ln=0,Co=Sr=null,Us=0,(oe&6)!==0)throw Error(r(331));var x=oe;if(oe|=4,Dv(d.current),wv(d,d.current,y,a),oe=x,Jl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(si,d)}catch{}return!0}finally{ct.p=f,$.T=l,Kv(n,s)}}function Xv(n,s,a){s=bi(a,s),s=Yd(n.stateNode,s,2),n=mr(n,s,2),n!==null&&(he(n,2),hs(n))}function pe(n,s,a){if(n.tag===3)Xv(n,n,a);else for(;s!==null;){if(s.tag===3){Xv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Tr===null||!Tr.has(l))){n=bi(a,n),a=Wy(2),l=mr(s,a,2),l!==null&&(Jy(a,l,s,n),he(l,2),hs(l));break}}s=s.return}}function _p(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new $x;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(up=!0,f.add(a),n=tA.bind(null,n,s,a),s.then(n,n))}function tA(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Ee===n&&(Yt&a)===a&&(ze===4||ze===3&&(Yt&62914560)===Yt&&300>pn()-ih?(oe&2)===0&&wo(n,0):cp|=a,Ao===Yt&&(Ao=0)),hs(n)}function Wv(n,s){s===0&&(s=le()),n=ha(n,s),n!==null&&(he(n,s),hs(n))}function eA(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Wv(n,a)}function nA(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Wv(n,a)}function iA(n,s){return Ue(n,s)}var ch=null,Io=null,yp=!1,hh=!1,vp=!1,xr=0;function hs(n){n!==Io&&n.next===null&&(Io===null?ch=Io=n:Io=Io.next=n),hh=!0,yp||(yp=!0,rA())}function Jl(n,s){if(!vp&&hh){vp=!0;do for(var a=!1,l=ch;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var y=l.suspendedLanes,x=l.pingedLanes;d=(1<<31-ke(42|n)+1)-1,d&=f&~(y&~x),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,e0(l,d))}else d=Yt,d=K(l,l===Ee?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Ct(l,d)||(a=!0,e0(l,d));l=l.next}while(a);vp=!1}}function sA(){Jv()}function Jv(){hh=yp=!1;var n=0;xr!==0&&mA()&&(n=xr);for(var s=pn(),a=null,l=ch;l!==null;){var f=l.next,d=Zv(l,s);d===0?(l.next=null,a===null?ch=f:a.next=f,f===null&&(Io=a)):(a=l,(n!==0||(d&3)!==0)&&(hh=!0)),l=f}ln!==0&&ln!==5||Jl(n),xr!==0&&(xr=0)}function Zv(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var y=31-ke(d),x=1<<y,D=f[y];D===-1?((x&a)===0||(x&l)!==0)&&(f[y]=wt(x,s)):D<=s&&(n.expiredLanes|=x),d&=~x}if(s=Ee,a=Yt,a=K(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(de===2||de===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&ki(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ct(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&ki(l),Se(a)){case 2:case 8:a=Zr;break;case 32:a=Vi;break;case 268435456:a=Ga;break;default:a=Vi}return l=t0.bind(null,n),a=Ue(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&ki(l),n.callbackPriority=2,n.callbackNode=null,2}function t0(n,s){if(ln!==0&&ln!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(uh()&&n.callbackNode!==a)return null;var l=Yt;return l=K(n,n===Ee?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Vv(n,l,s),Zv(n,pn()),n.callbackNode!=null&&n.callbackNode===a?t0.bind(null,n):null)}function e0(n,s){if(uh())return null;Vv(n,s,!0)}function rA(){_A(function(){(oe&6)!==0?Ue(Zs,sA):Jv()})}function Ep(){if(xr===0){var n=po;n===0&&(n=it,it<<=1,(it&261888)===0&&(it=256)),xr=n}return xr}function n0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ja(""+n)}function i0(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function aA(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var d=n0((f[Qe]||null).action),y=l.submitter;y&&(s=(s=y[Qe]||null)?n0(s.formAction):y.getAttribute("formAction"),s!==null&&(d=s,y=null));var x=new ss("action","action",null,l,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xr!==0){var D=y?i0(f,y):new FormData(f);Ud(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(x.preventDefault(),D=y?i0(f,y):new FormData(f),Ud(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var Tp=0;Tp<id.length;Tp++){var Sp=id[Tp],oA=Sp.toLowerCase(),lA=Sp[0].toUpperCase()+Sp.slice(1);qi(oA,"on"+lA)}qi(k_,"onAnimationEnd"),qi(V_,"onAnimationIteration"),qi(L_,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(xx,"onTransitionRun"),qi(Ax,"onTransitionStart"),qi(Cx,"onTransitionCancel"),qi(z_,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function s0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var y=l.length-1;0<=y;y--){var x=l[y],D=x.instance,q=x.currentTarget;if(x=x.listener,D!==d&&f.isPropagationStopped())break t;d=x,f.currentTarget=q;try{d(f)}catch(X){Cc(X)}f.currentTarget=null,d=D}else for(y=0;y<l.length;y++){if(x=l[y],D=x.instance,q=x.currentTarget,x=x.listener,D!==d&&f.isPropagationStopped())break t;d=x,f.currentTarget=q;try{d(f)}catch(X){Cc(X)}f.currentTarget=null,d=D}}}}function qt(n,s){var a=s[Rt];a===void 0&&(a=s[Rt]=new Set);var l=n+"__bubble";a.has(l)||(r0(s,n,2,!1),a.add(l))}function bp(n,s,a){var l=0;s&&(l|=4),r0(a,n,l,s)}var fh="_reactListening"+Math.random().toString(36).slice(2);function xp(n){if(!n[fh]){n[fh]=!0,hl.forEach(function(a){a!=="selectionchange"&&(uA.has(a)||bp(a,!1,n),bp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[fh]||(s[fh]=!0,bp("selectionchange",!1,s))}}function r0(n,s,a,l){switch(k0(s)){case 2:var f=zA;break;case 8:f=PA;break;default:f=jp}a=f.bind(null,s,a,n),f=void 0,!ia||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Ap(n,s,a,l,f){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var x=l.stateNode.containerInfo;if(x===f)break;if(y===4)for(y=l.return;y!==null;){var D=y.tag;if((D===3||D===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;x!==null;){if(y=$e(x),y===null)return;if(D=y.tag,D===5||D===6||D===26||D===27){l=d=y;continue t}x=x.parentNode}}l=l.return}rr(function(){var q=d,X=vi(a),Z=[];t:{var H=P_.get(n);if(H!==void 0){var Y=ss,mt=n;switch(n){case"keypress":if(ra(a)===0)break t;case"keydown":case"keyup":Y=bc;break;case"focusin":mt="focus",Y=oa;break;case"focusout":mt="blur",Y=oa;break;case"beforeblur":case"afterblur":Y=oa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=_;break;case k_:case V_:case L_:Y=gc;break;case z_:Y=A;break;case"scroll":case"scrollend":Y=bl;break;case"wheel":Y=G;break;case"copy":case"cut":case"paste":Y=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Cs;break;case"toggle":case"beforetoggle":Y=zt}var xt=(s&4)!==0,ve=!xt&&(n==="scroll"||n==="scrollend"),j=xt?H!==null?H+"Capture":null:H;xt=[];for(var M=q,F;M!==null;){var J=M;if(F=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||F===null||j===null||(J=ji(M,j),J!=null&&xt.push(tu(M,J,F))),ve)break;M=M.return}0<xt.length&&(H=new Y(H,mt,null,a,X),Z.push({event:H,listeners:xt}))}}if((s&7)===0){t:{if(H=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",H&&a!==El&&(mt=a.relatedTarget||a.fromElement)&&($e(mt)||mt[_i]))break t;if((Y||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(mt=a.relatedTarget||a.toElement,Y=q,mt=mt?$e(mt):null,mt!==null&&(ve=u(mt),xt=mt.tag,mt!==ve||xt!==5&&xt!==27&&xt!==6)&&(mt=null)):(Y=null,mt=q),Y!==mt)){if(xt=xl,J="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(xt=Cs,J="onPointerLeave",j="onPointerEnter",M="pointer"),ve=Y==null?H:ri(Y),F=mt==null?H:ri(mt),H=new xt(J,M+"leave",Y,a,X),H.target=ve,H.relatedTarget=F,J=null,$e(X)===q&&(xt=new xt(j,M+"enter",mt,a,X),xt.target=F,xt.relatedTarget=ve,J=xt),ve=J,Y&&mt)e:{for(xt=cA,j=Y,M=mt,F=0,J=j;J;J=xt(J))F++;J=0;for(var Tt=M;Tt;Tt=xt(Tt))J++;for(;0<F-J;)j=xt(j),F--;for(;0<J-F;)M=xt(M),J--;for(;F--;){if(j===M||M!==null&&j===M.alternate){xt=j;break e}j=xt(j),M=xt(M)}xt=null}else xt=null;Y!==null&&a0(Z,H,Y,xt,!1),mt!==null&&ve!==null&&a0(Z,ve,mt,xt,!0)}}t:{if(H=q?ri(q):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var ie=b_;else if(T_(H))if(x_)ie=Tx;else{ie=vx;var gt=yx}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Wa(q.elementType)&&(ie=b_):ie=Ex;if(ie&&(ie=ie(n,q))){S_(Z,ie,a,X);break t}gt&&gt(n,H,q),n==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&_l(H,"number",H.value)}switch(gt=q?ri(q):window,n){case"focusin":(T_(gt)||gt.contentEditable==="true")&&(ro=gt,td=q,Il=null);break;case"focusout":Il=td=ro=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,O_(Z,a,X);break;case"selectionchange":if(bx)break;case"keydown":case"keyup":O_(Z,a,X)}var Ut;if(ae)t:{switch(n){case"compositionstart":var Qt="onCompositionStart";break t;case"compositionend":Qt="onCompositionEnd";break t;case"compositionupdate":Qt="onCompositionUpdate";break t}Qt=void 0}else so?la(n,a)&&(Qt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Qt="onCompositionStart");Qt&&(os&&a.locale!=="ko"&&(so||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&so&&(Ut=Sl()):(is=X,Tl="value"in is?is.value:is.textContent,so=!0)),gt=dh(q,Qt),0<gt.length&&(Qt=new as(Qt,n,null,a,X),Z.push({event:Qt,listeners:gt}),Ut?Qt.data=Ut:(Ut=io(a),Ut!==null&&(Qt.data=Ut)))),(Ut=Ti?px(n,a):mx(n,a))&&(Qt=dh(q,"onBeforeInput"),0<Qt.length&&(gt=new as("onBeforeInput","beforeinput",null,a,X),Z.push({event:gt,listeners:Qt}),gt.data=Ut)),aA(Z,n,q,a,X)}s0(Z,s)})}function tu(n,s,a){return{instance:n,listener:s,currentTarget:a}}function dh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ji(n,a),f!=null&&l.unshift(tu(n,f,d)),f=ji(n,s),f!=null&&l.push(tu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function cA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function a0(n,s,a,l,f){for(var d=s._reactName,y=[];a!==null&&a!==l;){var x=a,D=x.alternate,q=x.stateNode;if(x=x.tag,D!==null&&D===l)break;x!==5&&x!==26&&x!==27||q===null||(D=q,f?(q=ji(a,d),q!=null&&y.unshift(tu(a,q,D))):f||(q=ji(a,d),q!=null&&y.push(tu(a,q,D)))),a=a.return}y.length!==0&&n.push({event:s,listeners:y})}var hA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function o0(n){return(typeof n=="string"?n:""+n).replace(hA,`
`).replace(fA,"")}function l0(n,s){return s=o0(s),o0(n)===s}function ye(n,s,a,l,f,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Qn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Qn(n,""+l);break;case"className":ai(n,"class",l);break;case"tabIndex":ai(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(n,a,l);break;case"style":vl(n,l,d);break;case"data":if(s!=="object"){ai(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ja(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&ye(n,s,"name",f.name,f,null),ye(n,s,"formEncType",f.formEncType,f,null),ye(n,s,"formMethod",f.formMethod,f,null),ye(n,s,"formTarget",f.formTarget,f,null)):(ye(n,s,"encType",f.encType,f,null),ye(n,s,"method",f.method,f,null),ye(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ja(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Pi);break;case"onScroll":l!=null&&qt("scroll",n);break;case"onScrollEnd":l!=null&&qt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ja(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":qt("beforetoggle",n),qt("toggle",n),$a(n,"popover",l);break;case"xlinkActuate":We(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":We(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":We(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":We(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":We(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":We(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":We(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":We(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":We(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$a(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=dc.get(a)||a,$a(n,a,l))}}function Cp(n,s,a,l,f,d){switch(a){case"style":vl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Qn(n,l):(typeof l=="number"||typeof l=="bigint")&&Qn(n,""+l);break;case"onScroll":l!=null&&qt("scroll",n);break;case"onScrollEnd":l!=null&&qt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),d=n[Qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):$a(n,a,l)}}}function Cn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",n),qt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ye(n,s,d,y,a,null)}}f&&ye(n,s,"srcSet",a.srcSet,a,null),l&&ye(n,s,"src",a.src,a,null);return;case"input":qt("invalid",n);var x=d=y=f=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":f=X;break;case"type":y=X;break;case"checked":D=X;break;case"defaultChecked":q=X;break;case"value":d=X;break;case"defaultValue":x=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:ye(n,s,l,X,a,null)}}cc(n,d,x,D,q,y,f,!1);return;case"select":qt("invalid",n),l=y=d=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":d=x;break;case"defaultValue":y=x;break;case"multiple":l=x;default:ye(n,s,f,x,a,null)}s=d,a=y,n.multiple=!!l,s!=null?er(n,!!l,s,!1):a!=null&&er(n,!!l,a,!0);return;case"textarea":qt("invalid",n),d=f=l=null;for(y in a)if(a.hasOwnProperty(y)&&(x=a[y],x!=null))switch(y){case"value":l=x;break;case"defaultValue":f=x;break;case"children":d=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:ye(n,s,y,x,a,null)}nr(n,l,f,d);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ye(n,s,D,l,a,null)}return;case"dialog":qt("beforetoggle",n),qt("toggle",n),qt("cancel",n),qt("close",n);break;case"iframe":case"object":qt("load",n);break;case"video":case"audio":for(l=0;l<Zl.length;l++)qt(Zl[l],n);break;case"image":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"embed":case"source":case"link":qt("error",n),qt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ye(n,s,q,l,a,null)}return;default:if(Wa(s)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Cp(n,s,X,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&ye(n,s,x,l,a,null))}function dA(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,x=null,D=null,q=null,X=null;for(Y in a){var Z=a[Y];if(a.hasOwnProperty(Y)&&Z!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=Z;default:l.hasOwnProperty(Y)||ye(n,s,Y,null,l,Z)}}for(var H in l){var Y=l[H];if(Z=a[H],l.hasOwnProperty(H)&&(Y!=null||Z!=null))switch(H){case"type":d=Y;break;case"name":f=Y;break;case"checked":q=Y;break;case"defaultChecked":X=Y;break;case"value":y=Y;break;case"defaultValue":x=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:Y!==Z&&ye(n,s,H,Y,l,Z)}}Xa(n,y,x,D,q,X,d,f);return;case"select":Y=y=x=H=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(d)||ye(n,s,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":H=d;break;case"defaultValue":x=d;break;case"multiple":y=d;default:d!==D&&ye(n,s,f,d,l,D)}s=x,a=y,l=Y,H!=null?er(n,!!a,H,!1):!!l!=!!a&&(s!=null?er(n,!!a,s,!0):er(n,!!a,a?[]:"",!1));return;case"textarea":Y=H=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ye(n,s,x,null,l,f)}for(y in l)if(f=l[y],d=a[y],l.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":H=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ye(n,s,y,f,l,d)}hc(n,H,Y);return;case"option":for(var mt in a)if(H=a[mt],a.hasOwnProperty(mt)&&H!=null&&!l.hasOwnProperty(mt))switch(mt){case"selected":n.selected=!1;break;default:ye(n,s,mt,null,l,H)}for(D in l)if(H=l[D],Y=a[D],l.hasOwnProperty(D)&&H!==Y&&(H!=null||Y!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ye(n,s,D,H,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in a)H=a[xt],a.hasOwnProperty(xt)&&H!=null&&!l.hasOwnProperty(xt)&&ye(n,s,xt,null,l,H);for(q in l)if(H=l[q],Y=a[q],l.hasOwnProperty(q)&&H!==Y&&(H!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,s));break;default:ye(n,s,q,H,l,Y)}return;default:if(Wa(s)){for(var ve in a)H=a[ve],a.hasOwnProperty(ve)&&H!==void 0&&!l.hasOwnProperty(ve)&&Cp(n,s,ve,void 0,l,H);for(X in l)H=l[X],Y=a[X],!l.hasOwnProperty(X)||H===Y||H===void 0&&Y===void 0||Cp(n,s,X,H,l,Y);return}}for(var j in a)H=a[j],a.hasOwnProperty(j)&&H!=null&&!l.hasOwnProperty(j)&&ye(n,s,j,null,l,H);for(Z in l)H=l[Z],Y=a[Z],!l.hasOwnProperty(Z)||H===Y||H==null&&Y==null||ye(n,s,Z,H,l,Y)}function u0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,y=f.initiatorType,x=f.duration;if(d&&x&&u0(y)){for(y=0,x=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>x)break;var X=D.transferSize,Z=D.initiatorType;X&&u0(Z)&&(D=D.responseEnd,y+=X*(D<x?1:(x-q)/(D-q)))}if(--l,s+=8*(d+y)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var wp=null,Rp=null;function ph(n){return n.nodeType===9?n:n.ownerDocument}function c0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ip(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dp=null;function mA(){var n=window.event;return n&&n.type==="popstate"?n===Dp?!1:(Dp=n,!0):(Dp=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,gA=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,_A=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(n){return d0.resolve(null).then(n).catch(yA)}:f0;function yA(n){setTimeout(function(){throw n})}function Ar(n){return n==="head"}function p0(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Mo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")eu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,eu(a);for(var d=a.firstChild;d;){var y=d.nextSibling,x=d.nodeName;d[Hn]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&eu(n.ownerDocument.body);a=f}while(a);Mo(s)}function m0(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Np(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Np(a),yi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function vA(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Hn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Ri(n.nextSibling),n===null)break}return null}function EA(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ri(n.nextSibling),n===null))return null;return n}function g0(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ri(n.nextSibling),n===null))return null;return n}function Op(n){return n.data==="$?"||n.data==="$~"}function Mp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function TA(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ri(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var kp=null;function _0(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ri(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function y0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function v0(n,s,a){switch(s=ph(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function eu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);yi(n)}var Ii=new Map,E0=new Set;function mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bs=ct.d;ct.d={f:SA,r:bA,D:xA,C:AA,L:CA,m:wA,X:IA,S:RA,M:DA};function SA(){var n=Bs.f(),s=ah();return n||s}function bA(n){var s=Gn(n);s!==null&&s.tag===5&&s.type==="form"?zy(s):Bs.r(n)}var Do=typeof document>"u"?null:document;function T0(n,s,a){var l=Do;if(l&&typeof s=="string"&&s){var f=Yn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),E0.has(f)||(E0.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Cn(s,"link",n),Xe(s),l.head.appendChild(s)))}}function xA(n){Bs.D(n),T0("dns-prefetch",n,null)}function AA(n,s){Bs.C(n,s),T0("preconnect",n,s)}function CA(n,s,a){Bs.L(n,s,a);var l=Do;if(l&&n&&s){var f='link[rel="preload"][as="'+Yn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Yn(a.imageSizes)+'"]')):f+='[href="'+Yn(n)+'"]';var d=f;switch(s){case"style":d=No(n);break;case"script":d=Oo(n)}Ii.has(d)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Ii.set(d,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(nu(d))||s==="script"&&l.querySelector(iu(d))||(s=l.createElement("link"),Cn(s,"link",n),Xe(s),l.head.appendChild(s)))}}function wA(n,s){Bs.m(n,s);var a=Do;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Yn(l)+'"][href="'+Yn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Oo(n)}if(!Ii.has(d)&&(n=E({rel:"modulepreload",href:n},s),Ii.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(iu(d)))return}l=a.createElement("link"),Cn(l,"link",n),Xe(l),a.head.appendChild(l)}}}function RA(n,s,a){Bs.S(n,s,a);var l=Do;if(l&&n){var f=Ji(l).hoistableStyles,d=No(n);s=s||"default";var y=f.get(d);if(!y){var x={loading:0,preload:null};if(y=l.querySelector(nu(d)))x.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Ii.get(d))&&Vp(n,a);var D=y=l.createElement("link");Xe(D),Cn(D,"link",n),D._p=new Promise(function(q,X){D.onload=q,D.onerror=X}),D.addEventListener("load",function(){x.loading|=1}),D.addEventListener("error",function(){x.loading|=2}),x.loading|=4,gh(y,s,l)}y={type:"stylesheet",instance:y,count:1,state:x},f.set(d,y)}}}function IA(n,s){Bs.X(n,s);var a=Do;if(a&&n){var l=Ji(a).hoistableScripts,f=Oo(n),d=l.get(f);d||(d=a.querySelector(iu(f)),d||(n=E({src:n,async:!0},s),(s=Ii.get(f))&&Lp(n,s),d=a.createElement("script"),Xe(d),Cn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function DA(n,s){Bs.M(n,s);var a=Do;if(a&&n){var l=Ji(a).hoistableScripts,f=Oo(n),d=l.get(f);d||(d=a.querySelector(iu(f)),d||(n=E({src:n,async:!0,type:"module"},s),(s=Ii.get(f))&&Lp(n,s),d=a.createElement("script"),Xe(d),Cn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function S0(n,s,a,l){var f=(f=kt.current)?mh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=No(a.href),a=Ji(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=No(a.href);var d=Ji(f).hoistableStyles,y=d.get(n);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,y),(d=f.querySelector(nu(n)))&&!d._p&&(y.instance=d,y.state.loading=5),Ii.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ii.set(n,a),d||NA(f,n,a,y.state))),s&&l===null)throw Error(r(528,""));return y}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Oo(a),a=Ji(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function No(n){return'href="'+Yn(n)+'"'}function nu(n){return'link[rel="stylesheet"]['+n+"]"}function b0(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function NA(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Cn(s,"link",a),Xe(s),n.head.appendChild(s))}function Oo(n){return'[src="'+Yn(n)+'"]'}function iu(n){return"script[async]"+n}function x0(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Yn(a.href)+'"]');if(l)return s.instance=l,Xe(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Xe(l),Cn(l,"style",f),gh(l,a.precedence,n),s.instance=l;case"stylesheet":f=No(a.href);var d=n.querySelector(nu(f));if(d)return s.state.loading|=4,s.instance=d,Xe(d),d;l=b0(a),(f=Ii.get(f))&&Vp(l,f),d=(n.ownerDocument||n).createElement("link"),Xe(d);var y=d;return y._p=new Promise(function(x,D){y.onload=x,y.onerror=D}),Cn(d,"link",l),s.state.loading|=4,gh(d,a.precedence,n),s.instance=d;case"script":return d=Oo(a.src),(f=n.querySelector(iu(d)))?(s.instance=f,Xe(f),f):(l=a,(f=Ii.get(d))&&(l=E({},a),Lp(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Xe(f),Cn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,gh(l,a.precedence,n));return s.instance}function gh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,y=0;y<l.length;y++){var x=l[y];if(x.dataset.precedence===s)d=x;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Vp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Lp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var _h=null;function A0(n,s,a){if(_h===null){var l=new Map,f=_h=new Map;f.set(a,l)}else f=_h,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Hn]||d[Ae]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(s)||"";y=n+y;var x=l.get(y);x?x.push(d):l.set(y,[d])}}return l}function C0(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function OA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function w0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function MA(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=No(l.href),d=s.querySelector(nu(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=yh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=d,Xe(d);return}d=s.ownerDocument||s,l=b0(l),(f=Ii.get(f))&&Vp(l,f),d=d.createElement("link"),Xe(d);var y=d;y._p=new Promise(function(x,D){y.onload=x,y.onerror=D}),Cn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=yh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var zp=0;function kA(n,s){return n.stylesheets&&n.count===0&&Eh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Eh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&zp===0&&(zp=62500*pA());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Eh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>zp?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function yh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var vh=null;function Eh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,vh=new Map,s.forEach(VA,n),vh=null,yh.call(n))}function VA(n,s){if(!(s.state.loading&4)){var a=vh.get(n);if(a)var l=a.get(null);else{a=new Map,vh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}f=s.instance,y=f.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,f),a.set(y,f),this.count++,l=yh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var su={$$typeof:lt,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function LA(n,s,a,l,f,d,y,x,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nt(0),this.hiddenUpdates=nt(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function R0(n,s,a,l,f,d,y,x,D,q,X,Z){return n=new LA(n,s,a,y,D,q,X,Z,x),s=1,d===!0&&(s|=24),d=li(3,null,null,s),n.current=d,d.stateNode=n,s=gd(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Ed(d),n}function I0(n){return n?(n=lo,n):lo}function D0(n,s,a,l,f,d){f=I0(f),l.context===null?l.context=f:l.pendingContext=f,l=pr(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=mr(n,l,s),a!==null&&(Jn(a,n,s),Ll(a,n,s))}function N0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Pp(n,s){N0(n,s),(n=n.alternate)&&N0(n,s)}function O0(n){if(n.tag===13||n.tag===31){var s=ha(n,67108864);s!==null&&Jn(s,n,67108864),Pp(n,67108864)}}function M0(n){if(n.tag===13||n.tag===31){var s=di();s=ne(s);var a=ha(n,s);a!==null&&Jn(a,n,s),Pp(n,s)}}var Th=!0;function zA(n,s,a,l){var f=$.T;$.T=null;var d=ct.p;try{ct.p=2,jp(n,s,a,l)}finally{ct.p=d,$.T=f}}function PA(n,s,a,l){var f=$.T;$.T=null;var d=ct.p;try{ct.p=8,jp(n,s,a,l)}finally{ct.p=d,$.T=f}}function jp(n,s,a,l){if(Th){var f=Up(l);if(f===null)Ap(n,s,l,Sh,a),V0(n,l);else if(UA(f,n,s,a,l))l.stopPropagation();else if(V0(n,l),s&4&&-1<jA.indexOf(n)){for(;f!==null;){var d=Gn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Et(d.pendingLanes);if(y!==0){var x=d;for(x.pendingLanes|=2,x.entangledLanes|=2;y;){var D=1<<31-ke(y);x.entanglements[1]|=D,y&=~D}hs(d),(oe&6)===0&&(sh=pn()+500,Jl(0))}}break;case 31:case 13:x=ha(d,2),x!==null&&Jn(x,d,2),ah(),Pp(d,2)}if(d=Up(l),d===null&&Ap(n,s,l,Sh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Ap(n,s,l,null,a)}}function Up(n){return n=vi(n),Bp(n)}var Sh=null;function Bp(n){if(Sh=null,n=$e(n),n!==null){var s=u(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=p(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Sh=n,null}function k0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case Zs:return 2;case Zr:return 8;case Vi:case cl:return 32;case Ga:return 268435456;default:return 32}default:return 32}}var Fp=!1,Cr=null,wr=null,Rr=null,ru=new Map,au=new Map,Ir=[],jA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V0(n,s){switch(n){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":ru.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(s.pointerId)}}function ou(n,s,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Gn(s),s!==null&&O0(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function UA(n,s,a,l,f){switch(s){case"focusin":return Cr=ou(Cr,n,s,a,l,f),!0;case"dragenter":return wr=ou(wr,n,s,a,l,f),!0;case"mouseover":return Rr=ou(Rr,n,s,a,l,f),!0;case"pointerover":var d=f.pointerId;return ru.set(d,ou(ru.get(d)||null,n,s,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,au.set(d,ou(au.get(d)||null,n,s,a,l,f)),!0}return!1}function L0(n){var s=$e(n.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,Be(n.priority,function(){M0(a)});return}}else if(s===31){if(s=p(a),s!==null){n.blockedOn=s,Be(n.priority,function(){M0(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Up(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);El=l,a.target.dispatchEvent(l),El=null}else return s=Gn(a),s!==null&&O0(s),n.blockedOn=a,!1;s.shift()}return!0}function z0(n,s,a){bh(n)&&a.delete(s)}function BA(){Fp=!1,Cr!==null&&bh(Cr)&&(Cr=null),wr!==null&&bh(wr)&&(wr=null),Rr!==null&&bh(Rr)&&(Rr=null),ru.forEach(z0),au.forEach(z0)}function xh(n,s){n.blockedOn===s&&(n.blockedOn=null,Fp||(Fp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,BA)))}var Ah=null;function P0(n){Ah!==n&&(Ah=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ah===n&&(Ah=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(Bp(l||a)===null)continue;break}var d=Gn(a);d!==null&&(n.splice(s,3),s-=3,Ud(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Mo(n){function s(D){return xh(D,n)}Cr!==null&&xh(Cr,n),wr!==null&&xh(wr,n),Rr!==null&&xh(Rr,n),ru.forEach(s),au.forEach(s);for(var a=0;a<Ir.length;a++){var l=Ir[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ir.length&&(a=Ir[0],a.blockedOn===null);)L0(a),a.blockedOn===null&&Ir.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],y=f[Qe]||null;if(typeof d=="function")y||P0(a);else if(y){var x=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[Qe]||null)x=y.formAction;else if(Bp(f)!==null)continue}else x=y.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),P0(a)}}}function j0(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function qp(n){this._internalRoot=n}Ch.prototype.render=qp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=di();D0(a,l,n,s,null,null)},Ch.prototype.unmount=qp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;D0(n.current,2,null,n,null,null),ah(),s[_i]=null}};function Ch(n){this._internalRoot=n}Ch.prototype.unstable_scheduleHydration=function(n){if(n){var s=Mn();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ir.length&&s!==0&&s<Ir[a].priority;a++);Ir.splice(a,0,n),a===0&&L0(n)}};var U0=t.version;if(U0!=="19.2.1")throw Error(r(527,U0,"19.2.1"));ct.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?S(n):null,n=n===null?null:n.stateNode,n};var FA={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{si=wh.inject(FA),an=wh}catch{}}return uu.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=Qy,d=Ky,y=$y;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=R0(n,1,!1,null,null,a,l,null,f,d,y,j0),n[_i]=s.current,xp(n),new qp(s)},uu.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Qy,y=Ky,x=$y,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),s=R0(n,1,!0,s,a??null,l,f,D,d,y,x,j0),s.context=I0(null),a=s.current,l=di(),l=ne(l),f=pr(l),f.callback=null,mr(a,f,l),a=l,s.current.lanes=a,he(s,a),hs(s),n[_i]=s.current,xp(n),new Ch(s)},uu.version="19.2.1",uu}var X0;function ZA(){if(X0)return Yp.exports;X0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Yp.exports=JA(),Yp.exports}var tC=ZA();const eC=XE(tC);const nC=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iC=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),W0=i=>{const t=iC(i);return t.charAt(0).toUpperCase()+t.slice(1)},WE=(...i)=>i.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),sC=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var rC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const aC=Ot.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...p},m)=>Ot.createElement("svg",{ref:m,...rC,width:t,height:t,stroke:i,strokeWidth:r?Number(e)*24/Number(t):e,className:WE("lucide",o),...!u&&!sC(p)&&{"aria-hidden":"true"},...p},[...c.map(([g,S])=>Ot.createElement(g,S)),...Array.isArray(u)?u:[u]]));const Ne=(i,t)=>{const e=Ot.forwardRef(({className:r,...o},u)=>Ot.createElement(aC,{ref:u,iconNode:t,className:WE(`lucide-${nC(W0(i))}`,`lucide-${i}`,r),...o}));return e.displayName=W0(i),e};const oC=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],lC=Ne("activity",oC);const uC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Xp=Ne("calendar",uC);const cC=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],J0=Ne("chart-column",cC);const hC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fs=Ne("chevron-down",hC);const fC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dC=Ne("chevron-left",fC);const pC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mC=Ne("chevron-right",pC);const gC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cu=Ne("circle-check-big",gC);const _C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wp=Ne("circle-x",_C);const yC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rh=Ne("clock",yC);const vC=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],EC=Ne("dollar-sign",vC);const TC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Jp=Ne("external-link",TC);const SC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ih=Ne("file-text",SC);const bC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],xC=Ne("funnel",bC);const AC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],CC=Ne("moon",AC);const wC=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],RC=Ne("pen",wC);const IC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Z0=Ne("plus",IC);const DC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],NC=Ne("refresh-cw",DC);const OC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],t1=Ne("search",OC);const MC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],e1=Ne("settings",MC);const kC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],VC=Ne("sun",kC);const LC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zC=Ne("trash-2",LC);const PC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jC=Ne("trending-up",PC);const UC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zp=Ne("triangle-alert",UC);const BC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],FC=Ne("users",BC);const qC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tm=Ne("x",qC),HC=()=>{};var n1={};const JE={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const at=function(i,t){if(!i)throw nl(t)},nl=function(i){return new Error("Firebase Database ("+JE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const ZE=function(i){const t=[];let e=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},GC=function(i){const t=[];let e=0,r=0;for(;e<i.length;){const o=i[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[e++],c=i[e++],p=i[e++],m=((o&7)<<18|(u&63)<<12|(c&63)<<6|p&63)-65536;t[r++]=String.fromCharCode(55296+(m>>10)),t[r++]=String.fromCharCode(56320+(m&1023))}else{const u=i[e++],c=i[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},tg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],c=o+1<i.length,p=c?i[o+1]:0,m=o+2<i.length,g=m?i[o+2]:0,S=u>>2,E=(u&3)<<4|p>>4;let b=(p&15)<<2|g>>6,w=g&63;m||(w=64,c||(b=64)),r.push(e[S],e[E],e[b],e[w])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(ZE(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):GC(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=e[i.charAt(o++)],p=o<i.length?e[i.charAt(o)]:0;++o;const g=o<i.length?e[i.charAt(o)]:64;++o;const E=o<i.length?e[i.charAt(o)]:64;if(++o,u==null||p==null||g==null||E==null)throw new YC;const b=u<<2|p>>4;if(r.push(b),g!==64){const w=p<<4&240|g>>2;if(r.push(w),E!==64){const O=g<<6&192|E;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class YC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tT=function(i){const t=ZE(i);return tg.encodeByteArray(t,!0)},Yh=function(i){return tT(i).replace(/\./g,"")},ym=function(i){try{return tg.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function QC(i){return eT(void 0,i)}function eT(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!KC(e)||(i[e]=eT(i[e],t[e]));return i}function KC(i){return i!=="__proto__"}function $C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const XC=()=>$C().__FIREBASE_DEFAULTS__,WC=()=>{if(typeof process>"u"||typeof n1>"u")return;const i=n1.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},JC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&ym(i[1]);return t&&JSON.parse(t)},eg=()=>{try{return HC()||XC()||WC()||JC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ZC=i=>eg()?.emulatorHosts?.[i],ng=i=>{const t=ZC(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},nT=()=>eg()?.config;class ig{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}function za(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sg(i){return(await fetch(i,{credentials:"include"})).ok}function rg(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Yh(JSON.stringify(e)),Yh(JSON.stringify(c)),""].join(".")}const Eu={};function tw(){const i={prod:[],emulator:[]};for(const t of Object.keys(Eu))Eu[t]?i.emulator.push(t):i.prod.push(t);return i}function ew(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let i1=!1;function ag(i,t){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||Eu[i]===t||Eu[i]||i1)return;Eu[i]=t;function e(b){return`__firebase__banner__${b}`}const r="__firebase__banner",u=tw().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{i1=!0,c()},b}function S(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=ew(r),w=e("text"),O=document.getElementById(w)||document.createElement("span"),Q=e("learnmore"),U=document.getElementById(Q)||document.createElement("a"),ht=e("preprendIcon"),ft=document.getElementById(ht)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const lt=b.element;p(lt),S(U,Q);const bt=g();m(ft,ht),lt.append(ft,O,U,bt),document.body.appendChild(lt)}u?(O.innerText="Preview backend disconnected.",ft.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ft.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function iT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(iT())}function nw(){const i=eg()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sw(){return JE.NODE_ADMIN===!0}function rw(){return!nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aw(){try{return typeof indexedDB=="object"}catch{return!1}}function ow(){return new Promise((i,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(e){t(e)}})}const lw="FirebaseError";class Pa extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=lw,Object.setPrototypeOf(this,Pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rT.prototype.create)}}class rT{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?uw(u,r):"Error",p=`${this.serviceName}: ${c} (${o}).`;return new Pa(o,p,r)}}function uw(i,t){return i.replace(cw,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const cw=/\{\$([^}]+)}/g;function Du(i){return JSON.parse(i)}function un(i){return JSON.stringify(i)}const aT=function(i){let t={},e={},r={},o="";try{const u=i.split(".");t=Du(ym(u[0])||""),e=Du(ym(u[1])||""),o=u[2],r=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:r,signature:o}},hw=function(i){const t=aT(i),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},fw=function(i){const t=aT(i).claims;return typeof t=="object"&&t.admin===!0};function Ws(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Go(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function s1(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Qh(i,t,e){const r={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=t.call(e,i[o],o,i));return r}function Nu(i,t){if(i===t)return!0;const e=Object.keys(i),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=i[o],c=t[o];if(r1(u)&&r1(c)){if(!Nu(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function r1(i){return i!==null&&typeof i=="object"}function dw(i){const t=[];for(const[e,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class pw{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const r=this.W_;if(typeof t=="string")for(let E=0;E<16;E++)r[E]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let E=0;E<16;E++)r[E]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let E=16;E<80;E++){const b=r[E-3]^r[E-8]^r[E-14]^r[E-16];r[E]=(b<<1|b>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],c=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,S;for(let E=0;E<80;E++){E<40?E<20?(g=p^u&(c^p),S=1518500249):(g=u^c^p,S=1859775393):E<60?(g=u&c|p&(u|c),S=2400959708):(g=u^c^p,S=3395469782);const b=(o<<5|o>>>27)+g+m+S+r[E]&4294967295;m=p,p=c,c=(u<<30|u>>>2)&4294967295,u=o,o=b}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const r=e-this.blockSize;let o=0;const u=this.buf_;let c=this.inbuf_;for(;o<e;){if(c===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(u[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(u),c=0;break}}else for(;o<e;)if(u[c]=t[o],++c,++o,c===this.blockSize){this.compress_(u),c=0;break}}this.inbuf_=c,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=e&255,e/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[r]=this.chain_[o]>>u&255,++r;return t}}function oT(i,t){return`${i} failed: ${t} argument `}const mw=function(i){const t=[];let e=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);if(o>=55296&&o<=56319){const u=o-55296;r++,at(r<i.length,"Surrogate pair missing trail surrogate.");const c=i.charCodeAt(r)-56320;o=65536+(u<<10)+c}o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):o<65536?(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},bf=function(i){let t=0;for(let e=0;e<i.length;e++){const r=i.charCodeAt(e);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,e++):t+=3}return t};function jn(i){return i&&i._delegate?i._delegate:i}class Da{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const xa="[DEFAULT]";class gw{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new ig;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yw(t))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=xa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xa){return this.instances.has(t)}getOptions(t=xa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_w(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=xa){return this.component?this.component.multipleInstances?t:xa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _w(i){return i===xa?void 0:i}function yw(i){return i.instantiationMode==="EAGER"}class vw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new gw(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Jt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Jt||(Jt={}));const Ew={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},Tw=Jt.INFO,Sw={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},bw=(i,t,...e)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),o=Sw[t];if(o)console[o](`[${r}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class og{constructor(t){this.name=t,this._logLevel=Tw,this._logHandler=bw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Jt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ew[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...t),this._logHandler(this,Jt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...t),this._logHandler(this,Jt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...t),this._logHandler(this,Jt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...t),this._logHandler(this,Jt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...t),this._logHandler(this,Jt.ERROR,...t)}}const xw=(i,t)=>t.some(e=>i instanceof e);let a1,o1;function Aw(){return a1||(a1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cw(){return o1||(o1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,vm=new WeakMap,uT=new WeakMap,em=new WeakMap,lg=new WeakMap;function ww(i){const t=new Promise((e,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{e(Or(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&lT.set(e,i)}).catch(()=>{}),lg.set(t,i),t}function Rw(i){if(vm.has(i))return;const t=new Promise((e,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});vm.set(i,t)}let Em={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return vm.get(i);if(t==="objectStoreNames")return i.objectStoreNames||uT.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Or(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function Iw(i){Em=i(Em)}function Dw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=i.call(nm(this),t,...e);return uT.set(r,t.sort?t.sort():[t]),Or(r)}:Cw().includes(i)?function(...t){return i.apply(nm(this),t),Or(lT.get(this))}:function(...t){return Or(i.apply(nm(this),t))}}function Nw(i){return typeof i=="function"?Dw(i):(i instanceof IDBTransaction&&Rw(i),xw(i,Aw())?new Proxy(i,Em):i)}function Or(i){if(i instanceof IDBRequest)return ww(i);if(em.has(i))return em.get(i);const t=Nw(i);return t!==i&&(em.set(i,t),lg.set(t,i)),t}const nm=i=>lg.get(i);function Ow(i,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(i,t),p=Or(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Or(c.result),m.oldVersion,m.newVersion,Or(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),p.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const Mw=["get","getKey","getAll","getAllKeys","count"],kw=["put","add","delete","clear"],im=new Map;function l1(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(im.get(t))return im.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=kw.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Mw.includes(e)))return;const u=async function(c,...p){const m=this.transaction(c,o?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[e](...p),o&&m.done]))[0]};return im.set(t,u),u}Iw(i=>({...i,get:(t,e,r)=>l1(t,e)||i.get(t,e,r),has:(t,e)=>!!l1(t,e)||i.has(t,e)}));class Vw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Lw(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function Lw(i){return i.getComponent()?.type==="VERSION"}const Tm="@firebase/app",u1="0.14.6";const Qs=new og("@firebase/app"),zw="@firebase/app-compat",Pw="@firebase/analytics-compat",jw="@firebase/analytics",Uw="@firebase/app-check-compat",Bw="@firebase/app-check",Fw="@firebase/auth",qw="@firebase/auth-compat",Hw="@firebase/database",Gw="@firebase/data-connect",Yw="@firebase/database-compat",Qw="@firebase/functions",Kw="@firebase/functions-compat",$w="@firebase/installations",Xw="@firebase/installations-compat",Ww="@firebase/messaging",Jw="@firebase/messaging-compat",Zw="@firebase/performance",t2="@firebase/performance-compat",e2="@firebase/remote-config",n2="@firebase/remote-config-compat",i2="@firebase/storage",s2="@firebase/storage-compat",r2="@firebase/firestore",a2="@firebase/ai",o2="@firebase/firestore-compat",l2="firebase",u2="12.6.0";const Sm="[DEFAULT]",c2={[Tm]:"fire-core",[zw]:"fire-core-compat",[jw]:"fire-analytics",[Pw]:"fire-analytics-compat",[Bw]:"fire-app-check",[Uw]:"fire-app-check-compat",[Fw]:"fire-auth",[qw]:"fire-auth-compat",[Hw]:"fire-rtdb",[Gw]:"fire-data-connect",[Yw]:"fire-rtdb-compat",[Qw]:"fire-fn",[Kw]:"fire-fn-compat",[$w]:"fire-iid",[Xw]:"fire-iid-compat",[Ww]:"fire-fcm",[Jw]:"fire-fcm-compat",[Zw]:"fire-perf",[t2]:"fire-perf-compat",[e2]:"fire-rc",[n2]:"fire-rc-compat",[i2]:"fire-gcs",[s2]:"fire-gcs-compat",[r2]:"fire-fst",[o2]:"fire-fst-compat",[a2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};const Kh=new Map,h2=new Map,bm=new Map;function c1(i,t){try{i.container.addComponent(t)}catch(e){Qs.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Yo(i){const t=i.name;if(bm.has(t))return Qs.debug(`There were multiple attempts to register component ${t}.`),!1;bm.set(t,i);for(const e of Kh.values())c1(e,i);for(const e of h2.values())c1(e,i);return!0}function ug(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function cg(i){return i==null?!1:i.settings!==void 0}const f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new rT("app","Firebase",f2);class d2{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}const hg=u2;function Qu(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const r={name:Sm,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw Mr.create("bad-app-name",{appName:String(o)});if(e||(e=nT()),!e)throw Mr.create("no-options");const u=Kh.get(o);if(u){if(Nu(e,u.options)&&Nu(r,u.config))return u;throw Mr.create("duplicate-app",{appName:o})}const c=new vw(o);for(const m of bm.values())c.addComponent(m);const p=new d2(e,r,c);return Kh.set(o,p),p}function fg(i=Sm){const t=Kh.get(i);if(!t&&i===Sm&&nT())return Qu();if(!t)throw Mr.create("no-app",{appName:i});return t}function ds(i,t,e){let r=c2[i]??i;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qs.warn(c.join(" "));return}Yo(new Da(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const p2="firebase-heartbeat-database",m2=1,Ou="firebase-heartbeat-store";let sm=null;function cT(){return sm||(sm=Ow(p2,m2,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Ou)}catch(e){console.warn(e)}}}}).catch(i=>{throw Mr.create("idb-open",{originalErrorMessage:i.message})})),sm}async function g2(i){try{const e=(await cT()).transaction(Ou),r=await e.objectStore(Ou).get(hT(i));return await e.done,r}catch(t){if(t instanceof Pa)Qs.warn(t.message);else{const e=Mr.create("idb-get",{originalErrorMessage:t?.message});Qs.warn(e.message)}}}async function h1(i,t){try{const r=(await cT()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(t,hT(i)),await r.done}catch(e){if(e instanceof Pa)Qs.warn(e.message);else{const r=Mr.create("idb-set",{originalErrorMessage:e?.message});Qs.warn(r.message)}}}function hT(i){return`${i.name}!${i.options.appId}`}const _2=1024,y2=30;class v2{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new T2(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=f1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>y2){const o=S2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=f1(),{heartbeatsToSend:e,unsentEntries:r}=E2(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Qs.warn(t),""}}}function f1(){return new Date().toISOString().substring(0,10)}function E2(i,t=_2){const e=[];let r=i.slice();for(const o of i){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),d1(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),d1(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class T2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aw()?ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await g2(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return h1(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return h1(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function d1(i){return Yh(JSON.stringify({version:2,heartbeats:i})).length}function S2(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let r=1;r<i.length;r++)i[r].date<e&&(e=i[r].date,t=r);return t}function b2(i){Yo(new Da("platform-logger",t=>new Vw(t),"PRIVATE")),Yo(new Da("heartbeat",t=>new v2(t),"PRIVATE")),ds(Tm,u1,i),ds(Tm,u1,"esm2020"),ds("fire-js","")}b2("");var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kr,fT;(function(){var i;function t(R,C){function N(){}N.prototype=C.prototype,R.F=C.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(L,k,z){for(var I=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)I[ce-2]=arguments[ce];return C.prototype[k].apply(L,I)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,C,N){N||(N=0);const L=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)L[k]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(k=0;k<16;++k)L[k]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=R.g[0],N=R.g[1],k=R.g[2];let z=R.g[3],I;I=C+(z^N&(k^z))+L[0]+3614090360&4294967295,C=N+(I<<7&4294967295|I>>>25),I=z+(k^C&(N^k))+L[1]+3905402710&4294967295,z=C+(I<<12&4294967295|I>>>20),I=k+(N^z&(C^N))+L[2]+606105819&4294967295,k=z+(I<<17&4294967295|I>>>15),I=N+(C^k&(z^C))+L[3]+3250441966&4294967295,N=k+(I<<22&4294967295|I>>>10),I=C+(z^N&(k^z))+L[4]+4118548399&4294967295,C=N+(I<<7&4294967295|I>>>25),I=z+(k^C&(N^k))+L[5]+1200080426&4294967295,z=C+(I<<12&4294967295|I>>>20),I=k+(N^z&(C^N))+L[6]+2821735955&4294967295,k=z+(I<<17&4294967295|I>>>15),I=N+(C^k&(z^C))+L[7]+4249261313&4294967295,N=k+(I<<22&4294967295|I>>>10),I=C+(z^N&(k^z))+L[8]+1770035416&4294967295,C=N+(I<<7&4294967295|I>>>25),I=z+(k^C&(N^k))+L[9]+2336552879&4294967295,z=C+(I<<12&4294967295|I>>>20),I=k+(N^z&(C^N))+L[10]+4294925233&4294967295,k=z+(I<<17&4294967295|I>>>15),I=N+(C^k&(z^C))+L[11]+2304563134&4294967295,N=k+(I<<22&4294967295|I>>>10),I=C+(z^N&(k^z))+L[12]+1804603682&4294967295,C=N+(I<<7&4294967295|I>>>25),I=z+(k^C&(N^k))+L[13]+4254626195&4294967295,z=C+(I<<12&4294967295|I>>>20),I=k+(N^z&(C^N))+L[14]+2792965006&4294967295,k=z+(I<<17&4294967295|I>>>15),I=N+(C^k&(z^C))+L[15]+1236535329&4294967295,N=k+(I<<22&4294967295|I>>>10),I=C+(k^z&(N^k))+L[1]+4129170786&4294967295,C=N+(I<<5&4294967295|I>>>27),I=z+(N^k&(C^N))+L[6]+3225465664&4294967295,z=C+(I<<9&4294967295|I>>>23),I=k+(C^N&(z^C))+L[11]+643717713&4294967295,k=z+(I<<14&4294967295|I>>>18),I=N+(z^C&(k^z))+L[0]+3921069994&4294967295,N=k+(I<<20&4294967295|I>>>12),I=C+(k^z&(N^k))+L[5]+3593408605&4294967295,C=N+(I<<5&4294967295|I>>>27),I=z+(N^k&(C^N))+L[10]+38016083&4294967295,z=C+(I<<9&4294967295|I>>>23),I=k+(C^N&(z^C))+L[15]+3634488961&4294967295,k=z+(I<<14&4294967295|I>>>18),I=N+(z^C&(k^z))+L[4]+3889429448&4294967295,N=k+(I<<20&4294967295|I>>>12),I=C+(k^z&(N^k))+L[9]+568446438&4294967295,C=N+(I<<5&4294967295|I>>>27),I=z+(N^k&(C^N))+L[14]+3275163606&4294967295,z=C+(I<<9&4294967295|I>>>23),I=k+(C^N&(z^C))+L[3]+4107603335&4294967295,k=z+(I<<14&4294967295|I>>>18),I=N+(z^C&(k^z))+L[8]+1163531501&4294967295,N=k+(I<<20&4294967295|I>>>12),I=C+(k^z&(N^k))+L[13]+2850285829&4294967295,C=N+(I<<5&4294967295|I>>>27),I=z+(N^k&(C^N))+L[2]+4243563512&4294967295,z=C+(I<<9&4294967295|I>>>23),I=k+(C^N&(z^C))+L[7]+1735328473&4294967295,k=z+(I<<14&4294967295|I>>>18),I=N+(z^C&(k^z))+L[12]+2368359562&4294967295,N=k+(I<<20&4294967295|I>>>12),I=C+(N^k^z)+L[5]+4294588738&4294967295,C=N+(I<<4&4294967295|I>>>28),I=z+(C^N^k)+L[8]+2272392833&4294967295,z=C+(I<<11&4294967295|I>>>21),I=k+(z^C^N)+L[11]+1839030562&4294967295,k=z+(I<<16&4294967295|I>>>16),I=N+(k^z^C)+L[14]+4259657740&4294967295,N=k+(I<<23&4294967295|I>>>9),I=C+(N^k^z)+L[1]+2763975236&4294967295,C=N+(I<<4&4294967295|I>>>28),I=z+(C^N^k)+L[4]+1272893353&4294967295,z=C+(I<<11&4294967295|I>>>21),I=k+(z^C^N)+L[7]+4139469664&4294967295,k=z+(I<<16&4294967295|I>>>16),I=N+(k^z^C)+L[10]+3200236656&4294967295,N=k+(I<<23&4294967295|I>>>9),I=C+(N^k^z)+L[13]+681279174&4294967295,C=N+(I<<4&4294967295|I>>>28),I=z+(C^N^k)+L[0]+3936430074&4294967295,z=C+(I<<11&4294967295|I>>>21),I=k+(z^C^N)+L[3]+3572445317&4294967295,k=z+(I<<16&4294967295|I>>>16),I=N+(k^z^C)+L[6]+76029189&4294967295,N=k+(I<<23&4294967295|I>>>9),I=C+(N^k^z)+L[9]+3654602809&4294967295,C=N+(I<<4&4294967295|I>>>28),I=z+(C^N^k)+L[12]+3873151461&4294967295,z=C+(I<<11&4294967295|I>>>21),I=k+(z^C^N)+L[15]+530742520&4294967295,k=z+(I<<16&4294967295|I>>>16),I=N+(k^z^C)+L[2]+3299628645&4294967295,N=k+(I<<23&4294967295|I>>>9),I=C+(k^(N|~z))+L[0]+4096336452&4294967295,C=N+(I<<6&4294967295|I>>>26),I=z+(N^(C|~k))+L[7]+1126891415&4294967295,z=C+(I<<10&4294967295|I>>>22),I=k+(C^(z|~N))+L[14]+2878612391&4294967295,k=z+(I<<15&4294967295|I>>>17),I=N+(z^(k|~C))+L[5]+4237533241&4294967295,N=k+(I<<21&4294967295|I>>>11),I=C+(k^(N|~z))+L[12]+1700485571&4294967295,C=N+(I<<6&4294967295|I>>>26),I=z+(N^(C|~k))+L[3]+2399980690&4294967295,z=C+(I<<10&4294967295|I>>>22),I=k+(C^(z|~N))+L[10]+4293915773&4294967295,k=z+(I<<15&4294967295|I>>>17),I=N+(z^(k|~C))+L[1]+2240044497&4294967295,N=k+(I<<21&4294967295|I>>>11),I=C+(k^(N|~z))+L[8]+1873313359&4294967295,C=N+(I<<6&4294967295|I>>>26),I=z+(N^(C|~k))+L[15]+4264355552&4294967295,z=C+(I<<10&4294967295|I>>>22),I=k+(C^(z|~N))+L[6]+2734768916&4294967295,k=z+(I<<15&4294967295|I>>>17),I=N+(z^(k|~C))+L[13]+1309151649&4294967295,N=k+(I<<21&4294967295|I>>>11),I=C+(k^(N|~z))+L[4]+4149444226&4294967295,C=N+(I<<6&4294967295|I>>>26),I=z+(N^(C|~k))+L[11]+3174756917&4294967295,z=C+(I<<10&4294967295|I>>>22),I=k+(C^(z|~N))+L[2]+718787259&4294967295,k=z+(I<<15&4294967295|I>>>17),I=N+(z^(k|~C))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+z&4294967295}r.prototype.v=function(R,C){C===void 0&&(C=R.length);const N=C-this.blockSize,L=this.C;let k=this.h,z=0;for(;z<C;){if(k==0)for(;z<=N;)o(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<C;)if(L[k++]=R.charCodeAt(z++),k==this.blockSize){o(this,L),k=0;break}}else for(;z<C;)if(L[k++]=R[z++],k==this.blockSize){o(this,L),k=0;break}}this.h=k,this.o+=C},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;C=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=C&255,C/=256;for(this.v(R),R=Array(16),C=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)R[C++]=this.g[N]>>>L&255;return R};function u(R,C){var N=p;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=C(R)}function c(R,C){this.h=C;const N=[];let L=!0;for(let k=R.length-1;k>=0;k--){const z=R[k]|0;L&&z==C||(N[k]=z,L=!1)}this.g=N}var p={};function m(R){return-128<=R&&R<128?u(R,function(C){return new c([C|0],C<0?-1:0)}):new c([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return U(g(-R));const C=[];let N=1;for(let L=0;R>=N;L++)C[L]=R/N|0,N*=4294967296;return new c(C,0)}function S(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return U(S(R.substring(1),C));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(C,8));let L=E;for(let z=0;z<R.length;z+=8){var k=Math.min(8,R.length-z);const I=parseInt(R.substring(z,z+k),C);k<8?(k=g(Math.pow(C,k)),L=L.j(k).add(g(I))):(L=L.j(N),L=L.add(g(I)))}return L}var E=m(0),b=m(1),w=m(16777216);i=c.prototype,i.m=function(){if(Q(this))return-U(this).m();let R=0,C=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);R+=(L>=0?L:4294967296+L)*C,C*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O(this))return"0";if(Q(this))return"-"+U(this).toString(R);const C=g(Math.pow(R,6));var N=this;let L="";for(;;){const k=bt(N,C).g;N=ht(N,k.j(C));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=k,O(N))return z+L;for(;z.length<6;)z="0"+z;L=z+L}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function O(R){if(R.h!=0)return!1;for(let C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function Q(R){return R.h==-1}i.l=function(R){return R=ht(this,R),Q(R)?-1:O(R)?0:1};function U(R){const C=R.g.length,N=[];for(let L=0;L<C;L++)N[L]=~R.g[L];return new c(N,~R.h).add(b)}i.abs=function(){return Q(this)?U(this):this},i.add=function(R){const C=Math.max(this.g.length,R.g.length),N=[];let L=0;for(let k=0;k<=C;k++){let z=L+(this.i(k)&65535)+(R.i(k)&65535),I=(z>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);L=I>>>16,z&=65535,I&=65535,N[k]=I<<16|z}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ht(R,C){return R.add(U(C))}i.j=function(R){if(O(this)||O(R))return E;if(Q(this))return Q(R)?U(this).j(U(R)):U(U(this).j(R));if(Q(R))return U(this.j(U(R)));if(this.l(w)<0&&R.l(w)<0)return g(this.m()*R.m());const C=this.g.length+R.g.length,N=[];for(var L=0;L<2*C;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<R.g.length;k++){const z=this.i(L)>>>16,I=this.i(L)&65535,ce=R.i(k)>>>16,Ve=R.i(k)&65535;N[2*L+2*k]+=I*Ve,ft(N,2*L+2*k),N[2*L+2*k+1]+=z*Ve,ft(N,2*L+2*k+1),N[2*L+2*k+1]+=I*ce,ft(N,2*L+2*k+1),N[2*L+2*k+2]+=z*ce,ft(N,2*L+2*k+2)}for(R=0;R<C;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=C;R<2*C;R++)N[R]=0;return new c(N,0)};function ft(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function lt(R,C){this.g=R,this.h=C}function bt(R,C){if(O(C))throw Error("division by zero");if(O(R))return new lt(E,E);if(Q(R))return C=bt(U(R),C),new lt(U(C.g),U(C.h));if(Q(C))return C=bt(R,U(C)),new lt(U(C.g),C.h);if(R.g.length>30){if(Q(R)||Q(C))throw Error("slowDivide_ only works with positive integers.");for(var N=b,L=C;L.l(R)<=0;)N=jt(N),L=jt(L);var k=At(N,1),z=At(L,1);for(L=At(L,2),N=At(N,2);!O(L);){var I=z.add(L);I.l(R)<=0&&(k=k.add(N),z=I),L=At(L,1),N=At(N,1)}return C=ht(R,k.j(C)),new lt(k,C)}for(k=E;R.l(C)>=0;){for(N=Math.max(1,Math.floor(R.m()/C.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),z=g(N),I=z.j(C);Q(I)||I.l(R)>0;)N-=L,z=g(N),I=z.j(C);O(z)&&(z=b),k=k.add(z),R=ht(R,I)}return new lt(k,R)}i.B=function(R){return bt(this,R).h},i.and=function(R){const C=Math.max(this.g.length,R.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)&R.i(L);return new c(N,this.h&R.h)},i.or=function(R){const C=Math.max(this.g.length,R.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)|R.i(L);return new c(N,this.h|R.h)},i.xor=function(R){const C=Math.max(this.g.length,R.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)^R.i(L);return new c(N,this.h^R.h)};function jt(R){const C=R.g.length+1,N=[];for(let L=0;L<C;L++)N[L]=R.i(L)<<1|R.i(L-1)>>>31;return new c(N,R.h)}function At(R,C){const N=C>>5;C%=32;const L=R.g.length-N,k=[];for(let z=0;z<L;z++)k[z]=C>0?R.i(z+N)>>>C|R.i(z+N+1)<<32-C:R.i(z+N);return new c(k,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,fT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=S,kr=c}).apply(typeof p1<"u"?p1:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dT,gu,pT,jh,xm,mT,gT,_T;(function(){var i,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var _=0;_<h.length;++_){var v=h[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,_){if(_)t:{var v=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var B=h[A];if(!(B in v))break t;v=v[B]}h=h[h.length-1],A=v[h],_=_(A),_!=A&&_!=null&&t(v,h,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(_){var v=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&v.push([A,_[A]]);return v}});var u=u||{},c=this||self;function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,v){return h.call.apply(h.bind,arguments)}function g(h,_,v){return g=m,g.apply(null,arguments)}function S(h,_){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,_){function v(){}v.prototype=_.prototype,h.Z=_.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(A,B,G){for(var ot=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)ot[zt-2]=arguments[zt];return _.prototype[B].apply(A,ot)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const v=Array(_);for(let A=0;A<_;A++)v[A]=h[A];return v}return[]}function O(h,_){for(let A=1;A<arguments.length;A++){const B=arguments[A];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=h.length||0;const G=B.length||0;h.length=v+G;for(let ot=0;ot<G;ot++)h[v+ot]=B[ot]}else h.push(B)}}class Q{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(h){c.setTimeout(()=>{throw h},0)}function ht(){var h=R;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ft{constructor(){this.h=this.g=null}add(_,v){const A=lt.get();A.set(_,v),this.h?this.h.next=A:this.g=A,this.h=A}}var lt=new Q(()=>new bt,h=>h.reset());class bt{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,At=!1,R=new ft,C=()=>{const h=Promise.resolve(void 0);jt=()=>{h.then(N)}};function N(){for(var h;h=ht();){try{h.h.call(h.g)}catch(v){U(v)}var _=lt;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}At=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,_),c.removeEventListener("test",v,_)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function ce(h,_){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(ce,k),ce.prototype.init=function(h,_){const v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(v=="mouseover"?_=h.fromElement:v=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),$=0;function ct(h,_,v,A,B){this.listener=h,this.proxy=null,this.src=_,this.type=v,this.capture=!!A,this.ha=B,this.key=++$,this.da=this.fa=!1}function vt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xt(h,_,v){for(const A in h)_.call(v,h[A],A,h)}function ee(h,_){for(const v in h)_.call(void 0,h[v],v,h)}function V(h){const _={};for(const v in h)_[v]=h[v];return _}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(h,_){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)h[v]=A[v];for(let G=0;G<W.length;G++)v=W[G],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function dt(h){this.src=h,this.g={},this.h=0}dt.prototype.add=function(h,_,v,A,B){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const ot=kt(h,_,A,B);return ot>-1?(_=h[ot],v||(_.fa=!1)):(_=new ct(_,this.src,G,!!A,B),_.fa=v,h.push(_)),_};function Nt(h,_){const v=_.type;if(v in h.g){var A=h.g[v],B=Array.prototype.indexOf.call(A,_,void 0),G;(G=B>=0)&&Array.prototype.splice.call(A,B,1),G&&(vt(_),h.g[v].length==0&&(delete h.g[v],h.h--))}}function kt(h,_,v,A){for(let B=0;B<h.length;++B){const G=h[B];if(!G.da&&G.listener==_&&G.capture==!!v&&G.ha==A)return B}return-1}var Gt="closure_lm_"+(Math.random()*1e6|0),xe={};function me(h,_,v,A,B){if(Array.isArray(_)){for(let G=0;G<_.length;G++)me(h,_[G],v,A,B);return null}return v=qa(v),h&&h[Ve]?h.J(_,v,p(A)?!!A.capture:!1,B):Mi(h,_,v,!1,A,B)}function Mi(h,_,v,A,B,G){if(!_)throw Error("Invalid event type");const ot=p(B)?!!B.capture:!!B;let zt=Ss(h);if(zt||(h[Gt]=zt=new dt(h)),v=zt.add(_,v,A,ot,G),v.proxy)return v;if(A=Wi(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)z||(B=ot),B===void 0&&(B=!1),h.addEventListener(_.toString(),A,B);else if(h.attachEvent)h.attachEvent(ii(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wi(){function h(v){return _.call(h.src,h.listener,v)}const _=Wr;return h}function Tn(h,_,v,A,B){if(Array.isArray(_))for(var G=0;G<_.length;G++)Tn(h,_[G],v,A,B);else A=p(A)?!!A.capture:!!A,v=qa(v),h&&h[Ve]?(h=h.i,G=String(_).toString(),G in h.g&&(_=h.g[G],v=kt(_,v,A,B),v>-1&&(vt(_[v]),Array.prototype.splice.call(_,v,1),_.length==0&&(delete h.g[G],h.h--)))):h&&(h=Ss(h))&&(_=h.g[_.toString()],h=-1,_&&(h=kt(_,v,A,B)),(v=h>-1?_[h]:null)&&Ts(v))}function Ts(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ve])Nt(_.i,h);else{var v=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(v,A,h.capture):_.detachEvent?_.detachEvent(ii(v),A):_.addListener&&_.removeListener&&_.removeListener(A),(v=Ss(_))?(Nt(v,h),v.h==0&&(v.src=null,_[Gt]=null)):vt(h)}}}function ii(h){return h in xe?xe[h]:xe[h]="on"+h}function Wr(h,_){if(h.da)h=!0;else{_=new ce(_,this);const v=h.listener,A=h.ha||h.src;h.fa&&Ts(h),h=v.call(A,_)}return h}function Ss(h){return h=h[Gt],h instanceof dt?h:null}var Jr="__closure_events_fn_"+(Math.random()*1e9>>>0);function qa(h){return typeof h=="function"?h:(h[Jr]||(h[Jr]=function(_){return h.handleEvent(_)}),h[Jr])}function je(){L.call(this),this.i=new dt(this),this.M=this,this.G=null}E(je,L),je.prototype[Ve]=!0,je.prototype.removeEventListener=function(h,_,v,A){Tn(this,h,_,v,A)};function Ue(h,_){var v,A=h.G;if(A)for(v=[];A;A=A.G)v.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new k(_,h);else if(_ instanceof k)_.target=_.target||h;else{var B=_;_=new k(A,h),ut(_,B)}B=!0;let G,ot;if(v)for(ot=v.length-1;ot>=0;ot--)G=_.g=v[ot],B=ki(G,A,!0,_)&&B;if(G=_.g=h,B=ki(G,A,!0,_)&&B,B=ki(G,A,!1,_)&&B,v)for(ot=0;ot<v.length;ot++)G=_.g=v[ot],B=ki(G,A,!1,_)&&B}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const v=h.g[_];for(let A=0;A<v.length;A++)vt(v[A]);delete h.g[_],h.h--}}this.G=null},je.prototype.J=function(h,_,v,A){return this.i.add(String(h),_,!1,v,A)},je.prototype.K=function(h,_,v,A){return this.i.add(String(h),_,!0,v,A)};function ki(h,_,v,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let B=!0;for(let G=0;G<_.length;++G){const ot=_[G];if(ot&&!ot.da&&ot.capture==v){const zt=ot.listener,Fe=ot.ha||ot.src;ot.fa&&Nt(h.i,ot),B=zt.call(Fe,A)!==!1&&B}}return B&&!A.defaultPrevented}function ul(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Ha(h){h.g=ul(()=>{h.g=null,h.i&&(h.i=!1,Ha(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class pn extends L{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ha(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(h){L.call(this),this.h=h,this.g={}}E(bs,L);var Zs=[];function Zr(h){Xt(h.g,function(_,v){this.g.hasOwnProperty(v)&&Ts(_)},h),h.g={}}bs.prototype.N=function(){bs.Z.N.call(this),Zr(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vi=c.JSON.stringify,cl=c.JSON.parse,Ga=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ya(){}function Qa(){}var si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){k.call(this,"d")}E(an,k);function qn(){k.call(this,"c")}E(qn,k);var ke={},Ka=null;function st(){return Ka=Ka||new je}ke.Ia="serverreachability";function P(h){k.call(this,ke.Ia,h)}E(P,k);function it(h){const _=st();Ue(_,new P(_))}ke.STAT_EVENT="statevent";function yt(h,_){k.call(this,ke.STAT_EVENT,h),this.stat=_}E(yt,k);function rt(h){const _=st();Ue(_,new yt(_,h))}ke.Ja="timingevent";function Et(h,_){k.call(this,ke.Ja,h),this.size=_}E(Et,k);function K(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Ct(){this.g=!0}Ct.prototype.ua=function(){this.g=!1};function wt(h,_,v,A,B,G){h.info(function(){if(h.g)if(G){var ot="",zt=G.split("&");for(let ae=0;ae<zt.length;ae++){var Fe=zt[ae].split("=");if(Fe.length>1){const Oe=Fe[0];Fe=Fe[1];const Ti=Oe.split("_");ot=Ti.length>=2&&Ti[1]=="type"?ot+(Oe+"="+Fe+"&"):ot+(Oe+"=redacted&")}}}else ot=null;else ot=G;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+_+`
`+v+`
`+ot})}function le(h,_,v,A,B,G,ot){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+_+`
`+v+`
`+G+" "+ot})}function nt(h,_,v,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+on(h,v)+(A?" "+A:"")})}function he(h,_){h.info(function(){return"TIMEOUT: "+_})}Ct.prototype.info=function(){};function on(h,_){if(!h.g)return _;if(!_)return null;try{const G=JSON.parse(_);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var v=G[h];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ot=1;ot<A.length;ot++)A[ot]=""}}}}return Vi(G)}catch{return _}}var On={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Li;function ne(){}E(ne,Ya),ne.prototype.g=function(){return new XMLHttpRequest},Li=new ne;function Se(h){return encodeURIComponent(String(h))}function Mn(h){var _=1;h=h.split(":");const v=[];for(;_>0&&h.length;)v.push(h.shift()),_--;return h.length&&v.push(h.join(":")),v}function Be(h,_,v,A){this.j=h,this.i=_,this.l=v,this.S=A||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ye}function Ye(){this.i=null,this.g="",this.h=!1}var Ae={},Qe={};function _i(h,_,v){h.M=1,h.A=ta(We(_)),h.u=v,h.R=!0,Rt(h,null)}function Rt(h,_){h.F=Date.now(),Hn(h),h.B=We(h.A);var v=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Wa(v.i,"t",A),h.C=0,v=h.j.L,h.h=new Ye,h.g=Tc(h.j,v?_:null,!h.u),h.P>0&&(h.O=new pn(g(h.Y,h,h.g),h.P)),_=h.V,v=h.g,A=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Zs[0]=B.toString()),B=Zs);for(let G=0;G<B.length;G++){const ot=me(v,B[G],A||_.handleEvent,!1,_.h||_);if(!ot)break;_.g[ot.key]=ot}_=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),it(),wt(h.i,h.v,h.B,h.l,h.S,h.u)}Be.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ui(h)==3?_.j():this.Y(h)},Be.prototype.Y=function(h){try{if(h==this.g)t:{const zt=Ui(this.g),Fe=this.g.ya(),ae=this.g.ca();if(!(zt<3)&&(zt!=3||this.g&&(this.h.h||this.g.la()||Sn(this.g)))){this.K||zt!=4||Fe==7||(Fe==8||ae<=0?it(3):it(2)),$e(this);var _=this.g.ca();this.X=_;var v=Ke(this);if(this.o=_==200,le(this.i,this.v,this.B,this.l,this.S,zt,_),this.o){if(this.U&&!this.L){e:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var G=A;break e}}G=null}if(h=G)nt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ji(this,h);else{this.o=!1,this.m=3,rt(12),ri(this),Gn(this);break t}}if(this.R){h=!0;let Oe;for(;!this.K&&this.C<v.length;)if(Oe=zi(this,v),Oe==Qe){zt==4&&(this.m=4,rt(14),h=!1),nt(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Ae){this.m=4,rt(15),nt(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else nt(this.i,this.l,Oe,null),Ji(this,Oe);if(mn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||v.length!=0||this.h.h||(this.m=1,rt(16),h=!1),this.o=this.o&&h,!h)nt(this.i,this.l,v,"[Invalid Chunked Response]"),ri(this),Gn(this);else if(v.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Al(ot),ot.P=!0,rt(11))}}else nt(this.i,this.l,v,null),Ji(this,v);zt==4&&ri(this),this.o&&!this.K&&(zt==4?_c(this.j,this):(this.o=!1,Hn(this)))}else As(this.g),_==400&&v.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),ri(this),Gn(this)}}}catch{}finally{}};function Ke(h){if(!mn(h))return h.g.la();const _=Sn(h.g);if(_==="")return"";let v="";const A=_.length,B=Ui(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ri(h),Gn(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<A;G++)h.h.h=!0,v+=h.h.i.decode(_[G],{stream:!(B&&G==A-1)});return _.length=0,h.h.g+=v,h.C=0,h.h.g}function mn(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function zi(h,_){var v=h.C,A=_.indexOf(`
`,v);return A==-1?Qe:(v=Number(_.substring(v,A)),isNaN(v)?Ae:(A+=1,A+v>_.length?Qe:(_=_.slice(A,A+v),h.C=A+v,_)))}Be.prototype.cancel=function(){this.K=!0,ri(this)};function Hn(h){h.T=Date.now()+h.H,yi(h,h.H)}function yi(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=K(g(h.aa,h),_)}function $e(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Be.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(he(this.i,this.B),this.M!=2&&(it(),rt(17)),ri(this),this.m=2,Gn(this)):yi(this,this.T-h)};function Gn(h){h.j.I==0||h.K||_c(h.j,h)}function ri(h){$e(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Zr(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Ji(h,_){try{var v=h.j;if(v.I!=0&&(v.g==h||ts(v.h,h))){if(!h.L&&ts(v.h,h)&&v.I==3){try{var A=v.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)no(v),or(v);else break t;oa(v),rt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=K(g(v.Va,v),6e3));Zi(v.h)<=1&&v.ta&&(v.ta=void 0)}else as(v,11)}else if((h.L||v.g==h)&&no(v),!I(_))for(B=v.Ba.g.parse(_),_=0;_<B.length;_++){let ae=B[_];const Oe=ae[0];if(!(Oe<=v.K))if(v.K=Oe,ae=ae[1],v.I==2)if(ae[0]=="c"){v.M=ae[1],v.ba=ae[2];const Ti=ae[3];Ti!=null&&(v.ka=Ti,v.j.info("VER="+v.ka));const os=ae[4];os!=null&&(v.za=os,v.j.info("SVER="+v.za));const Bi=ae[5];Bi!=null&&typeof Bi=="number"&&Bi>0&&(A=1.5*Bi,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Fi=h.g;if(Fi){const la=Fi.g?Fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var G=A.h;G.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(dl(G,G.h),G.h=null))}if(A.G){const io=Fi.g?Fi.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(A.wa=io,fe(A.J,A.G,io))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ot=h;if(A.na=Ec(A,A.L?A.ba:null,A.W),ot.L){pl(A.h,ot);var zt=ot,Fe=A.O;Fe&&(zt.H=Fe),zt.D&&($e(zt),Hn(zt)),A.g=ot}else mc(A);v.i.length>0&&rs(v)}else ae[0]!="stop"&&ae[0]!="close"||as(v,7);else v.I==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?as(v,7):bl(v):ae[0]!="noop"&&v.l&&v.l.qa(ae),v.A=0)}}it(4)}catch{}}var Xe=class{constructor(h,_){this.g=h,this.map=_}};function hl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zi(h){return h.h?1:h.g?h.g.size:0}function ts(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function dl(h,_){h.g?h.g.add(_):h.h=_}function pl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}hl.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ml(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const v of h.g.values())_=_.concat(v.G);return _}return w(h.i)}var uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $a(h,_){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const A=h[v].indexOf("=");let B,G=null;A>=0?(B=h[v].substring(0,A),G=h[v].substring(A+1)):B=h[v],_(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ai(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof ai?(this.l=h.l,gn(this,h.j),this.o=h.o,this.g=h.g,tr(this,h.u),this.h=h.h,gl(this,dc(h.i)),this.m=h.m):h&&(_=String(h).match(uc))?(this.l=!1,gn(this,_[1]||"",!0),this.o=es(_[2]||""),this.g=es(_[3]||"",!0),tr(this,_[4]),this.h=es(_[5]||"",!0),gl(this,_[6]||"",!0),this.m=es(_[7]||"")):(this.l=!1,this.i=new nr(null,this.l))}ai.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(ea(_,Xa,!0),":");var v=this.g;return(v||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ea(_,Xa,!0),"@"),h.push(Se(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ea(v,v.charAt(0)=="/"?_l:cc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ea(v,hc)),h.join("")},ai.prototype.resolve=function(h){const _=We(this);let v=!!h.j;v?gn(_,h.j):v=!!h.o,v?_.o=h.o:v=!!h.g,v?_.g=h.g:v=h.u!=null;var A=h.h;if(v)tr(_,h.u);else if(v=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=_.h.lastIndexOf("/");B!=-1&&(A=_.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let ot=0;ot<B.length;){const zt=B[ot++];zt=="."?A&&ot==B.length&&G.push(""):zt==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&ot==B.length&&G.push("")):(G.push(zt),A=!0)}A=G.join("/")}else A=B}return v?_.h=A:v=h.i.toString()!=="",v?gl(_,dc(h.i)):v=!!h.m,v&&(_.m=h.m),_};function We(h){return new ai(h)}function gn(h,_,v){h.j=v?es(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function tr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function gl(h,_,v){_ instanceof nr?(h.i=_,Ja(h.i,h.l)):(v||(_=ea(_,er)),h.i=new nr(_,h.l))}function fe(h,_,v){h.i.set(_,v)}function ta(h){return fe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function es(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ea(h,_,v){return typeof h=="string"?(h=encodeURI(h).replace(_,Yn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xa=/[#\/\?@]/g,cc=/[#\?:]/g,_l=/[#\?]/g,er=/[#\?@]/g,hc=/#/g;function nr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Qn(h){h.g||(h.g=new Map,h.h=0,h.i&&$a(h.i,function(_,v){h.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}i=nr.prototype,i.add=function(h,_){Qn(this),this.i=null,h=ir(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(_),this.h+=1,this};function fc(h,_){Qn(h),_=ir(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function yl(h,_){return Qn(h),_=ir(h,_),h.g.has(_)}i.forEach=function(h,_){Qn(this),this.g.forEach(function(v,A){v.forEach(function(B){h.call(_,B,A,this)},this)},this)};function vl(h,_){Qn(h);let v=[];if(typeof _=="string")yl(h,_)&&(v=v.concat(h.g.get(ir(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)v=v.concat(h[_]);return v}i.set=function(h,_){return Qn(this),this.i=null,h=ir(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},i.get=function(h,_){return h?(h=vl(this,h),h.length>0?String(h[0]):_):_};function Wa(h,_,v){fc(h,_),v.length>0&&(h.i=null,h.g.set(ir(h,_),w(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var v=_[A];const B=Se(v);v=vl(this,v);for(let G=0;G<v.length;G++){let ot=B;v[G]!==""&&(ot+="="+Se(v[G])),h.push(ot)}}return this.i=h.join("&")};function dc(h){const _=new nr;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function ir(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ja(h,_){_&&!h.j&&(Qn(h),h.i=null,h.g.forEach(function(v,A){const B=A.toLowerCase();A!=B&&(fc(this,A),Wa(this,B,v))},h)),h.j=_}function Pi(h,_){const v=new Ct;if(c.Image){const A=new Image;A.onload=S(vi,v,"TestLoadImage: loaded",!0,_,A),A.onerror=S(vi,v,"TestLoadImage: error",!1,_,A),A.onabort=S(vi,v,"TestLoadImage: abort",!1,_,A),A.ontimeout=S(vi,v,"TestLoadImage: timeout",!1,_,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function El(h,_){const v=new Ct,A=new AbortController,B=setTimeout(()=>{A.abort(),vi(v,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(G=>{clearTimeout(B),G.ok?vi(v,"TestPingServer: ok",!0,_):vi(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),vi(v,"TestPingServer: error",!1,_)})}function vi(h,_,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function sr(){this.g=new Ga}function ns(h){this.i=h.Sb||null,this.h=h.ab||!1}E(ns,Ya),ns.prototype.g=function(){return new na(this.i,this.h)};function na(h,_){je.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(na,je),i=na.prototype,i.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,ji(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Za(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Za(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?rr(this):ji(this),this.readyState==3&&Za(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,rr(this))},i.Na=function(h){this.g&&(this.response=h,rr(this))},i.ga=function(){this.g&&rr(this)};function rr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ji(h)}i.setRequestHeader=function(h,_){this.A.append(h,_)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=_.next();return h.join(`\r
`)};function ji(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ei(h){let _="";return Xt(h,function(v,A){_+=A,_+=":",_+=v,_+=`\r
`}),_}function ia(h,_,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Ei(v),typeof h=="string"?v!=null&&Se(v):fe(h,_,v))}function ge(h){je.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ge,je);var is=/^https?$/i,Tl=["POST","PUT"];i=ge.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,_,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Li.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(G){sa(this,G);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())v.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Tl,_,void 0)>=0)||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ot]of v)this.g.setRequestHeader(G,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){sa(this,G)}};function sa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Sl(h),xs(h)}function Sl(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),xs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),ge.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ra(this):this.Xa())},i.Xa=function(){ra(this)};function ra(h){if(h.h&&typeof u<"u"){if(h.v&&Ui(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),Ui(h)==4){h.h=!1;try{const G=h.ca();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var v;if(!(v=_)){var A;if(A=G===0){let ot=String(h.D).match(uc)[1]||null;!ot&&c.self&&c.self.location&&(ot=c.self.location.protocol.slice(0,-1)),A=!is.test(ot?ot.toLowerCase():"")}v=A}if(v)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var B=Ui(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",Sl(h)}}finally{xs(h)}}}}function xs(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,_||Ue(h,"ready");try{v.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ui(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Ui(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),cl(_)}};function Sn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function As(h){const _={};h=(h.g&&Ui(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(I(h[A]))continue;var v=Mn(h[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=_[B]||[];_[B]=G,G.push(v)}ee(_,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(h,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||_}function ar(h){this.za=0,this.i=[],this.j=new Ct,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,h),this.Za=ss("retryDelaySeedMs",1e4,h),this.Ta=ss("forwardChannelMaxRetries",2,h),this.va=ss("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new hl(h&&h.concurrentRequestLimit),this.Ba=new sr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ar.prototype,i.ka=8,i.I=1,i.connect=function(h,_,v,A){rt(0),this.W=h,this.H=_||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Ec(this,null,this.W),rs(this)};function bl(h){if(to(h),h.I==3){var _=h.V++,v=We(h.J);if(fe(v,"SID",h.M),fe(v,"RID",_),fe(v,"TYPE","terminate"),aa(h,v),_=new Be(h,h.j,_),_.M=2,_.A=ta(We(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=_.A,v=!0),v||(_.g=Tc(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Hn(_)}vc(h)}function or(h){h.g&&(Al(h),h.g.cancel(),h.g=null)}function to(h){or(h),h.v&&(c.clearTimeout(h.v),h.v=null),no(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function rs(h){if(!fl(h.h)&&!h.m){h.m=!0;var _=h.Ea;jt||C(),At||(jt(),At=!0),R.add(_,h),h.D=0}}function eo(h,_){return Zi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=K(g(h.Ea,h,_),yc(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Be(this,this.j,h);let G=this.o;if(this.U&&(G?(G=V(G),ut(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)t:{for(var _=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=v;break t}if(_===4096||v===this.i.length-1){_=v+1;break t}}_=1e3}else _=1e3;_=pc(this,B,_),v=We(this.J),fe(v,"RID",h),fe(v,"CVER",22),this.G&&fe(v,"X-HTTP-Session-Id",this.G),aa(this,v),G&&(this.R?_="headers="+Se(Ei(G))+"&"+_:this.u&&ia(v,this.u,G)),dl(this.h,B),this.Ra&&fe(v,"TYPE","init"),this.S?(fe(v,"$req",_),fe(v,"SID","null"),B.U=!0,_i(B,v,null)):_i(B,v,_),this.I=2}}else this.I==3&&(h?xl(this,h):this.i.length==0||fl(this.h)||xl(this))};function xl(h,_){var v;_?v=_.l:v=h.V++;const A=We(h.J);fe(A,"SID",h.M),fe(A,"RID",v),fe(A,"AID",h.K),aa(h,A),h.u&&h.o&&ia(A,h.u,h.o),v=new Be(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),_&&(h.i=_.G.concat(h.i)),_=pc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),dl(h.h,v),_i(v,A,_)}function aa(h,_){h.H&&Xt(h.H,function(v,A){fe(_,A,v)}),h.l&&Xt({},function(v,A){fe(_,A,v)})}function pc(h,_,v){v=Math.min(h.i.length,v);const A=h.l?g(h.l.Ka,h.l,h):null;t:{var B=h.i;let zt=-1;for(;;){const Fe=["count="+v];zt==-1?v>0?(zt=B[0].g,Fe.push("ofs="+zt)):zt=0:Fe.push("ofs="+zt);let ae=!0;for(let Oe=0;Oe<v;Oe++){var G=B[Oe].g;const Ti=B[Oe].map;if(G-=zt,G<0)zt=Math.max(0,B[Oe].g-100),ae=!1;else try{G="req"+G+"_"||"";try{var ot=Ti instanceof Map?Ti:Object.entries(Ti);for(const[os,Bi]of ot){let Fi=Bi;p(Bi)&&(Fi=Vi(Bi)),Fe.push(G+os+"="+encodeURIComponent(Fi))}}catch(os){throw Fe.push(G+"type="+encodeURIComponent("_badmap")),os}}catch{A&&A(Ti)}}if(ae){ot=Fe.join("&");break t}}ot=void 0}return h=h.i.splice(0,v),_.G=h,ot}function mc(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;jt||C(),At||(jt(),At=!0),R.add(_,h),h.A=0}}function oa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=K(g(h.Da,h),yc(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=K(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),or(this),gc(this))};function Al(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function gc(h){h.g=new Be(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=We(h.na);fe(_,"RID","rpc"),fe(_,"SID",h.M),fe(_,"AID",h.K),fe(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&fe(_,"TO",h.ia),fe(_,"TYPE","xmlhttp"),aa(h,_),h.u&&h.o&&ia(_,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=ta(We(_)),v.u=null,v.R=!0,Rt(v,h)}i.Va=function(){this.C!=null&&(this.C=null,or(this),oa(this),rt(19))};function no(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function _c(h,_){var v=null;if(h.g==_){no(h),Al(h),h.g=null;var A=2}else if(ts(h.h,_))v=_.G,pl(h.h,_),A=1;else return;if(h.I!=0){if(_.o)if(A==1){v=_.u?_.u.length:0,_=Date.now()-_.F;var B=h.D;A=st(),Ue(A,new Et(A,v)),rs(h)}else mc(h);else if(B=_.m,B==3||B==0&&_.X>0||!(A==1&&eo(h,_)||A==2&&oa(h)))switch(v&&v.length>0&&(_=h.h,_.i=_.i.concat(v)),B){case 1:as(h,5);break;case 4:as(h,10);break;case 3:as(h,6);break;default:as(h,2)}}}function yc(h,_){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*_}function as(h,_){if(h.j.info("Error code "+_),_==2){var v=g(h.bb,h),A=h.Ua;const B=!A;A=new ai(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gn(A,"https"),ta(A),B?Pi(A.toString(),v):El(A.toString(),v)}else rt(2);h.I=0,h.l&&h.l.pa(_),vc(h),to(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function vc(h){if(h.I=0,h.ja=[],h.l){const _=ml(h.h);(_.length!=0||h.i.length!=0)&&(O(h.ja,_),O(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Ec(h,_,v){var A=v instanceof ai?We(v):new ai(v);if(A.g!="")_&&(A.g=_+"."+A.g),tr(A,A.u);else{var B=c.location;A=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;const G=new ai(null);A&&gn(G,A),_&&(G.g=_),B&&tr(G,B),v&&(G.h=v),A=G}return v=h.G,_=h.wa,v&&_&&fe(A,v,_),fe(A,"VER",h.ka),aa(h,A),A}function Tc(h,_,v){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new ge(new ns({ab:v})):new ge(h.ma),_.Fa(h.L),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sc(){}i=Sc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function lr(){}lr.prototype.g=function(h,_){return new Un(h,_)};function Un(h,_){je.call(this),this.g=new ar(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!I(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!I(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Cs(this)}E(Un,je),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){bl(this.g)},Un.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Vi(h),h=v);_.i.push(new Xe(_.Ya++,h)),_.I==3&&rs(_)},Un.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,Un.Z.N.call(this)};function bc(h){an.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const v in _){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(bc,an);function xc(){qn.call(this),this.status=1}E(xc,qn);function Cs(h){this.g=h}E(Cs,Sc),Cs.prototype.ra=function(){Ue(this.g,"a")},Cs.prototype.qa=function(h){Ue(this.g,new bc(h))},Cs.prototype.pa=function(h){Ue(this.g,new xc)},Cs.prototype.oa=function(){Ue(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,_T=function(){return new lr},gT=function(){return st()},mT=ke,xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},On.NO_ERROR=0,On.TIMEOUT=8,On.HTTP_ERROR=6,jh=On,gi.COMPLETE="complete",pT=gi,Qa.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",je.prototype.listen=je.prototype.J,gu=Qa,ge.prototype.listenOnce=ge.prototype.K,ge.prototype.getLastError=ge.prototype.Ha,ge.prototype.getLastErrorCode=ge.prototype.ya,ge.prototype.getStatus=ge.prototype.ca,ge.prototype.getResponseJson=ge.prototype.La,ge.prototype.getResponseText=ge.prototype.la,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Fa,dT=ge}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const m1="@firebase/firestore",g1="4.9.2";class Ln{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let il="12.3.0";const Na=new og("@firebase/firestore");function Vo(){return Na.logLevel}function pt(i,...t){if(Na.logLevel<=Jt.DEBUG){const e=t.map(dg);Na.debug(`Firestore (${il}): ${i}`,...e)}}function Ks(i,...t){if(Na.logLevel<=Jt.ERROR){const e=t.map(dg);Na.error(`Firestore (${il}): ${i}`,...e)}}function Qo(i,...t){if(Na.logLevel<=Jt.WARN){const e=t.map(dg);Na.warn(`Firestore (${il}): ${i}`,...e)}}function dg(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function Dt(i,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,yT(i,r,e)}function yT(i,t,e){let r=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Ks(r),new Error(r)}function ue(i,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,i||yT(t,o,r)}function Lt(i,t){return i}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends Pa{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class vT{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class x2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ln.UNAUTHENTICATED)))}shutdown(){}}class A2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class C2{constructor(t){this.t=t,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ue(this.o===void 0,42304);let r=this.i;const o=m=>this.i!==r?(r=this.i,e(m)):Promise.resolve();let u=new Gs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gs,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const m=u;t.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gs)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string",31837,{l:r}),new vT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ue(t===null||typeof t=="string",2055,{h:t}),new Ln(t)}}class w2{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R2{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new w2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cg(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ue(this.o===void 0,3512);const r=u=>{u.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,pt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _1(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(ue(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new _1(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function D2(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<i;r++)e[r]=Math.floor(256*Math.random());return e}class pg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=D2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function Kt(i,t){return i<t?-1:i>t?1:0}function Am(i,t){const e=Math.min(i.length,t.length);for(let r=0;r<e;r++){const o=i.charAt(r),u=t.charAt(r);if(o!==u)return rm(o)===rm(u)?Kt(o,u):rm(o)?1:-1}return Kt(i.length,t.length)}const N2=55296,O2=57343;function rm(i){const t=i.charCodeAt(0);return t>=N2&&t<=O2}function Ko(i,t,e){return i.length===t.length&&i.every(((r,o)=>e(r,t[o])))}const y1="__name__";class fs{constructor(t,e,r){e===void 0?e=0:e>t.length&&Dt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Dt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return fs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fs?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=fs.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return Kt(t.length,e.length)}static compareSegments(t,e){const r=fs.isNumericId(t),o=fs.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?fs.extractNumericId(t).compare(fs.extractNumericId(e)):Am(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return kr.fromString(t.substring(4,t.length-2))}}class Ie extends fs{construct(t,e,r){return new Ie(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Ie(e)}static emptyPath(){return new Ie([])}}const M2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends fs{construct(t,e,r){return new Rn(t,e,r)}static isValidIdentifier(t){return M2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y1}static keyField(){return new Rn([y1])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new _t(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const p=t[o];if(p==="\\"){if(o+1===t.length)throw new _t(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new _t(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,o+=2}else p==="`"?(c=!c,o++):p!=="."||c?(r+=p,o++):(u(),o++)}if(u(),c)throw new _t(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Rn(e)}static emptyPath(){return new Rn([])}}class St{constructor(t){this.path=t}static fromPath(t){return new St(Ie.fromString(t))}static fromName(t){return new St(Ie.fromString(t).popFirst(5))}static empty(){return new St(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ie.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new St(new Ie(t.slice()))}}function ET(i,t,e){if(!e)throw new _t(et.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function k2(i,t,e,r){if(t===!0&&r===!0)throw new _t(et.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function v1(i){if(!St.isDocumentKey(i))throw new _t(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function E1(i){if(St.isDocumentKey(i))throw new _t(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function TT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function mg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Dt(12329,{type:typeof i})}function jr(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new _t(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=mg(i);throw new _t(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function sn(i,t){const e={typeString:i};return t&&(e.value=t),e}function Ku(i,t){if(!TT(i))throw new _t(et.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in i)){e=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new _t(et.INVALID_ARGUMENT,e);return!0}const T1=-62135596800,S1=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(t){return De.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*S1);return new De(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _t(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _t(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<T1)throw new _t(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S1}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ku(t,De._jsonSchema))return new De(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-T1;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:sn("string",De._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new De(0,0))}static max(){return new Mt(new De(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mu=-1;function V2(i,t){const e=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(r===1e9?new De(e+1,0):new De(e,r));return new Ur(o,St.empty(),t)}function L2(i){return new Ur(i.readTime,i.key,Mu)}class Ur{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ur(Mt.min(),St.empty(),Mu)}static max(){return new Ur(Mt.max(),St.empty(),Mu)}}function z2(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=St.comparator(i.documentKey,t.documentKey),e!==0?e:Kt(i.largestBatchId,t.largestBatchId))}const P2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function sl(i){if(i.code!==et.FAILED_PRECONDITION||i.message!==P2)throw i;pt("LocalStore","Unexpectedly lost primary lease")}class tt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new tt(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof tt?e:tt.resolve(e)}catch(e){return tt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):tt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):tt.reject(e)}static resolve(t){return new tt(((e,r)=>{e(t)}))}static reject(t){return new tt(((e,r)=>{r(t)}))}static waitFor(t){return new tt(((e,r)=>{let o=0,u=0,c=!1;t.forEach((p=>{++o,p.next((()=>{++u,c&&u===o&&e()}),(m=>r(m)))})),c=!0,u===o&&e()}))}static or(t){let e=tt.resolve(!1);for(const r of t)e=e.next((o=>o?tt.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new tt(((r,o)=>{const u=t.length,c=new Array(u);let p=0;for(let m=0;m<u;m++){const g=m;e(t[g]).next((S=>{c[g]=S,++p,p===u&&r(c)}),(S=>o(S)))}}))}static doWhile(t,e){return new tt(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}function U2(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function rl(i){return i.name==="IndexedDbTransactionError"}class xf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}xf.ce=-1;const gg=-1;function Af(i){return i==null}function $h(i){return i===0&&1/i==-1/0}function B2(i){return typeof i=="number"&&Number.isInteger(i)&&!$h(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const ST="";function F2(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=b1(t)),t=q2(i.get(e),t);return b1(t)}function q2(i,t){let e=t;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":e+="";break;case ST:e+="";break;default:e+=u}}return e}function b1(i){return i+ST+""}function x1(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function $r(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function bT(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}let rn=class Cm{constructor(t,e){this.comparator=t,this.root=e||Vr.EMPTY}insert(t,e){return new Cm(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(t){return new Cm(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nh(this.root,t,this.comparator,!0)}},Nh=class{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Vr=class qs{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??qs.RED,this.left=o??qs.EMPTY,this.right=u??qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new qs(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return qs.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}};Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1;Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Vr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(t){this.comparator=t,this.data=new rn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new A1(this.data.getIterator())}getIteratorFrom(t){return new A1(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof dn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new dn(this.comparator);return e.data=t,e}}class A1{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Qi{constructor(t){this.fields=t,t.sort(Rn.comparator)}static empty(){return new Qi([])}unionWith(t){let e=new dn(Rn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Qi(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ko(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}class xT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class In{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new xT("Invalid base64 string: "+u):u}})(t);return new In(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new In(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}In.EMPTY_BYTE_STRING=new In("");const H2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(i){if(ue(!!i,39018),typeof i=="string"){let t=0;const e=H2.exec(i);if(ue(!!e,46558,{timestamp:i}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ge(i.seconds),nanos:Ge(i.nanos)}}function Ge(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Fr(i){return typeof i=="string"?In.fromBase64String(i):In.fromUint8Array(i)}const AT="server_timestamp",CT="__type__",wT="__previous_value__",RT="__local_write_time__";function _g(i){return(i?.mapValue?.fields||{})[CT]?.stringValue===AT}function Cf(i){const t=i.mapValue.fields[wT];return _g(t)?Cf(t):t}function ku(i){const t=Br(i.mapValue.fields[RT].timestampValue);return new De(t.seconds,t.nanos)}class G2{constructor(t,e,r,o,u,c,p,m,g,S){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=S}}const Xh="(default)";class Vu{constructor(t,e){this.projectId=t,this.database=e||Xh}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(t){return t instanceof Vu&&t.projectId===this.projectId&&t.database===this.database}}const IT="__type__",Y2="__max__",Oh={mapValue:{}},DT="__vector__",Wh="value";function qr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_g(i)?4:K2(i)?9007199254740991:Q2(i)?10:11:Dt(28295,{value:i})}function vs(i,t){if(i===t)return!0;const e=qr(i);if(e!==qr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return ku(i).isEqual(ku(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Br(o.timestampValue),p=Br(u.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(o,u){return Fr(o.bytesValue).isEqual(Fr(u.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(o,u){return Ge(o.geoPointValue.latitude)===Ge(u.geoPointValue.latitude)&&Ge(o.geoPointValue.longitude)===Ge(u.geoPointValue.longitude)})(i,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Ge(o.integerValue)===Ge(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Ge(o.doubleValue),p=Ge(u.doubleValue);return c===p?$h(c)===$h(p):isNaN(c)&&isNaN(p)}return!1})(i,t);case 9:return Ko(i.arrayValue.values||[],t.arrayValue.values||[],vs);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},p=u.mapValue.fields||{};if(x1(c)!==x1(p))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(p[m]===void 0||!vs(c[m],p[m])))return!1;return!0})(i,t);default:return Dt(52216,{left:i})}}function Lu(i,t){return(i.values||[]).find((e=>vs(e,t)))!==void 0}function $o(i,t){if(i===t)return 0;const e=qr(i),r=qr(t);if(e!==r)return Kt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(i.booleanValue,t.booleanValue);case 2:return(function(u,c){const p=Ge(u.integerValue||u.doubleValue),m=Ge(c.integerValue||c.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(i,t);case 3:return C1(i.timestampValue,t.timestampValue);case 4:return C1(ku(i),ku(t));case 5:return Am(i.stringValue,t.stringValue);case 6:return(function(u,c){const p=Fr(u),m=Fr(c);return p.compareTo(m)})(i.bytesValue,t.bytesValue);case 7:return(function(u,c){const p=u.split("/"),m=c.split("/");for(let g=0;g<p.length&&g<m.length;g++){const S=Kt(p[g],m[g]);if(S!==0)return S}return Kt(p.length,m.length)})(i.referenceValue,t.referenceValue);case 8:return(function(u,c){const p=Kt(Ge(u.latitude),Ge(c.latitude));return p!==0?p:Kt(Ge(u.longitude),Ge(c.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return w1(i.arrayValue,t.arrayValue);case 10:return(function(u,c){const p=u.fields||{},m=c.fields||{},g=p[Wh]?.arrayValue,S=m[Wh]?.arrayValue,E=Kt(g?.values?.length||0,S?.values?.length||0);return E!==0?E:w1(g,S)})(i.mapValue,t.mapValue);case 11:return(function(u,c){if(u===Oh.mapValue&&c===Oh.mapValue)return 0;if(u===Oh.mapValue)return 1;if(c===Oh.mapValue)return-1;const p=u.fields||{},m=Object.keys(p),g=c.fields||{},S=Object.keys(g);m.sort(),S.sort();for(let E=0;E<m.length&&E<S.length;++E){const b=Am(m[E],S[E]);if(b!==0)return b;const w=$o(p[m[E]],g[S[E]]);if(w!==0)return w}return Kt(m.length,S.length)})(i.mapValue,t.mapValue);default:throw Dt(23264,{he:e})}}function C1(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Kt(i,t);const e=Br(i),r=Br(t),o=Kt(e.seconds,r.seconds);return o!==0?o:Kt(e.nanos,r.nanos)}function w1(i,t){const e=i.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=$o(e[o],r[o]);if(u)return u}return Kt(e.length,r.length)}function Xo(i){return wm(i)}function wm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const r=Br(e);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return Fr(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return St.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=wm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${wm(e.fields[c])}`;return o+"}"})(i.mapValue):Dt(61005,{value:i})}function Uh(i){switch(qr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Cf(i);return t?16+Uh(t):16;case 5:return 2*i.stringValue.length;case 6:return Fr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Uh(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return $r(r.fields,((u,c)=>{o+=u.length+Uh(c)})),o})(i.mapValue);default:throw Dt(13486,{value:i})}}function Rm(i){return!!i&&"integerValue"in i}function yg(i){return!!i&&"arrayValue"in i}function R1(i){return!!i&&"nullValue"in i}function I1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bh(i){return!!i&&"mapValue"in i}function Q2(i){return(i?.mapValue?.fields||{})[IT]?.stringValue===DT}function Tu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return $r(i.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Tu(r))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Tu(i.arrayValue.values[e]);return t}return{...i}}function K2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}class pi{constructor(t){this.value=t}static empty(){return new pi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Bh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tu(e)}setAll(t){let e=Rn.emptyPath(),r={},o=[];t.forEach(((c,p)=>{if(!e.isImmediateParentOf(p)){const m=this.getFieldsMap(e);this.applyChanges(m,r,o),r={},o=[],e=p.popLast()}c?r[p.lastSegment()]=Tu(c):o.push(p.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());Bh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return vs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];Bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){$r(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new pi(Tu(this.value))}}function NT(i){const t=[];return $r(i.fields,((e,r)=>{const o=new Rn([e]);if(Bh(r)){const u=NT(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new Qi(t)}class zn{constructor(t,e,r,o,u,c,p){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=p}static newInvalidDocument(t){return new zn(t,0,Mt.min(),Mt.min(),Mt.min(),pi.empty(),0)}static newFoundDocument(t,e,r,o){return new zn(t,1,e,Mt.min(),r,o,0)}static newNoDocument(t,e){return new zn(t,2,e,Mt.min(),Mt.min(),pi.empty(),0)}static newUnknownDocument(t,e){return new zn(t,3,e,Mt.min(),Mt.min(),pi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jh{constructor(t,e){this.position=t,this.inclusive=e}}function D1(i,t,e){let r=0;for(let o=0;o<i.position.length;o++){const u=t[o],c=i.position[o];if(u.field.isKeyField()?r=St.comparator(St.fromName(c.referenceValue),e.key):r=$o(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function N1(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!vs(i.position[e],t.position[e]))return!1;return!0}class Zh{constructor(t,e="asc"){this.field=t,this.dir=e}}function $2(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class OT{}class cn extends OT{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new W2(t,e,r):e==="array-contains"?new tR(t,r):e==="in"?new eR(t,r):e==="not-in"?new nR(t,r):e==="array-contains-any"?new iR(t,r):new cn(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new J2(t,r):new Z2(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison($o(e,this.value)):e!==null&&qr(this.value)===qr(e)&&this.matchesComparison($o(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Es extends OT{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Es(t,e)}matches(t){return MT(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MT(i){return i.op==="and"}function kT(i){return X2(i)&&MT(i)}function X2(i){for(const t of i.filters)if(t instanceof Es)return!1;return!0}function Im(i){if(i instanceof cn)return i.field.canonicalString()+i.op.toString()+Xo(i.value);if(kT(i))return i.filters.map((t=>Im(t))).join(",");{const t=i.filters.map((e=>Im(e))).join(",");return`${i.op}(${t})`}}function VT(i,t){return i instanceof cn?(function(r,o){return o instanceof cn&&r.op===o.op&&r.field.isEqual(o.field)&&vs(r.value,o.value)})(i,t):i instanceof Es?(function(r,o){return o instanceof Es&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,p)=>u&&VT(c,o.filters[p])),!0):!1})(i,t):void Dt(19439)}function LT(i){return i instanceof cn?(function(e){return`${e.field.canonicalString()} ${e.op} ${Xo(e.value)}`})(i):i instanceof Es?(function(e){return e.op.toString()+" {"+e.getFilters().map(LT).join(" ,")+"}"})(i):"Filter"}class W2 extends cn{constructor(t,e,r){super(t,e,r),this.key=St.fromName(r.referenceValue)}matches(t){const e=St.comparator(t.key,this.key);return this.matchesComparison(e)}}class J2 extends cn{constructor(t,e){super(t,"in",e),this.keys=zT("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Z2 extends cn{constructor(t,e){super(t,"not-in",e),this.keys=zT("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function zT(i,t){return(t.arrayValue?.values||[]).map((e=>St.fromName(e.referenceValue)))}class tR extends cn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return yg(e)&&Lu(e.arrayValue,this.value)}}class eR extends cn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Lu(this.value.arrayValue,e)}}class nR extends cn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Lu(this.value.arrayValue,e)}}class iR extends cn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!yg(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Lu(this.value.arrayValue,r)))}}class sR{constructor(t,e=null,r=[],o=[],u=null,c=null,p=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=p,this.Te=null}}function O1(i,t=null,e=[],r=[],o=null,u=null,c=null){return new sR(i,t,e,r,o,u,c)}function vg(i){const t=Lt(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Im(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Af(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Xo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Xo(r))).join(",")),t.Te=e}return t.Te}function Eg(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!$2(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!VT(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!N1(i.startAt,t.startAt)&&N1(i.endAt,t.endAt)}function Dm(i){return St.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class wf{constructor(t,e=null,r=[],o=[],u=null,c="F",p=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rR(i,t,e,r,o,u,c,p){return new wf(i,t,e,r,o,u,c,p)}function Tg(i){return new wf(i)}function M1(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function aR(i){return i.collectionGroup!==null}function Su(i){const t=Lt(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let p=new dn(Rn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Zh(u,r))})),e.has(Rn.keyField().canonicalString())||t.Ie.push(new Zh(Rn.keyField(),r))}return t.Ie}function ps(i){const t=Lt(i);return t.Ee||(t.Ee=oR(t,Su(i))),t.Ee}function oR(i,t){if(i.limitType==="F")return O1(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Zh(o.field,u)}));const e=i.endAt?new Jh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Jh(i.startAt.position,i.startAt.inclusive):null;return O1(i.path,i.collectionGroup,t,i.filters,i.limit,e,r)}}function Nm(i,t,e){return new wf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Rf(i,t){return Eg(ps(i),ps(t))&&i.limitType===t.limitType}function PT(i){return`${vg(ps(i))}|lt:${i.limitType}`}function Lo(i){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>LT(o))).join(", ")}]`),Af(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Xo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Xo(o))).join(",")),`Target(${r})`})(ps(i))}; limitType=${i.limitType})`}function If(i,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):St.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,t)&&(function(r,o){for(const u of Su(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(i,t)&&(function(r,o){return!(r.startAt&&!(function(c,p,m){const g=D1(c,p,m);return c.inclusive?g<=0:g<0})(r.startAt,Su(r),o)||r.endAt&&!(function(c,p,m){const g=D1(c,p,m);return c.inclusive?g>=0:g>0})(r.endAt,Su(r),o))})(i,t)}function lR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function jT(i){return(t,e)=>{let r=!1;for(const o of Su(i)){const u=uR(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function uR(i,t,e){const r=i.field.isKeyField()?St.comparator(t.key,e.key):(function(u,c,p){const m=c.data.field(u),g=p.data.field(u);return m!==null&&g!==null?$o(m,g):Dt(42886)})(i.field,t,e);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:i.dir})}}class ja{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return bT(this.inner)}size(){return this.innerSize}}const cR=new rn(St.comparator);function $s(){return cR}const UT=new rn(St.comparator);function _u(...i){let t=UT;for(const e of i)t=t.insert(e.key,e);return t}function BT(i){let t=UT;return i.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Ca(){return bu()}function FT(){return bu()}function bu(){return new ja((i=>i.toString()),((i,t)=>i.isEqual(t)))}const hR=new rn(St.comparator),fR=new dn(St.comparator);function $t(...i){let t=fR;for(const e of i)t=t.add(e);return t}const dR=new dn(Kt);function pR(){return dR}function Sg(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(t)?"-0":t}}function qT(i){return{integerValue:""+i}}function mR(i,t){return B2(t)?qT(t):Sg(i,t)}class Df{constructor(){this._=void 0}}function gR(i,t,e){return i instanceof tf?(function(o,u){const c={fields:{[CT]:{stringValue:AT},[RT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&_g(u)&&(u=Cf(u)),u&&(c.fields[wT]=u),{mapValue:c}})(e,t):i instanceof zu?GT(i,t):i instanceof Pu?YT(i,t):(function(o,u){const c=HT(o,u),p=k1(c)+k1(o.Ae);return Rm(c)&&Rm(o.Ae)?qT(p):Sg(o.serializer,p)})(i,t)}function _R(i,t,e){return i instanceof zu?GT(i,t):i instanceof Pu?YT(i,t):e}function HT(i,t){return i instanceof ef?(function(r){return Rm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class tf extends Df{}class zu extends Df{constructor(t){super(),this.elements=t}}function GT(i,t){const e=QT(t);for(const r of i.elements)e.some((o=>vs(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Pu extends Df{constructor(t){super(),this.elements=t}}function YT(i,t){let e=QT(t);for(const r of i.elements)e=e.filter((o=>!vs(o,r)));return{arrayValue:{values:e}}}class ef extends Df{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function k1(i){return Ge(i.integerValue||i.doubleValue)}function QT(i){return yg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function yR(i,t){return i.field.isEqual(t.field)&&(function(r,o){return r instanceof zu&&o instanceof zu||r instanceof Pu&&o instanceof Pu?Ko(r.elements,o.elements,vs):r instanceof ef&&o instanceof ef?vs(r.Ae,o.Ae):r instanceof tf&&o instanceof tf})(i.transform,t.transform)}class vR{constructor(t,e){this.version=t,this.transformResults=e}}class ms{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ms}static exists(t){return new ms(void 0,t)}static updateTime(t){return new ms(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Fh(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Nf{}function KT(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new bg(i.key,ms.none()):new Of(i.key,i.data,ms.none());{const e=i.data,r=pi.empty();let o=new dn(Rn.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Ua(i.key,r,new Qi(o.toArray()),ms.none())}}function ER(i,t,e){i instanceof Of?(function(o,u,c){const p=o.value.clone(),m=L1(o.fieldTransforms,u,c.transformResults);p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,t,e):i instanceof Ua?(function(o,u,c){if(!Fh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const p=L1(o.fieldTransforms,u,c.transformResults),m=u.data;m.setAll($T(o)),m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function xu(i,t,e,r){return i instanceof Of?(function(u,c,p,m){if(!Fh(u.precondition,c))return p;const g=u.value.clone(),S=z1(u.fieldTransforms,m,c);return g.setAll(S),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,t,e,r):i instanceof Ua?(function(u,c,p,m){if(!Fh(u.precondition,c))return p;const g=z1(u.fieldTransforms,m,c),S=c.data;return S.setAll($T(u)),S.setAll(g),c.convertToFoundDocument(c.version,S).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,t,e,r):(function(u,c,p){return Fh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p})(i,t,e)}function TR(i,t){let e=null;for(const r of i.fieldTransforms){const o=t.data.field(r.field),u=HT(r.transform,o||null);u!=null&&(e===null&&(e=pi.empty()),e.set(r.field,u))}return e||null}function V1(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ko(r,o,((u,c)=>yR(u,c)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Of extends Nf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ua extends Nf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function $T(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=i.data.field(e);t.set(e,r)}})),t}function L1(i,t,e){const r=new Map;ue(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let o=0;o<e.length;o++){const u=i[o],c=u.transform,p=t.data.field(u.field);r.set(u.field,_R(c,p,e[o]))}return r}function z1(i,t,e){const r=new Map;for(const o of i){const u=o.transform,c=e.data.field(o.field);r.set(o.field,gR(u,c,t))}return r}class bg extends Nf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SR extends Nf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bR{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&ER(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=xu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=xu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=FT();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=e.has(o.key)?null:p;const m=KT(c,p);m!==null&&r.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Mt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),$t())}isEqual(t){return this.batchId===t.batchId&&Ko(this.mutations,t.mutations,((e,r)=>V1(e,r)))&&Ko(this.baseMutations,t.baseMutations,((e,r)=>V1(e,r)))}}class xg{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){ue(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return hR})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new xg(t,e,r,o)}}class xR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AR{constructor(t,e){this.count=t,this.unchangedNames=e}}var nn,te;function CR(i){switch(i){case et.OK:return Dt(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Dt(15467,{code:i})}}function XT(i){if(i===void 0)return Ks("GRPC error has no .code"),et.UNKNOWN;switch(i){case nn.OK:return et.OK;case nn.CANCELLED:return et.CANCELLED;case nn.UNKNOWN:return et.UNKNOWN;case nn.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case nn.INTERNAL:return et.INTERNAL;case nn.UNAVAILABLE:return et.UNAVAILABLE;case nn.UNAUTHENTICATED:return et.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case nn.NOT_FOUND:return et.NOT_FOUND;case nn.ALREADY_EXISTS:return et.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return et.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case nn.ABORTED:return et.ABORTED;case nn.OUT_OF_RANGE:return et.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return et.UNIMPLEMENTED;case nn.DATA_LOSS:return et.DATA_LOSS;default:return Dt(39323,{code:i})}}(te=nn||(nn={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";function wR(){return new TextEncoder}const RR=new kr([4294967295,4294967295],0);function P1(i){const t=wR().encode(i),e=new fT;return e.update(t),new Uint8Array(e.digest())}function j1(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new kr([e,r],0),new kr([o,u],0)]}class Ag{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new yu(`Invalid padding: ${e}`);if(r<0)throw new yu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new yu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new yu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=kr.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(kr.fromNumber(r)));return o.compare(RR)===1&&(o=new kr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=P1(t),[r,o]=j1(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Ag(u,o,e);return r.forEach((p=>c.insert(p))),c}insert(t){if(this.ge===0)return;const e=P1(t),[r,o]=j1(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mf{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,$u.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Mf(Mt.min(),o,new rn(Kt),$s(),$t())}}class $u{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new $u(r,e,$t(),$t(),$t())}}class qh{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class WT{constructor(t,e){this.targetId=t,this.Ce=e}}class JT{constructor(t,e,r=In.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class U1{constructor(){this.ve=0,this.Fe=B1(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=$t(),e=$t(),r=$t();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:Dt(38017,{changeType:u})}})),new $u(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=B1()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IR{constructor(t){this.Ge=t,this.ze=new Map,this.je=$s(),this.Je=Mh(),this.He=Mh(),this.Ye=new rn(Kt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:Dt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(Dm(u))if(r===0){const c=new St(u.path);this.et(e,c,zn.newNoDocument(c,Mt.min()))}else ue(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const p=this.ut(t),m=p?this.ct(p,t,c):1;if(m!==0){this.it(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,p;try{c=Fr(r).toUint8Array()}catch(m){if(m instanceof xT)return Qo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new Ag(c,o,u)}catch(m){return Qo(m instanceof yu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),p=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(p)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const p=this.ot(c);if(p){if(u.current&&Dm(p.target)){const m=new St(p.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,zn.newNoDocument(m,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=$t();this.He.forEach(((u,c)=>{let p=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new Mf(t,e,this.Ye,this.je,r);return this.je=$s(),this.Je=Mh(),this.He=Mh(),this.Ye=new rn(Kt),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new U1,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new dn(Kt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new dn(Kt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||pt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new U1),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Mh(){return new rn(St.comparator)}function B1(){return new rn(St.comparator)}const DR={asc:"ASCENDING",desc:"DESCENDING"},NR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OR={and:"AND",or:"OR"};class MR{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Om(i,t){return i.useProto3Json||Af(t)?t:{value:t}}function nf(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ZT(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function kR(i,t){return nf(i,t.toTimestamp())}function gs(i){return ue(!!i,49232),Mt.fromTimestamp((function(e){const r=Br(e);return new De(r.seconds,r.nanos)})(i))}function Cg(i,t){return Mm(i,t).canonicalString()}function Mm(i,t){const e=(function(o){return new Ie(["projects",o.projectId,"databases",o.database])})(i).child("documents");return t===void 0?e:e.child(t)}function tS(i){const t=Ie.fromString(i);return ue(rS(t),10190,{key:t.toString()}),t}function km(i,t){return Cg(i.databaseId,t.path)}function am(i,t){const e=tS(t);if(e.get(1)!==i.databaseId.projectId)throw new _t(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new _t(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new St(nS(e))}function eS(i,t){return Cg(i.databaseId,t)}function VR(i){const t=tS(i);return t.length===4?Ie.emptyPath():nS(t)}function Vm(i){return new Ie(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function nS(i){return ue(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function F1(i,t,e){return{name:km(i,t),fields:e.value.mapValue.fields}}function LR(i,t){let e;if("targetChange"in t){t.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Dt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(g,S){return g.useProto3Json?(ue(S===void 0||typeof S=="string",58123),In.fromBase64String(S||"")):(ue(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),In.fromUint8Array(S||new Uint8Array))})(i,t.targetChange.resumeToken),c=t.targetChange.cause,p=c&&(function(g){const S=g.code===void 0?et.UNKNOWN:XT(g.code);return new _t(S,g.message||"")})(c);e=new JT(r,o,u,p||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=am(i,r.document.name),u=gs(r.document.updateTime),c=r.document.createTime?gs(r.document.createTime):Mt.min(),p=new pi({mapValue:{fields:r.document.fields}}),m=zn.newFoundDocument(o,u,c,p),g=r.targetIds||[],S=r.removedTargetIds||[];e=new qh(g,S,m.key,m)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=am(i,r.document),u=r.readTime?gs(r.readTime):Mt.min(),c=zn.newNoDocument(o,u),p=r.removedTargetIds||[];e=new qh([],p,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=am(i,r.document),u=r.removedTargetIds||[];e=new qh([],u,o,null)}else{if(!("filter"in t))return Dt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new AR(o,u),p=r.targetId;e=new WT(p,c)}}return e}function zR(i,t){let e;if(t instanceof Of)e={update:F1(i,t.key,t.value)};else if(t instanceof bg)e={delete:km(i,t.key)};else if(t instanceof Ua)e={update:F1(i,t.key,t.data),updateMask:YR(t.fieldMask)};else{if(!(t instanceof SR))return Dt(16599,{Vt:t.type});e={verify:km(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const p=c.transform;if(p instanceof tf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof zu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Pu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ef)return{fieldPath:c.field.canonicalString(),increment:p.Ae};throw Dt(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:kR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Dt(27497)})(i,t.precondition)),e}function PR(i,t){return i&&i.length>0?(ue(t!==void 0,14353),i.map((e=>(function(o,u){let c=o.updateTime?gs(o.updateTime):gs(u);return c.isEqual(Mt.min())&&(c=gs(u)),new vR(c,o.transformResults||[])})(e,t)))):[]}function jR(i,t){return{documents:[eS(i,t.path)]}}function UR(i,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=eS(i,o);const u=(function(g){if(g.length!==0)return sS(Es.create(g,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(g){if(g.length!==0)return g.map((S=>(function(b){return{field:zo(b.field),direction:qR(b.dir)}})(S)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const p=Om(i,t.limit);return p!==null&&(e.structuredQuery.limit=p),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:o}}function BR(i){let t=VR(i.parent);const e=i.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){ue(r===1,65062);const S=e.from[0];S.allDescendants?o=S.collectionId:t=t.child(S.collectionId)}let u=[];e.where&&(u=(function(E){const b=iS(E);return b instanceof Es&&kT(b)?b.getFilters():[b]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((b=>(function(O){return new Zh(Po(O.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(b)))})(e.orderBy));let p=null;e.limit&&(p=(function(E){let b;return b=typeof E=="object"?E.value:E,Af(b)?null:b})(e.limit));let m=null;e.startAt&&(m=(function(E){const b=!!E.before,w=E.values||[];return new Jh(w,b)})(e.startAt));let g=null;return e.endAt&&(g=(function(E){const b=!E.before,w=E.values||[];return new Jh(w,b)})(e.endAt)),rR(t,o,c,u,p,"F",m,g)}function FR(i,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function iS(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Po(e.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(e.unaryFilter.field);return cn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Po(e.unaryFilter.field);return cn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Po(e.unaryFilter.field);return cn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}})(i):i.fieldFilter!==void 0?(function(e){return cn.create(Po(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return Es.create(e.compositeFilter.filters.map((r=>iS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}})(e.compositeFilter.op))})(i):Dt(30097,{filter:i})}function qR(i){return DR[i]}function HR(i){return NR[i]}function GR(i){return OR[i]}function zo(i){return{fieldPath:i.canonicalString()}}function Po(i){return Rn.fromServerFormat(i.fieldPath)}function sS(i){return i instanceof cn?(function(e){if(e.op==="=="){if(I1(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NAN"}};if(R1(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(I1(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NOT_NAN"}};if(R1(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(e.field),op:HR(e.op),value:e.value}}})(i):i instanceof Es?(function(e){const r=e.getFilters().map((o=>sS(o)));return r.length===1?r[0]:{compositeFilter:{op:GR(e.op),filters:r}}})(i):Dt(54877,{filter:i})}function YR(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function rS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Nr{constructor(t,e,r,o,u=Mt.min(),c=Mt.min(),p=In.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(t){return new Nr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class QR{constructor(t){this.yt=t}}function KR(i){const t=BR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Nm(t,t.limit,"L"):t}class $R{constructor(){this.Cn=new XR}addToCollectionParentIndex(t,e){return this.Cn.add(e),tt.resolve()}getCollectionParents(t,e){return tt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return tt.resolve()}deleteFieldIndex(t,e){return tt.resolve()}deleteAllFieldIndexes(t){return tt.resolve()}createTargetIndexes(t,e){return tt.resolve()}getDocumentsMatchingTarget(t,e){return tt.resolve(null)}getIndexType(t,e){return tt.resolve(0)}getFieldIndexes(t,e){return tt.resolve([])}getNextCollectionGroupToUpdate(t){return tt.resolve(null)}getMinOffset(t,e){return tt.resolve(Ur.min())}getMinOffsetFromCollectionGroup(t,e){return tt.resolve(Ur.min())}updateCollectionGroup(t,e,r){return tt.resolve()}updateIndexEntries(t,e){return tt.resolve()}}class XR{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new dn(Ie.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new dn(Ie.comparator)).toArray()}}const q1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aS=41943040;class Zn{static withCacheSize(t){return new Zn(t,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(aS,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class Wo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Wo(0)}static cr(){return new Wo(-1)}}const H1="LruGarbageCollector",WR=1048576;function G1([i,t],[e,r]){const o=Kt(i,e);return o===0?Kt(t,r):o}class JR{constructor(t){this.Ir=t,this.buffer=new dn(G1),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();G1(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class ZR{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){pt(H1,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){rl(e)?pt(H1,"Ignoring IndexedDB error during garbage collection: ",e):await sl(e)}await this.Vr(3e5)}))}}class tI{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return tt.resolve(xf.ce);const r=new JR(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(q1)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q1):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,p,m,g;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(t,o)))).next((E=>(r=E,p=Date.now(),this.removeTargets(t,r,e)))).next((E=>(u=E,m=Date.now(),this.removeOrphanedDocuments(t,r)))).next((E=>(g=Date.now(),Vo()<=Jt.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-S}ms
	Determined least recently used ${o} in `+(p-c)+`ms
	Removed ${u} targets in `+(m-p)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-S}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function eI(i,t){return new tI(i,t)}class nI{constructor(){this.changes=new ja((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,zn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?tt.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class iI{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class sI{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&xu(r.mutation,o,Qi.empty(),De.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,$t()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=$t()){const o=Ca();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=_u();return u.forEach(((p,m)=>{c=c.insert(p,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Ca();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,$t())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,p)=>{e.set(c,p)}))}))}computeViews(t,e,r,o){let u=$s();const c=bu(),p=(function(){return bu()})();return e.forEach(((m,g)=>{const S=r.get(g.key);o.has(g.key)&&(S===void 0||S.mutation instanceof Ua)?u=u.insert(g.key,g):S!==void 0?(c.set(g.key,S.mutation.getFieldMask()),xu(S.mutation,g,S.mutation.getFieldMask(),De.now())):c.set(g.key,Qi.empty())})),this.recalculateAndSaveOverlays(t,u).next((m=>(m.forEach(((g,S)=>c.set(g,S))),e.forEach(((g,S)=>p.set(g,new iI(S,c.get(g)??null)))),p)))}recalculateAndSaveOverlays(t,e){const r=bu();let o=new rn(((c,p)=>c-p)),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const p of c)p.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let S=r.get(m)||Qi.empty();S=p.applyToLocalView(g,S),r.set(m,S);const E=(o.get(p.batchId)||$t()).add(m);o=o.insert(p.batchId,E)}))})).next((()=>{const c=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),g=m.key,S=m.value,E=FT();S.forEach((b=>{if(!u.has(b)){const w=KT(e.get(b),r.get(b));w!==null&&E.set(b,w),u=u.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return tt.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return St.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):aR(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):tt.resolve(Ca());let p=Mu,m=u;return c.next((g=>tt.forEach(g,((S,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(S)?tt.resolve():this.remoteDocumentCache.getEntry(t,S).next((b=>{m=m.insert(S,b)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,m,g,$t()))).next((S=>({batchId:p,changes:BT(S)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new St(e)).next((r=>{let o=_u();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=_u();return this.indexManager.getCollectionParents(t,u).next((p=>tt.forEach(p,(m=>{const g=(function(E,b){return new wf(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,m.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next((S=>{S.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((m,g)=>{const S=g.getKey();c.get(S)===null&&(c=c.insert(S,zn.newInvalidDocument(S)))}));let p=_u();return c.forEach(((m,g)=>{const S=u.get(m);S!==void 0&&xu(S.mutation,g,Qi.empty(),De.now()),If(e,g)&&(p=p.insert(m,g))})),p}))}}class rI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return tt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:gs(o.createTime)}})(e)),tt.resolve()}getNamedQuery(t,e){return tt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:KR(o.bundledQuery),readTime:gs(o.readTime)}})(e)),tt.resolve()}}class aI{constructor(){this.overlays=new rn(St.comparator),this.qr=new Map}getOverlay(t,e){return tt.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ca();return tt.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),tt.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),tt.resolve()}getOverlaysForCollection(t,e,r){const o=Ca(),u=e.length+1,c=new St(e.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const m=p.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===u&&m.largestBatchId>r&&o.set(m.getKey(),m)}return tt.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new rn(((g,S)=>g-S));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>r){let S=u.get(g.largestBatchId);S===null&&(S=Ca(),u=u.insert(g.largestBatchId,S)),S.set(g.getKey(),g)}}const p=Ca(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,S)=>p.set(g,S))),!(p.size()>=o)););return tt.resolve(p)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new xR(e,r));let u=this.qr.get(e);u===void 0&&(u=$t(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}class oI{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(t){return tt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,tt.resolve()}}class wg{constructor(){this.Qr=new dn(vn.$r),this.Ur=new dn(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new vn(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new vn(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new St(new Ie([])),r=new vn(e,t),o=new vn(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new St(new Ie([])),r=new vn(e,t),o=new vn(e,t+1);let u=$t();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new vn(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class vn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return St.comparator(t.key,e.key)||Kt(t.Yr,e.Yr)}static Kr(t,e){return Kt(t.Yr,e.Yr)||St.comparator(t.key,e.key)}}class lI{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new dn(vn.$r)}checkEmpty(t){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new bR(u,e,r,o);this.mutationQueue.push(c);for(const p of o)this.Zr=this.Zr.add(new vn(p.key,u)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return tt.resolve(c)}lookupMutationBatch(t,e){return tt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return tt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?gg:this.tr-1)}getAllMutationBatches(t){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new vn(e,0),o=new vn(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const p=this.Xr(c.Yr);u.push(p)})),tt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new dn(Kt);return e.forEach((o=>{const u=new vn(o,0),c=new vn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(p=>{r=r.add(p.Yr)}))})),tt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;St.isDocumentKey(u)||(u=u.child(""));const c=new vn(new St(u),0);let p=new dn(Kt);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(p=p.add(m.Yr)),!0)}),c),tt.resolve(this.ti(p))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){ue(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return tt.forEach(e.mutations,(o=>{const u=new vn(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new vn(e,0),o=this.Zr.firstAfterOrEqual(r);return tt.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,tt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class uI{constructor(t){this.ri=t,this.docs=(function(){return new rn(St.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return tt.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(e))}getEntries(t,e){let r=$s();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():zn.newInvalidDocument(o))})),tt.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=$s();const c=e.path,p=new St(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:g,value:{document:S}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||z2(L2(S),r)<=0||(o.has(S.key)||If(e,S))&&(u=u.insert(S.key,S.mutableCopy()))}return tt.resolve(u)}getAllFromCollectionGroup(t,e,r,o){Dt(9500)}ii(t,e){return tt.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new cI(this)}getSize(t){return tt.resolve(this.size)}}class cI extends nI{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),tt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class hI{constructor(t){this.persistence=t,this.si=new ja((e=>vg(e)),Eg),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.oi=0,this._i=new wg,this.targetCount=0,this.ai=Wo.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),tt.resolve()}getLastRemoteSnapshotVersion(t){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return tt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),tt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Wo(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,tt.resolve()}updateTargetData(t,e){return this.Pr(e),tt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,tt.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,p)=>{p.sequenceNumber<=e&&r.get(p.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,p.targetId)),o++)})),tt.waitFor(u).next((()=>o))}getTargetCount(t){return tt.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return tt.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),tt.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),tt.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),tt.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return tt.resolve(r)}containsKey(t,e){return tt.resolve(this._i.containsKey(e))}}class oS{constructor(t,e){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new oI,this.referenceDelegate=t(this),this.Pi=new hI(this),this.indexManager=new $R,this.remoteDocumentCache=(function(o){return new uI(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new QR(e),this.Ii=new rI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new aI,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new lI(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){pt("MemoryPersistence","Starting transaction:",t);const o=new fI(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return tt.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class fI extends j2{constructor(t){super(),this.currentSequenceNumber=t}}class Rg{constructor(t){this.persistence=t,this.Ri=new wg,this.Vi=null}static mi(t){return new Rg(t)}get fi(){if(this.Vi)return this.Vi;throw Dt(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),tt.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),tt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),tt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.fi,(r=>{const o=St.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,Mt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return tt.or([()=>tt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class sf{constructor(t,e){this.persistence=t,this.pi=new ja((r=>F2(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=eI(this,e)}static mi(t,e){return new sf(t,e)}Ei(){}di(t){return tt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return tt.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?tt.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((p=>{p||(r++,u.removeEntry(c,Mt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),tt.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),tt.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),tt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),tt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Uh(t.data.value)),e}br(t,e,r){return tt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return tt.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Ig{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=$t(),o=$t();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ig(t,e.fromCache,r,o)}}class dI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class pI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rw()?8:U2(iT())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new dI;return this.Ss(t,e,c).next((p=>{if(u.result=p,this.Vs)return this.bs(t,e,c,p.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(Vo()<=Jt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",Lo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),tt.resolve()):(Vo()<=Jt.DEBUG&&pt("QueryEngine","Query:",Lo(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Vo()<=Jt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",Lo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ps(e))):tt.resolve())}ys(t,e){if(M1(e))return tt.resolve(null);let r=ps(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=Nm(e,null,"F"),r=ps(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=$t(...u);return this.ps.getDocuments(t,c).next((p=>this.indexManager.getMinOffset(t,r).next((m=>{const g=this.Ds(e,p);return this.Cs(e,g,c,m.readTime)?this.ys(t,Nm(e,null,"F")):this.vs(t,g,e,m)}))))})))))}ws(t,e,r,o){return M1(e)||o.isEqual(Mt.min())?tt.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?tt.resolve(null):(Vo()<=Jt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(e)),this.vs(t,c,e,V2(o,Mu)).next((p=>p)))}))}Ds(t,e){let r=new dn(jT(t));return e.forEach(((o,u)=>{If(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return Vo()<=Jt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",Lo(e)),this.ps.getDocumentsMatchingQuery(t,e,Ur.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const Dg="LocalStore",mI=3e8;class gI{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new rn(Kt),this.xs=new ja((u=>vg(u)),Eg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new sI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function _I(i,t,e,r){return new gI(i,t,e,r)}async function lS(i,t){const e=Lt(i);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],p=[];let m=$t();for(const g of o){c.push(g.batchId);for(const S of g.mutations)m=m.add(S.key)}for(const g of u){p.push(g.batchId);for(const S of g.mutations)m=m.add(S.key)}return e.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:p})))}))}))}function yI(i,t){const e=Lt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,m,g,S){const E=g.batch,b=E.keys();let w=tt.resolve();return b.forEach((O=>{w=w.next((()=>S.getEntry(m,O))).next((Q=>{const U=g.docVersions.get(O);ue(U!==null,48541),Q.version.compareTo(U)<0&&(E.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),S.addEntry(Q)))}))})),w.next((()=>p.mutationQueue.removeMutationBatch(m,E)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let m=$t();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(m=m.add(p.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function uS(i){const t=Lt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function vI(i,t){const e=Lt(i),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const p=[];t.targetChanges.forEach(((S,E)=>{const b=o.get(E);if(!b)return;p.push(e.Pi.removeMatchingKeys(u,S.removedDocuments,E).next((()=>e.Pi.addMatchingKeys(u,S.addedDocuments,E))));let w=b.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?w=w.withResumeToken(In.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):S.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(S.resumeToken,r)),o=o.insert(E,w),(function(Q,U,ht){return Q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=mI?!0:ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0})(b,w,S)&&p.push(e.Pi.updateTargetData(u,w))}));let m=$s(),g=$t();if(t.documentUpdates.forEach((S=>{t.resolvedLimboDocuments.has(S)&&p.push(e.persistence.referenceDelegate.updateLimboDocument(u,S))})),p.push(EI(u,c,t.documentUpdates).next((S=>{m=S.ks,g=S.qs}))),!r.isEqual(Mt.min())){const S=e.Pi.getLastRemoteSnapshotVersion(u).next((E=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(S)}return tt.waitFor(p).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,m,g))).next((()=>m))})).then((u=>(e.Ms=o,u)))}function EI(i,t,e){let r=$t(),o=$t();return e.forEach((u=>r=r.add(u))),t.getEntries(i,r).next((u=>{let c=$s();return e.forEach(((p,m)=>{const g=u.get(p);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Mt.min())?(t.removeEntry(p,m.readTime),c=c.insert(p,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(p,m)):pt(Dg,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:o}}))}function TI(i,t){const e=Lt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=gg),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function SI(i,t){const e=Lt(i);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,tt.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new Nr(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Lm(i,t,e){const r=Lt(i),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!rl(c))throw c;pt(Dg,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function Y1(i,t,e){const r=Lt(i);let o=Mt.min(),u=$t();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,S){const E=Lt(m),b=E.xs.get(S);return b!==void 0?tt.resolve(E.Ms.get(b)):E.Pi.getTargetData(g,S)})(r,c,ps(t)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,p.targetId).next((m=>{u=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:Mt.min(),e?u:$t()))).next((p=>(bI(r,lR(t),p),{documents:p,Qs:u})))))}function bI(i,t,e){let r=i.Os.get(t)||Mt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(t,r)}class Q1{constructor(){this.activeTargetIds=pR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xI{constructor(){this.Mo=new Q1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Q1,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class AI{Oo(t){}shutdown(){}}const K1="ConnectivityMonitor";class $1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pt(K1,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){pt(K1,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let kh=null;function zm(){return kh===null?kh=(function(){return 268435456+Math.round(2147483648*Math.random())})():kh++,"0x"+kh.toString(16)}const om="RestConnection",CI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Xh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=zm(),p=this.zo(t,e.toUriEncodedString());pt(om,`Sending RPC '${t}' ${c}:`,p,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,u);const{host:g}=new URL(p),S=za(g);return this.Jo(t,p,m,r,S).then((E=>(pt(om,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw Qo(om,`RPC '${t}' ${c} failed with error: `,E,"url: ",p,"request:",r),E}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=CI[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}class RI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Vn="WebChannelConnection";class II extends wI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=zm();return new Promise(((p,m)=>{const g=new dT;g.setWithCredentials(!0),g.listenOnce(pT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case jh.NO_ERROR:const E=g.getResponseJson();pt(Vn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),p(E);break;case jh.TIMEOUT:pt(Vn,`RPC '${t}' ${c} timed out`),m(new _t(et.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const b=g.getStatus();if(pt(Vn,`RPC '${t}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w?.error;if(O&&O.status&&O.message){const Q=(function(ht){const ft=ht.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(ft)>=0?ft:et.UNKNOWN})(O.status);m(new _t(Q,O.message))}else m(new _t(et.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new _t(et.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{pt(Vn,`RPC '${t}' ${c} completed.`)}}));const S=JSON.stringify(o);pt(Vn,`RPC '${t}' ${c} sending request:`,o),g.send(e,"POST",S,r,15)}))}T_(t,e,r){const o=zm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=_T(),p=gT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,e,r),m.encodeInitMessageHeaders=!0;const S=u.join("");pt(Vn,`Creating RPC '${t}' stream ${o}: ${S}`,m);const E=c.createWebChannel(S,m);this.I_(E);let b=!1,w=!1;const O=new RI({Yo:U=>{w?pt(Vn,`Not sending because RPC '${t}' stream ${o} is closed:`,U):(b||(pt(Vn,`Opening RPC '${t}' stream ${o} transport.`),E.open(),b=!0),pt(Vn,`RPC '${t}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),Q=(U,ht,ft)=>{U.listen(ht,(lt=>{try{ft(lt)}catch(bt){setTimeout((()=>{throw bt}),0)}}))};return Q(E,gu.EventType.OPEN,(()=>{w||(pt(Vn,`RPC '${t}' stream ${o} transport opened.`),O.o_())})),Q(E,gu.EventType.CLOSE,(()=>{w||(w=!0,pt(Vn,`RPC '${t}' stream ${o} transport closed`),O.a_(),this.E_(E))})),Q(E,gu.EventType.ERROR,(U=>{w||(w=!0,Qo(Vn,`RPC '${t}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),O.a_(new _t(et.UNAVAILABLE,"The operation could not be completed")))})),Q(E,gu.EventType.MESSAGE,(U=>{if(!w){const ht=U.data[0];ue(!!ht,16349);const ft=ht,lt=ft?.error||ft[0]?.error;if(lt){pt(Vn,`RPC '${t}' stream ${o} received error:`,lt);const bt=lt.status;let jt=(function(C){const N=nn[C];if(N!==void 0)return XT(N)})(bt),At=lt.message;jt===void 0&&(jt=et.INTERNAL,At="Unknown error status: "+bt+" with message "+lt.message),w=!0,O.a_(new _t(jt,At)),E.close()}else pt(Vn,`RPC '${t}' stream ${o} received:`,ht),O.u_(ht)}})),Q(p,mT.STAT_EVENT,(U=>{U.stat===xm.PROXY?pt(Vn,`RPC '${t}' stream ${o} detected buffering proxy`):U.stat===xm.NOPROXY&&pt(Vn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function lm(){return typeof document<"u"?document:null}function kf(i){return new MR(i,!0)}class cS{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&pt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const X1="PersistentStream";class hS{constructor(t,e,r,o,u,c,p,m){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cS(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===et.RESOURCE_EXHAUSTED?(Ks(e.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new _t(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return pt(X1,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(pt(X1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DI extends hS{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=LR(this.serializer,t),r=(function(u){if(!("targetChange"in u))return Mt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Mt.min():c.readTime?gs(c.readTime):Mt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=Vm(this.serializer),e.addTarget=(function(u,c){let p;const m=c.target;if(p=Dm(m)?{documents:jR(u,m)}:{query:UR(u,m).ft},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=ZT(u,c.resumeToken);const g=Om(u,c.expectedCount);g!==null&&(p.expectedCount=g)}else if(c.snapshotVersion.compareTo(Mt.min())>0){p.readTime=nf(u,c.snapshotVersion.toTimestamp());const g=Om(u,c.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,t);const r=FR(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=Vm(this.serializer),e.removeTarget=t,this.q_(e)}}class NI extends hS{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return ue(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ue(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ue(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=PR(t.writeResults,t.commitTime),r=gs(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=Vm(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>zR(this.serializer,r)))};this.q_(e)}}class OI{}class MI extends OI{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _t(et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,Mm(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _t(et.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Ho(t,Mm(e,r),o,c,p,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _t(et.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kI{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(e),this.aa=!1):pt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Oa="RemoteStore";class VI{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ba(this)&&(pt(Oa,"Restarting streams for network reachability change."),await(async function(m){const g=Lt(m);g.Ea.add(4),await Xu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Vf(g)})(this))}))})),this.Ra=new kI(r,o)}}async function Vf(i){if(Ba(i))for(const t of i.da)await t(!0)}async function Xu(i){for(const t of i.da)await t(!1)}function fS(i,t){const e=Lt(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),kg(e)?Mg(e):al(e).O_()&&Og(e,t))}function Ng(i,t){const e=Lt(i),r=al(e);e.Ia.delete(t),r.O_()&&dS(e,t),e.Ia.size===0&&(r.O_()?r.L_():Ba(e)&&e.Ra.set("Unknown"))}function Og(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}al(i).Y_(t)}function dS(i,t){i.Va.Ue(t),al(i).Z_(t)}function Mg(i){i.Va=new IR({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),al(i).start(),i.Ra.ua()}function kg(i){return Ba(i)&&!al(i).x_()&&i.Ia.size>0}function Ba(i){return Lt(i).Ea.size===0}function pS(i){i.Va=void 0}async function LI(i){i.Ra.set("Online")}async function zI(i){i.Ia.forEach(((t,e)=>{Og(i,t)}))}async function PI(i,t){pS(i),kg(i)?(i.Ra.ha(t),Mg(i)):i.Ra.set("Unknown")}async function jI(i,t,e){if(i.Ra.set("Online"),t instanceof JT&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,c),o.Ia.delete(p),o.Va.removeTarget(p))})(i,t)}catch(r){pt(Oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await rf(i,r)}else if(t instanceof qh?i.Va.Ze(t):t instanceof WT?i.Va.st(t):i.Va.tt(t),!e.isEqual(Mt.min()))try{const r=await uS(i.localStore);e.compareTo(r)>=0&&await(function(u,c){const p=u.Va.Tt(c);return p.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const S=u.Ia.get(g);S&&u.Ia.set(g,S.withResumeToken(m.resumeToken,c))}})),p.targetMismatches.forEach(((m,g)=>{const S=u.Ia.get(m);if(!S)return;u.Ia.set(m,S.withResumeToken(In.EMPTY_BYTE_STRING,S.snapshotVersion)),dS(u,m);const E=new Nr(S.target,m,g,S.sequenceNumber);Og(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(i,e)}catch(r){pt(Oa,"Failed to raise snapshot:",r),await rf(i,r)}}async function rf(i,t,e){if(!rl(t))throw t;i.Ea.add(1),await Xu(i),i.Ra.set("Offline"),e||(e=()=>uS(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{pt(Oa,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await Vf(i)}))}function mS(i,t){return t().catch((e=>rf(i,e,t)))}async function Lf(i){const t=Lt(i),e=Hr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:gg;for(;UI(t);)try{const o=await TI(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,BI(t,o)}catch(o){await rf(t,o)}gS(t)&&_S(t)}function UI(i){return Ba(i)&&i.Ta.length<10}function BI(i,t){i.Ta.push(t);const e=Hr(i);e.O_()&&e.X_&&e.ea(t.mutations)}function gS(i){return Ba(i)&&!Hr(i).x_()&&i.Ta.length>0}function _S(i){Hr(i).start()}async function FI(i){Hr(i).ra()}async function qI(i){const t=Hr(i);for(const e of i.Ta)t.ea(e.mutations)}async function HI(i,t,e){const r=i.Ta.shift(),o=xg.from(r,t,e);await mS(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Lf(i)}async function GI(i,t){t&&Hr(i).X_&&await(async function(r,o){if((function(c){return CR(c)&&c!==et.ABORTED})(o.code)){const u=r.Ta.shift();Hr(r).B_(),await mS(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Lf(r)}})(i,t),gS(i)&&_S(i)}async function W1(i,t){const e=Lt(i);e.asyncQueue.verifyOperationInProgress(),pt(Oa,"RemoteStore received new credentials");const r=Ba(e);e.Ea.add(3),await Xu(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Vf(e)}async function YI(i,t){const e=Lt(i);t?(e.Ea.delete(2),await Vf(e)):t||(e.Ea.add(2),await Xu(e),e.Ra.set("Unknown"))}function al(i){return i.ma||(i.ma=(function(e,r,o){const u=Lt(e);return u.sa(),new DI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:LI.bind(null,i),t_:zI.bind(null,i),r_:PI.bind(null,i),H_:jI.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),kg(i)?Mg(i):i.Ra.set("Unknown")):(await i.ma.stop(),pS(i))}))),i.ma}function Hr(i){return i.fa||(i.fa=(function(e,r,o){const u=Lt(e);return u.sa(),new NI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:FI.bind(null,i),r_:GI.bind(null,i),ta:qI.bind(null,i),na:HI.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await Lf(i)):(await i.fa.stop(),i.Ta.length>0&&(pt(Oa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Vg{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,p=new Vg(t,e,c,o,u);return p.start(r),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lg(i,t){if(Ks("AsyncQueue",`${t}: ${i}`),rl(i))return new _t(et.UNAVAILABLE,`${t}: ${i}`);throw i}class Bo{static emptySet(t){return new Bo(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||St.comparator(e.key,r.key):(e,r)=>St.comparator(e.key,r.key),this.keyedMap=_u(),this.sortedSet=new rn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Bo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Bo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class J1{constructor(){this.ga=new rn(St.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Dt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class Jo{constructor(t,e,r,o,u,c,p,m,g){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((p=>{c.push({type:0,doc:p})})),new Jo(t,e,Bo.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}class QI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class KI{constructor(){this.queries=Z1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=Lt(e),u=o.queries;o.queries=Z1(),u.forEach(((c,p)=>{for(const m of p.Sa)m.onError(r)}))})(this,new _t(et.ABORTED,"Firestore shutting down"))}}function Z1(){return new ja((i=>PT(i)),Rf)}async function yS(i,t){const e=Lt(i);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new QI,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const p=Lg(c,`Initialization of query '${Lo(t.query)}' failed`);return void t.onError(p)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&zg(e)}async function vS(i,t){const e=Lt(i),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function $I(i,t){const e=Lt(i);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const p of c.Sa)p.Fa(o)&&(r=!0);c.wa=o}}r&&zg(e)}function XI(i,t,e){const r=Lt(i),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function zg(i){i.Ca.forEach((t=>{t.next()}))}var Pm,tE;(tE=Pm||(Pm={})).Ma="default",tE.Cache="cache";class ES{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Jo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Jo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Pm.Cache}}class TS{constructor(t){this.key=t}}class SS{constructor(t){this.key=t}}class WI{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$t(),this.mutatedKeys=$t(),this.eu=jT(t),this.tu=new Bo(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new J1,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((S,E)=>{const b=o.get(S),w=If(this.query,E)?E:null,O=!!b&&this.mutatedKeys.has(b.key),Q=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;b&&w?b.data.isEqual(w.data)?O!==Q&&(r.track({type:3,doc:w}),U=!0):this.su(b,w)||(r.track({type:2,doc:w}),U=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(p=!0)):!b&&w?(r.track({type:0,doc:w}),U=!0):b&&!w&&(r.track({type:1,doc:b}),U=!0,(m||g)&&(p=!0)),U&&(w?(c=c.add(w),u=Q?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const S=this.query.limitType==="F"?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{tu:c,iu:r,Cs:p,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((S,E)=>(function(w,O){const Q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Rt:U})}};return Q(w)-Q(O)})(S.type,E.type)||this.eu(S.doc,E.doc))),this.ou(r),o=o??!1;const p=e&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Jo(this.query,t.tu,u,c,t.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new J1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=$t(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new SS(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new TS(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=$t();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pg="SyncEngine";class JI{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class ZI{constructor(t){this.key=t,this.hu=!1}}class tD{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ja((p=>PT(p)),Rf),this.Iu=new Map,this.Eu=new Set,this.du=new rn(St.comparator),this.Au=new Map,this.Ru=new wg,this.Vu={},this.mu=new Map,this.fu=Wo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eD(i,t,e=!0){const r=RS(i);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await bS(r,t,e,!0),o}async function nD(i,t){const e=RS(i);await bS(e,t,!0,!1)}async function bS(i,t,e,r){const o=await SI(i.localStore,ps(t)),u=o.targetId,c=i.sharedClientState.addLocalQueryTarget(u,e);let p;return r&&(p=await iD(i,t,u,c==="current",o.resumeToken)),i.isPrimaryClient&&e&&fS(i.remoteStore,o),p}async function iD(i,t,e,r,o){i.pu=(E,b,w)=>(async function(Q,U,ht,ft){let lt=U.view.ru(ht);lt.Cs&&(lt=await Y1(Q.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,lt))));const bt=ft&&ft.targetChanges.get(U.targetId),jt=ft&&ft.targetMismatches.get(U.targetId)!=null,At=U.view.applyChanges(lt,Q.isPrimaryClient,bt,jt);return nE(Q,U.targetId,At.au),At.snapshot})(i,E,b,w);const u=await Y1(i.localStore,t,!0),c=new WI(t,u.Qs),p=c.ru(u.documents),m=$u.createSynthesizedTargetChangeForCurrentChange(e,r&&i.onlineState!=="Offline",o),g=c.applyChanges(p,i.isPrimaryClient,m);nE(i,e,g.au);const S=new JI(t,e,c);return i.Tu.set(t,S),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),g.snapshot}async function sD(i,t,e){const r=Lt(i),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!Rf(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Ng(r.remoteStore,o.targetId),jm(r,o.targetId)})).catch(sl)):(jm(r,o.targetId),await Lm(r.localStore,o.targetId,!0))}async function rD(i,t){const e=Lt(i),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Ng(e.remoteStore,r.targetId))}async function aD(i,t,e){const r=dD(i);try{const o=await(function(c,p){const m=Lt(c),g=De.now(),S=p.reduce(((w,O)=>w.add(O.key)),$t());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=$s(),Q=$t();return m.Ns.getEntries(w,S).next((U=>{O=U,O.forEach(((ht,ft)=>{ft.isValidDocument()||(Q=Q.add(ht))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,O))).next((U=>{E=U;const ht=[];for(const ft of p){const lt=TR(ft,E.get(ft.key).overlayedDocument);lt!=null&&ht.push(new Ua(ft.key,lt,NT(lt.value.mapValue),ms.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,ht,p)})).next((U=>{b=U;const ht=U.applyToLocalDocumentSet(E,Q);return m.documentOverlayCache.saveOverlays(w,U.batchId,ht)}))})).then((()=>({batchId:b.batchId,changes:BT(E)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,p,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new rn(Kt)),g=g.insert(p,m),c.Vu[c.currentUser.toKey()]=g})(r,o.batchId,e),await Wu(r,o.changes),await Lf(r.remoteStore)}catch(o){const u=Lg(o,"Failed to persist write");e.reject(u)}}async function xS(i,t){const e=Lt(i);try{const r=await vI(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ue(c.hu,14607):o.removedDocuments.size>0&&(ue(c.hu,42227),c.hu=!1))})),await Wu(e,r,t)}catch(r){await sl(r)}}function eE(i,t,e){const r=Lt(i);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const p=c.view.va(t);p.snapshot&&o.push(p.snapshot)})),(function(c,p){const m=Lt(c);m.onlineState=p;let g=!1;m.queries.forEach(((S,E)=>{for(const b of E.Sa)b.va(p)&&(g=!0)})),g&&zg(m)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function oD(i,t,e){const r=Lt(i);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new rn(St.comparator);c=c.insert(u,zn.newNoDocument(u,Mt.min()));const p=$t().add(u),m=new Mf(Mt.min(),new Map,new rn(Kt),c,p);await xS(r,m),r.du=r.du.remove(u),r.Au.delete(t),jg(r)}else await Lm(r.localStore,t,!1).then((()=>jm(r,t,e))).catch(sl)}async function lD(i,t){const e=Lt(i),r=t.batch.batchId;try{const o=await yI(e.localStore,t);CS(e,r,null),AS(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Wu(e,o)}catch(o){await sl(o)}}async function uD(i,t,e){const r=Lt(i);try{const o=await(function(c,p){const m=Lt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let S;return m.mutationQueue.lookupMutationBatch(g,p).next((E=>(ue(E!==null,37113),S=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,S,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,S))).next((()=>m.localDocuments.getDocuments(g,S)))}))})(r.localStore,t);CS(r,t,e),AS(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Wu(r,o)}catch(o){await sl(o)}}function AS(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function CS(i,t,e){const r=Lt(i);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function jm(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const r of i.Iu.get(t))i.Tu.delete(r),e&&i.Pu.yu(r,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((r=>{i.Ru.containsKey(r)||wS(i,r)}))}function wS(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(Ng(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),jg(i))}function nE(i,t,e){for(const r of e)r instanceof TS?(i.Ru.addReference(r.key,t),cD(i,r)):r instanceof SS?(pt(Pg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,t),i.Ru.containsKey(r.key)||wS(i,r.key)):Dt(19791,{wu:r})}function cD(i,t){const e=t.key,r=e.path.canonicalString();i.du.get(e)||i.Eu.has(r)||(pt(Pg,"New document in limbo: "+e),i.Eu.add(r),jg(i))}function jg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new St(Ie.fromString(t)),r=i.fu.next();i.Au.set(r,new ZI(e)),i.du=i.du.insert(e,r),fS(i.remoteStore,new Nr(ps(Tg(e.path)),r,"TargetPurposeLimboResolution",xf.ce))}}async function Wu(i,t,e){const r=Lt(i),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,m)=>{c.push(r.pu(m,t,e).then((g=>{if((g||e)&&r.isPrimaryClient){const S=g?!g.fromCache:e?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,S?"current":"not-current")}if(g){o.push(g);const S=Ig.As(m.targetId,g);u.push(S)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(m,g){const S=Lt(m);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>tt.forEach(g,(b=>tt.forEach(b.Es,(w=>S.persistence.referenceDelegate.addReference(E,b.targetId,w))).next((()=>tt.forEach(b.ds,(w=>S.persistence.referenceDelegate.removeReference(E,b.targetId,w)))))))))}catch(E){if(!rl(E))throw E;pt(Dg,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const w=S.Ms.get(b),O=w.snapshotVersion,Q=w.withLastLimboFreeSnapshotVersion(O);S.Ms=S.Ms.insert(b,Q)}}})(r.localStore,u))}async function hD(i,t){const e=Lt(i);if(!e.currentUser.isEqual(t)){pt(Pg,"User change. New user:",t.toKey());const r=await lS(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((p=>{p.forEach((m=>{m.reject(new _t(et.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Wu(e,r.Ls)}}function fD(i,t){const e=Lt(i),r=e.Au.get(t);if(r&&r.hu)return $t().add(r.key);{let o=$t();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const p=e.Tu.get(c);o=o.unionWith(p.view.nu)}return o}}function RS(i){const t=Lt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=xS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=fD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oD.bind(null,t),t.Pu.H_=$I.bind(null,t.eventManager),t.Pu.yu=XI.bind(null,t.eventManager),t}function dD(i){const t=Lt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uD.bind(null,t),t}class af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=kf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return _I(this.persistence,new pI,t.initialUser,this.serializer)}Cu(t){return new oS(Rg.mi,this.serializer)}Du(t){return new xI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}af.provider={build:()=>new af};class pD extends af{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ue(this.persistence.referenceDelegate instanceof sf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZR(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new oS((r=>sf.mi(r,e)),this.serializer)}}class Um{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hD.bind(null,this.syncEngine),await YI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new KI})()}createDatastore(t){const e=kf(t.databaseInfo.databaseId),r=(function(u){return new II(u)})(t.databaseInfo);return(function(u,c,p,m){return new MI(u,c,p,m)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,p){return new VI(r,o,u,c,p)})(this.localStore,this.datastore,t.asyncQueue,(e=>eE(this.syncEngine,e,0)),(function(){return $1.v()?new $1:new AI})())}createSyncEngine(t,e){return(function(o,u,c,p,m,g,S){const E=new tD(o,u,c,p,m,g);return S&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=Lt(e);pt(Oa,"RemoteStore shutting down."),r.Ea.add(5),await Xu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Um.provider={build:()=>new Um};class IS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ks("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const Gr="FirestoreClient";class mD{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=Ln.UNAUTHENTICATED,this.clientId=pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{pt(Gr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pt(Gr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Lg(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function um(i,t){i.asyncQueue.verifyOperationInProgress(),pt(Gr,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let r=e.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await lS(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function iE(i,t){i.asyncQueue.verifyOperationInProgress();const e=await gD(i);pt(Gr,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((r=>W1(t.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>W1(t.remoteStore,o))),i._onlineComponents=t}async function gD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){pt(Gr,"Using user provided OfflineComponentProvider");try{await um(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===et.FAILED_PRECONDITION||o.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Qo("Error using user provided cache. Falling back to memory cache: "+e),await um(i,new af)}}else pt(Gr,"Using default OfflineComponentProvider"),await um(i,new pD(void 0));return i._offlineComponents}async function DS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(pt(Gr,"Using user provided OnlineComponentProvider"),await iE(i,i._uninitializedComponentsProvider._online)):(pt(Gr,"Using default OnlineComponentProvider"),await iE(i,new Um))),i._onlineComponents}function _D(i){return DS(i).then((t=>t.syncEngine))}async function NS(i){const t=await DS(i),e=t.eventManager;return e.onListen=eD.bind(null,t.syncEngine),e.onUnlisten=sD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=nD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=rD.bind(null,t.syncEngine),e}function yD(i,t,e={}){const r=new Gs;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,p,m,g){const S=new IS({next:b=>{S.Nu(),c.enqueueAndForget((()=>vS(u,E)));const w=b.docs.has(p);!w&&b.fromCache?g.reject(new _t(et.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&b.fromCache&&m&&m.source==="server"?g.reject(new _t(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new ES(Tg(p.path),S,{includeMetadataChanges:!0,qa:!0});return yS(u,E)})(await NS(i),i.asyncQueue,t,e,r))),r.promise}function vD(i,t,e={}){const r=new Gs;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,p,m,g){const S=new IS({next:b=>{S.Nu(),c.enqueueAndForget((()=>vS(u,E))),b.fromCache&&m.source==="server"?g.reject(new _t(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new ES(p,S,{includeMetadataChanges:!0,qa:!0});return yS(u,E)})(await NS(i),i.asyncQueue,t,e,r))),r.promise}function OS(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const sE=new Map;const MS="firestore.googleapis.com",rE=!0;class aE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new _t(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MS,this.ssl=rE}else this.host=t.host,this.ssl=t.ssl??rE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=aS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<WR)throw new _t(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}k2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OS(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _t(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _t(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _t(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zf{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _t(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new _t(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new x2;switch(r.type){case"firstParty":return new R2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=sE.get(e);r&&(pt("ComponentProvider","Removing Datastore"),sE.delete(e),r.terminate())})(this),Promise.resolve()}}function ED(i,t,e,r={}){i=jr(i,zf);const o=za(t),u=i._getSettings(),c={...u,emulatorOptions:i._getEmulatorOptions()},p=`${t}:${e}`;o&&(sg(`https://${p}`),ag("Firestore",!0)),u.host!==MS&&u.host!==p&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:p,ssl:o,emulatorOptions:r};if(!Nu(m,c)&&(i._setSettings(m),r.mockUserToken)){let g,S;if(typeof r.mockUserToken=="string")g=r.mockUserToken,S=Ln.MOCK_USER;else{g=rg(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new _t(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ln(E)}i._authCredentials=new A2(new vT(g,S))}}class Pf{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Pf(this.firestore,t,this._query)}}class fn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fn(this.firestore,t,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Ku(e,fn._jsonSchema))return new fn(t,r||null,new St(Ie.fromString(e.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:sn("string",fn._jsonSchemaVersion),referencePath:sn("string")};class Lr extends Pf{constructor(t,e,r){super(t,e,Tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fn(this.firestore,null,new St(t))}withConverter(t){return new Lr(this.firestore,t,this._path)}}function of(i,t,...e){if(i=jn(i),ET("collection","path",t),i instanceof zf){const r=Ie.fromString(t,...e);return E1(r),new Lr(i,null,r)}{if(!(i instanceof fn||i instanceof Lr))throw new _t(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ie.fromString(t,...e));return E1(r),new Lr(i.firestore,null,r)}}function TD(i,t,...e){if(i=jn(i),arguments.length===1&&(t=pg.newId()),ET("doc","path",t),i instanceof zf){const r=Ie.fromString(t,...e);return v1(r),new fn(i,null,new St(r))}{if(!(i instanceof fn||i instanceof Lr))throw new _t(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ie.fromString(t,...e));return v1(r),new fn(i.firestore,i instanceof Lr?i.converter:null,new St(r))}}const oE="AsyncQueue";class lE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cS(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&pt(oE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=lm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=lm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Gs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!rl(t))throw t;pt(oE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",uE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=Vg.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Dt(47125,{Pc:uE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function uE(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class Ju extends zf{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new lE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lE(t),this._firestoreClient=void 0,await t}}}function Ug(i,t){const e=typeof i=="object"?i:fg(),r=typeof i=="string"?i:Xh,o=ug(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=ng("firestore");u&&ED(o,...u)}return o}function Bg(i){if(i._terminated)throw new _t(et.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||SD(i),i._firestoreClient}function SD(i){const t=i._freezeSettings(),e=(function(o,u,c,p){return new G2(o,u,c,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,OS(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new mD(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ni{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ni(In.fromBase64String(t))}catch(e){throw new _t(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ni(In.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ku(t,Ni._jsonSchema))return Ni.fromBase64String(t.bytes)}}Ni._jsonSchemaVersion="firestore/bytes/1.0",Ni._jsonSchema={type:sn("string",Ni._jsonSchemaVersion),bytes:sn("string")};class jf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new _t(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Fg{constructor(t){this._methodName=t}}class _s{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new _t(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _t(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_s._jsonSchemaVersion}}static fromJSON(t){if(Ku(t,_s._jsonSchema))return new _s(t.latitude,t.longitude)}}_s._jsonSchemaVersion="firestore/geoPoint/1.0",_s._jsonSchema={type:sn("string",_s._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};class ys{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ku(t,ys._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new ys(t.vectorValues);throw new _t(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:sn("string",ys._jsonSchemaVersion),vectorValues:sn("object")};const bD=/^__.*__$/;class kS{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Ua(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function VS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ac:i})}}class qg{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new qg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return lf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(VS(this.Ac)&&bD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class xD{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||kf(t)}Cc(t,e,r,o=!1){return new qg({Ac:t,methodName:e,Dc:r,path:Rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AD(i){const t=i._freezeSettings(),e=kf(i._databaseId);return new xD(i._databaseId,!!t.ignoreUndefinedProperties,e)}class Uf extends Fg{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Uf}}function CD(i,t,e,r){const o=i.Cc(1,t,e);zS("Data must be an object, but it was:",o,r);const u=[],c=pi.empty();$r(r,((m,g)=>{const S=Hg(t,m,e);g=jn(g);const E=o.yc(S);if(g instanceof Uf)u.push(S);else{const b=Bf(g,E);b!=null&&(u.push(S),c.set(S,b))}}));const p=new Qi(u);return new kS(c,p,o.fieldTransforms)}function wD(i,t,e,r,o,u){const c=i.Cc(1,t,e),p=[cE(t,r,e)],m=[o];if(u.length%2!=0)throw new _t(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)p.push(cE(t,u[b])),m.push(u[b+1]);const g=[],S=pi.empty();for(let b=p.length-1;b>=0;--b)if(!DD(g,p[b])){const w=p[b];let O=m[b];O=jn(O);const Q=c.yc(w);if(O instanceof Uf)g.push(w);else{const U=Bf(O,Q);U!=null&&(g.push(w),S.set(w,U))}}const E=new Qi(g);return new kS(S,E,c.fieldTransforms)}function Bf(i,t){if(LS(i=jn(i)))return zS("Unsupported field value:",t,i),RD(i,t);if(i instanceof Fg)return(function(r,o){if(!VS(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const p of r){let m=Bf(p,o.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),c++}return{arrayValue:{values:u}}})(i,t)}return(function(r,o){if((r=jn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=De.fromDate(r);return{timestampValue:nf(o.serializer,u)}}if(r instanceof De){const u=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nf(o.serializer,u)}}if(r instanceof _s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ni)return{bytesValue:ZT(o.serializer,r._byteString)};if(r instanceof fn){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Cg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ys)return(function(c,p){return{mapValue:{fields:{[IT]:{stringValue:DT},[Wh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Sg(p.serializer,g)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${mg(r)}`)})(i,t)}function RD(i,t){const e={};return bT(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(i,((r,o)=>{const u=Bf(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function LS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof De||i instanceof _s||i instanceof Ni||i instanceof fn||i instanceof Fg||i instanceof ys)}function zS(i,t,e){if(!LS(e)||!TT(e)){const r=mg(e);throw r==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+r)}}function cE(i,t,e){if((t=jn(t))instanceof jf)return t._internalPath;if(typeof t=="string")return Hg(i,t);throw lf("Field path arguments must be of type string or ",i,!1,void 0,e)}const ID=new RegExp("[~\\*/\\[\\]]");function Hg(i,t,e){if(t.search(ID)>=0)throw lf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new jf(...t.split("."))._internalPath}catch{throw lf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function lf(i,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let p=`Function ${t}() called with invalid data`;e&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(u||c)&&(m+=" (found",u&&(m+=` in field ${r}`),c&&(m+=` in document ${o}`),m+=")"),new _t(et.INVALID_ARGUMENT,p+i+m)}function DD(i,t){return i.some((e=>e.isEqual(t)))}class PS{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ND(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(jS("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class ND extends PS{data(){return super.data()}}function jS(i,t){return typeof t=="string"?Hg(i,t):t instanceof jf?t._internalPath:t._delegate._internalPath}function OD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new _t(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class MD{convertValue(t,e="none"){switch(qr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ge(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return $r(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){const e=t.fields?.[Wh].arrayValue?.values?.map((r=>Ge(r.doubleValue)));return new ys(e)}convertGeoPoint(t){return new _s(Ge(t.latitude),Ge(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Cf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ku(t));default:return null}}convertTimestamp(t){const e=Br(t);return new De(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ie.fromString(t);ue(rS(r),9688,{name:t});const o=new Vu(r.get(1),r.get(3)),u=new St(r.popFirst(5));return o.isEqual(e)||Ks(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}class vu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ra extends PS{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(jS("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Ra._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ra._jsonSchema={type:sn("string",Ra._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class Hh extends Ra{data(t={}){return super.data(t)}}class Fo{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new vu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new Hh(this._firestore,this._userDataWriter,r.key,r,new vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _t(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((p=>{const m=new Hh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new vu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const m=new Hh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new vu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,S=-1;return p.type!==0&&(g=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(c=c.add(p.doc),S=c.indexOf(p.doc.key)),{type:kD(p.type),doc:m,oldIndex:g,newIndex:S}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:i})}}function VD(i){i=jr(i,fn);const t=jr(i.firestore,Ju);return yD(Bg(t),i._key).then((e=>PD(t,i,e)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:sn("string",Fo._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};class US extends MD{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ni(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fn(this.firestore,null,e)}}function uf(i){i=jr(i,Pf);const t=jr(i.firestore,Ju),e=Bg(t),r=new US(t);return OD(i._query),vD(e,i._query).then((o=>new Fo(t,r,i,o)))}function LD(i,t,e,...r){i=jr(i,fn);const o=jr(i.firestore,Ju),u=AD(o);let c;return c=typeof(t=jn(t))=="string"||t instanceof jf?wD(u,"updateDoc",i._key,t,e,r):CD(u,"updateDoc",i._key,t),BS(o,[c.toMutation(i._key,ms.exists(!0))])}function zD(i){return BS(jr(i.firestore,Ju),[new bg(i._key,ms.none())])}function BS(i,t){return(function(r,o){const u=new Gs;return r.asyncQueue.enqueueAndForget((async()=>aD(await _D(r),o,u))),u.promise})(Bg(i),t)}function PD(i,t,e){const r=e.docs.get(t._key),o=new US(i);return new Ra(i,o,t._key,r,new vu(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(o){il=o})(hg),Yo(new Da("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),p=new Ju(new C2(r.getProvider("auth-internal")),new I2(c,r.getProvider("app-check-internal")),(function(g,S){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new _t(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(g.options.projectId,S)})(c,o),c);return u={useFetchStreams:e,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ds(m1,g1,t),ds(m1,g1,"esm2020")})();const FS="firebasestorage.googleapis.com",qS="storageBucket",jD=120*1e3,UD=600*1e3;class Nn extends Pa{constructor(t,e,r=0){super(cm(t),`Firebase Storage: ${e} (${cm(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return cm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dn;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dn||(Dn={}));function cm(i){return"storage/"+i}function BD(){const i="An unknown error occurred, please check the error payload for server response.";return new Nn(Dn.UNKNOWN,i)}function FD(i){return new Nn(Dn.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function qD(i){return new Nn(Dn.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HD(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nn(Dn.UNAUTHENTICATED,i)}function GD(){return new Nn(Dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YD(i){return new Nn(Dn.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function QD(){return new Nn(Dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KD(){return new Nn(Dn.CANCELED,"User canceled the upload/download.")}function $D(i){return new Nn(Dn.INVALID_URL,"Invalid URL '"+i+"'.")}function XD(i){return new Nn(Dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function WD(){return new Nn(Dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qS+"' property when initializing the app?")}function Bm(i){return new Nn(Dn.INVALID_ARGUMENT,i)}function HS(){return new Nn(Dn.APP_DELETED,"The Firebase app was deleted.")}function JD(i){return new Nn(Dn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hu(i){throw new Nn(Dn.INTERNAL_ERROR,"Internal error: "+i)}class Oi{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Oi.makeFromUrl(t,e)}catch{return new Oi(t,"")}if(r.path==="")return r;throw XD(t)}static makeFromUrl(t,e){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(bt){bt.path.charAt(bt.path.length-1)==="/"&&(bt.path_=bt.path_.slice(0,-1))}const c="(/(.*))?$",p=new RegExp("^gs://"+o+c,"i"),m={bucket:1,path:3};function g(bt){bt.path_=decodeURIComponent(bt.path)}const S="v[A-Za-z0-9_]+",E=e.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${S}/b/${o}/o${b}`,"i"),O={bucket:1,path:3},Q=e===FS?"(?:storage.googleapis.com|storage.cloud.google.com)":e,U="([^?#]*)",ht=new RegExp(`^https?://${Q}/${o}/${U}`,"i"),lt=[{regex:p,indices:m,postModify:u},{regex:w,indices:O,postModify:g},{regex:ht,indices:{bucket:1,path:2},postModify:g}];for(let bt=0;bt<lt.length;bt++){const jt=lt[bt],At=jt.regex.exec(t);if(At){const R=At[jt.indices.bucket];let C=At[jt.indices.path];C||(C=""),r=new Oi(R,C),jt.postModify(r);break}}if(r==null)throw $D(t);return r}}class ZD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function tN(i,t,e){let r=1,o=null,u=null,c=!1,p=0;function m(){return p===2}let g=!1;function S(...U){g||(g=!0,t.apply(null,U))}function E(U){o=setTimeout(()=>{o=null,i(w,m())},U)}function b(){u&&clearTimeout(u)}function w(U,...ht){if(g){b();return}if(U){b(),S.call(null,U,...ht);return}if(m()||c){b(),S.call(null,U,...ht);return}r<64&&(r*=2);let lt;p===1?(p=2,lt=0):lt=(r+Math.random())*1e3,E(lt)}let O=!1;function Q(U){O||(O=!0,b(),!g&&(o!==null?(U||(p=2),clearTimeout(o),E(0)):U||(p=1)))}return E(0),u=setTimeout(()=>{c=!0,Q(!0)},e),Q}function eN(i){i(!1)}function nN(i){return i!==void 0}function hE(i,t,e,r){if(r<t)throw Bm(`Invalid value for '${i}'. Expected ${t} or greater.`);if(r>e)throw Bm(`Invalid value for '${i}'. Expected ${e} or less.`)}function iN(i,t,e){let r=t;return e==null&&(r=`https://${t}`),`${e}://${r}/v0${i}`}function sN(i){const t=encodeURIComponent;let e="?";for(const r in i)if(i.hasOwnProperty(r)){const o=t(r)+"="+t(i[r]);e=e+o+"&"}return e=e.slice(0,-1),e}var Ia;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Ia||(Ia={}));function rN(i,t){const e=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=t.indexOf(i)!==-1;return e||o||u}class aN{constructor(t,e,r,o,u,c,p,m,g,S,E,b=!0,w=!1){this.url_=t,this.method_=e,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=S,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,Q)=>{this.resolve_=O,this.reject_=Q,this.start_()})}start_(){const t=(r,o)=>{if(o){r(!1,new Vh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{const m=p.loaded,g=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===Ia.NO_ERROR,m=u.getStatus();if(!p||rN(m,this.additionalRetryCodes_)&&this.retry){const S=u.getErrorCode()===Ia.ABORT;r(!1,new Vh(!1,null,S));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new Vh(g,u))})},e=(r,o)=>{const u=this.resolve_,c=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(p,p.getResponse());nN(m)?u(m):u()}catch(m){c(m)}else if(p!==null){const m=BD();m.serverResponse=p.getErrorText(),this.errorCallback_?c(this.errorCallback_(p,m)):c(m)}else if(o.canceled){const m=this.appDelete_?HS():KD();c(m)}else{const m=QD();c(m)}};this.canceled_?e(!1,new Vh(!1,null,!0)):this.backoffId_=tN(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&eN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vh{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function oN(i,t){t!==null&&t.length>0&&(i.Authorization="Firebase "+t)}function lN(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function uN(i,t){t&&(i["X-Firebase-GMPID"]=t)}function cN(i,t){t!==null&&(i["X-Firebase-AppCheck"]=t)}function hN(i,t,e,r,o,u,c=!0,p=!1){const m=sN(i.urlParams),g=i.url+m,S=Object.assign({},i.headers);return uN(S,t),oN(S,e),lN(S,u),cN(S,r),new aN(g,i.method,S,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,c,p)}function fN(i){if(i.length===0)return null;const t=i.lastIndexOf("/");return t===-1?"":i.slice(0,t)}function dN(i,t){const e=t.split("/").filter(r=>r.length>0).join("/");return i.length===0?e:i+"/"+e}function pN(i){const t=i.lastIndexOf("/",i.length-2);return t===-1?i:i.slice(t+1)}class mN{constructor(t,e,r,o){this.url=t,this.method=e,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gN(i){function t(e,r){let o;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?o=GD():o=HD():e.getStatus()===402?o=qD(i.bucket):e.getStatus()===403?o=YD(i.path):o=r,o.status=e.getStatus(),o.serverResponse=r.serverResponse,o}return t}function _N(i){const t=gN(i);function e(r,o){let u=t(r,o);return r.getStatus()===404&&(u=FD(i.path)),u.serverResponse=o.serverResponse,u}return e}function yN(i,t,e){const r=t.fullServerUrl(),o=iN(r,i.host,i._protocol)+"?alt=media",u="GET",c=i.maxOperationRetryTime,p=new mN(o,u,(m,g)=>g,c);return p.errorHandler=_N(t),p}class vN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ia.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ia.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ia.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,o,u){if(this.sent_)throw hu("cannot .send() more than once");if(za(t)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),u!==void 0)for(const c in u)u.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,u[c].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class EN extends vN{initXhr(){this.xhr_.responseType="blob"}}function TN(){return new EN}class Ma{constructor(t,e){this._service=t,e instanceof Oi?this._location=e:this._location=Oi.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Ma(t,e)}get root(){const t=new Oi(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pN(this._location.path)}get storage(){return this._service}get parent(){const t=fN(this._location.path);if(t===null)return null;const e=new Oi(this._location.bucket,t);return new Ma(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw JD(t)}}function SN(i,t){i._throwIfRoot("getBlob");const e=yN(i.storage,i._location);return i.storage.makeRequestWithTokens(e,TN).then(r=>r)}function bN(i,t){const e=dN(i._location.path,t),r=new Oi(i._location.bucket,e);return new Ma(i.storage,r)}function xN(i){return/^[A-Za-z]+:\/\//.test(i)}function AN(i,t){return new Ma(i,t)}function GS(i,t){if(i instanceof Gg){const e=i;if(e._bucket==null)throw WD();const r=new Ma(e,e._bucket);return t!=null?GS(r,t):r}else return t!==void 0?bN(i,t):i}function CN(i,t){if(t&&xN(t)){if(i instanceof Gg)return AN(i,t);throw Bm("To use ref(service, url), the first argument must be a Storage instance.")}else return GS(i,t)}function fE(i,t){const e=t?.[qS];return e==null?null:Oi.makeFromBucketSpec(e,i)}function wN(i,t,e,r={}){i.host=`${t}:${e}`;const o=za(t);o&&(sg(`https://${i.host}/b`),ag("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(i._overrideAuthToken=typeof u=="string"?u:rg(u,i.app.options.projectId))}class Gg{constructor(t,e,r,o,u,c=!1){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=c,this._bucket=null,this._host=FS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jD,this._maxUploadRetryTime=UD,this._requests=new Set,o!=null?this._bucket=Oi.makeFromBucketSpec(o,this._host):this._bucket=fE(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Oi.makeFromBucketSpec(this._url,t):this._bucket=fE(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){hE("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){hE("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(cg(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ma(this,t)}_makeRequest(t,e,r,o,u=!0){if(this._deleted)return new ZD(HS());{const c=hN(t,this._appId,r,o,e,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,e){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,r,o).getPromise()}}const dE="@firebase/storage",pE="0.14.0";const YS="storage";function RN(i,t){return i=jn(i),CN(i,t)}function QS(i=fg(),t){i=jn(i);const r=ug(i,YS).getImmediate({identifier:t}),o=ng("storage");return o&&IN(r,...o),r}function IN(i,t,e,r={}){wN(i,t,e,r)}function DN(i,t){return i=jn(i),SN(i)}function NN(i,{instanceIdentifier:t}){const e=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new Gg(e,r,o,t,hg)}function ON(){Yo(new Da(YS,NN,"PUBLIC").setMultipleInstances(!0)),ds(dE,pE,""),ds(dE,pE,"esm2020")}ON();var mE={};const gE="@firebase/database",_E="1.1.0";let KS="";function MN(i){KS=i}class kN{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),un(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Du(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class VN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Ws(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const $S=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new kN(t)}}catch{}return new VN},wa=$S("localStorage"),LN=$S("sessionStorage");const qo=new og("@firebase/database"),zN=(function(){let i=1;return function(){return i++}})(),XS=function(i){const t=mw(i),e=new pw;e.update(t);const r=e.digest();return tg.encodeByteArray(r)},Zu=function(...i){let t="";for(let e=0;e<i.length;e++){const r=i[e];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Zu.apply(null,r):typeof r=="object"?t+=un(r):t+=r,t+=" "}return t};let Au=null,yE=!0;const PN=function(i,t){at(!0,"Can't turn on custom loggers persistently."),qo.logLevel=Jt.VERBOSE,Au=qo.log.bind(qo)},Pn=function(...i){if(yE===!0&&(yE=!1,Au===null&&LN.get("logging_enabled")===!0&&PN()),Au){const t=Zu.apply(null,i);Au(t)}},tc=function(i){return function(...t){Pn(i,...t)}},Fm=function(...i){const t="FIREBASE INTERNAL ERROR: "+Zu(...i);qo.error(t)},Xs=function(...i){const t=`FIREBASE FATAL ERROR: ${Zu(...i)}`;throw qo.error(t),new Error(t)},mi=function(...i){const t="FIREBASE WARNING: "+Zu(...i);qo.warn(t)},jN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&mi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},WS=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},UN=function(i){if(document.readyState==="complete")i();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Zo="[MIN_NAME]",ka="[MAX_NAME]",ol=function(i,t){if(i===t)return 0;if(i===Zo||t===ka)return-1;if(t===Zo||i===ka)return 1;{const e=vE(i),r=vE(t);return e!==null?r!==null?e-r===0?i.length-t.length:e-r:-1:r!==null?1:i<t?-1:1}},BN=function(i,t){return i===t?0:i<t?-1:1},fu=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+un(t))},Yg=function(i){if(typeof i!="object"||i===null)return un(i);const t=[];for(const r in i)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)r!==0&&(e+=","),e+=un(t[r]),e+=":",e+=Yg(i[t[r]]);return e+="}",e},JS=function(i,t){const e=i.length;if(e<=t)return[i];const r=[];for(let o=0;o<e;o+=t)o+t>e?r.push(i.substring(o,e)):r.push(i.substring(o,o+t));return r};function ni(i,t){for(const e in i)i.hasOwnProperty(e)&&t(e,i[e])}const ZS=function(i){at(!WS(i),"Invalid JSON number");const t=11,e=52,r=(1<<t-1)-1;let o,u,c,p,m;i===0?(u=0,c=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(i)/Math.LN2),r),u=p+r,c=Math.round(i*Math.pow(2,e-p)-Math.pow(2,e))):(u=0,c=Math.round(i/Math.pow(2,1-r-e))));const g=[];for(m=e;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(m=t;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(o?1:0),g.reverse();const S=g.join("");let E="";for(m=0;m<64;m+=8){let b=parseInt(S.substr(m,8),2).toString(16);b.length===1&&(b="0"+b),E=E+b}return E.toLowerCase()},FN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function HN(i,t){let e="Unknown Error";i==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?e="Client doesn't have permission to access the desired data.":i==="unavailable"&&(e="The service is unavailable");const r=new Error(i+" at "+t._path.toString()+": "+e);return r.code=i.toUpperCase(),r}const GN=new RegExp("^-?(0*)\\d{1,10}$"),YN=-2147483648,QN=2147483647,vE=function(i){if(GN.test(i)){const t=Number(i);if(t>=YN&&t<=QN)return t}return null},ec=function(i){try{i()}catch(t){setTimeout(()=>{const e=t.stack||"";throw mi("Exception was thrown by user callback.",e),t},Math.floor(0))}},KN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cu=function(i,t){const e=setTimeout(i,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};class $N{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,cg(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){mi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XN{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mi(t)}}class Gh{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Gh.OWNER="owner";const Qg="5",tb="v",eb="s",nb="r",ib="f",sb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rb="ls",ab="p",qm="ac",ob="websocket",lb="long_polling";class ub{constructor(t,e,r,o,u=!1,c="",p=!1,m=!1,g=null){this.secure=e,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wa.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&wa.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function WN(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function cb(i,t,e){at(typeof t=="string","typeof type must == string"),at(typeof e=="object","typeof params must == object");let r;if(t===ob)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===lb)r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);WN(i)&&(e.ns=i.namespace);const o=[];return ni(e,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class JN{constructor(){this.counters_={}}incrementCounter(t,e=1){Ws(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return QC(this.counters_)}}const hm={},fm={};function Kg(i){const t=i.toString();return hm[t]||(hm[t]=new JN),hm[t]}function ZN(i,t){const e=i.toString();return fm[e]||(fm[e]=t()),fm[e]}class t4{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&ec(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const EE="start",e4="close",n4="pLPCommand",i4="pRTLPCB",hb="id",fb="pw",db="ser",s4="cb",r4="seg",a4="ts",o4="d",l4="dframe",pb=1870,mb=30,u4=pb-mb,c4=25e3,h4=3e4;class jo{constructor(t,e,r,o,u,c,p){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tc(t),this.stats_=Kg(e),this.urlFn=m=>(this.appCheckToken&&(m[qm]=this.appCheckToken),cb(e,lb,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new t4(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(h4)),UN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $g((...u)=>{const[c,p,m,g,S]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===EE)this.id=p,this.password=m;else if(c===e4)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={};r[EE]="t",r[db]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[s4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[tb]=Qg,this.transportSessionId&&(r[eb]=this.transportSessionId),this.lastSessionId&&(r[rb]=this.lastSessionId),this.applicationId&&(r[ab]=this.applicationId),this.appCheckToken&&(r[qm]=this.appCheckToken),typeof location<"u"&&location.hostname&&sb.test(location.hostname)&&(r[nb]=ib);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jo.forceAllow_=!0}static forceDisallow(){jo.forceDisallow_=!0}static isAvailable(){return jo.forceAllow_?!0:!jo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!FN()&&!qN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=un(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=tT(e),o=JS(r,u4);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const r={};r[l4]="t",r[hb]=t,r[fb]=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=un(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class $g{constructor(t,e,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=zN(),window[n4+this.uniqueCallbackIdentifier]=t,window[i4+this.uniqueCallbackIdentifier]=e,this.myIFrame=$g.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Pn("frame writing exception"),p.stack&&Pn(p.stack),Pn(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Pn("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[hb]=this.myID,t[fb]=this.myPW,t[db]=this.currentSerial;let e=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mb+r.length<=pb;){const c=this.pendingSegs.shift();r=r+"&"+r4+o+"="+c.seg+"&"+a4+o+"="+c.ts+"&"+o4+o+"="+c.d,o++}return e=e+r,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},o=setTimeout(r,Math.floor(c4)),u=()=>{clearTimeout(o),r()};this.addTag(t,u)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{Pn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const f4=16384,d4=45e3;let cf=null;typeof MozWebSocket<"u"?cf=MozWebSocket:typeof WebSocket<"u"&&(cf=WebSocket);class Yi{constructor(t,e,r,o,u,c,p){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tc(this.connId),this.stats_=Kg(e),this.connURL=Yi.connectionURL_(e,c,p,o,r),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,r,o,u){const c={};return c[tb]=Qg,typeof location<"u"&&location.hostname&&sb.test(location.hostname)&&(c[nb]=ib),e&&(c[eb]=e),r&&(c[rb]=r),o&&(c[qm]=o),u&&(c[ab]=u),cb(t,ob,c)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wa.set("previous_websocket_failure",!0);try{let r;sw(),this.mySock=new cf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Yi.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(e);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&cf!==null&&!Yi.forceDisallow_}static previouslyFailed(){return wa.isInMemoryStorage||wa.get("previous_websocket_failure")===!0}markConnectionHealthy(){wa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const r=Du(e);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(at(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const r=this.extractFrameCount_(e);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const e=un(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=JS(e,f4);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(d4))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Yi.responsesRequiredToBeHealthy=2;Yi.healthyTimeout=3e4;class ju{static get ALL_TRANSPORTS(){return[jo,Yi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Yi&&Yi.isAvailable();let r=e&&!Yi.previouslyFailed();if(t.webSocketOnly&&(e||mi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Yi];else{const o=this.transports_=[];for(const u of ju.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);ju.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ju.globalTransportInitialized_=!1;const p4=6e4,m4=5e3,g4=10*1024,_4=100*1024,dm="t",TE="d",y4="s",SE="r",v4="e",bE="o",xE="a",AE="n",CE="p",E4="h";class T4{constructor(t,e,r,o,u,c,p,m,g,S){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tc("c:"+this.id+":"),this.transportManager_=new ju(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Cu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>g4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(dm in t){const e=t[dm];e===xE?this.upgradeIfSecondaryHealthy_():e===SE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===bE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=fu("t",t),r=fu("d",t);if(e==="c")this.onSecondaryControl_(r);else if(e==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:CE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:AE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=fu("t",t),r=fu("d",t);e==="c"?this.onControl_(r):e==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=fu(dm,t);if(TE in t){const r=t[TE];if(e===E4){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(e===AE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===y4?this.onConnectionShutdown_(r):e===SE?this.onReset_(r):e===v4?Fm("Server Error: "+r):e===bE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fm("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Qg!==r&&mi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Cu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(p4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(m4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:CE,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gb{put(t,e,r,o){}merge(t,e,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class _b{constructor(t){this.allowedEvents_=t,this.listeners_={},at(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const o=this.getInitialEvent(t);o&&e.apply(r,o)}off(t,e,r){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===e&&(!r||r===o[u].context)){o.splice(u,1);return}}validateEventType_(t){at(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class hf extends _b{static getInstance(){return new hf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return at(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const wE=32,RE=768;class Te{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}}function re(){return new Te("")}function Zt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Yr(i){return i.pieces_.length-i.pieceNum_}function be(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Te(i.pieces_,t)}function yb(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function S4(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)i.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}function vb(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function Eb(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new Te(t,0)}function hn(i,t){const e=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)e.push(i.pieces_[r]);if(t instanceof Te)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&e.push(r[o])}return new Te(e,0)}function Ht(i){return i.pieceNum_>=i.pieces_.length}function Fn(i,t){const e=Zt(i),r=Zt(t);if(e===null)return t;if(e===r)return Fn(be(i),be(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function Tb(i,t){if(Yr(i)!==Yr(t))return!1;for(let e=i.pieceNum_,r=t.pieceNum_;e<=i.pieces_.length;e++,r++)if(i.pieces_[e]!==t.pieces_[r])return!1;return!0}function Ki(i,t){let e=i.pieceNum_,r=t.pieceNum_;if(Yr(i)>Yr(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class b4{constructor(t,e){this.errorPrefix_=e,this.parts_=vb(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=bf(this.parts_[r]);Sb(this)}}function x4(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=bf(t),Sb(i)}function A4(i){const t=i.parts_.pop();i.byteLength_-=bf(t),i.parts_.length>0&&(i.byteLength_-=1)}function Sb(i){if(i.byteLength_>RE)throw new Error(i.errorPrefix_+"has a key path longer than "+RE+" bytes ("+i.byteLength_+").");if(i.parts_.length>wE)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wE+") or object contains a cycle "+Aa(i))}function Aa(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class Xg extends _b{static getInstance(){return new Xg}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return at(t==="visible","Unknown event type: "+t),[this.visible_]}}const du=1e3,C4=300*1e3,IE=30*1e3,w4=1.3,R4=3e4,I4="server_kill",DE=3;class Ys extends gb{constructor(t,e,r,o,u,c,p,m){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=c,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=Ys.nextPersistentConnectionId_++,this.log_=tc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=du,this.maxReconnectDelay_=C4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xg.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&hf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,r){const o=++this.requestNumber_,u={r:o,a:t,b:e};this.log_(un(u)),at(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const e=new ig,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{const p=c.d;c.s==="ok"?e.resolve(p):e.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),e.promise}listen(t,e,r,o){this.initConnection_();const u=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+u),this.listens.has(c)||this.listens.set(c,new Map),at(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),at(!this.listens.get(c).has(u),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:e,query:t,tag:r};this.listens.get(c).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(r)})}sendListen_(t){const e=t.query,r=e._path.toString(),o=e._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r},c="q";t.tag&&(u.q=e._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(c,u,p=>{const m=p.d,g=p.s;Ys.warnOnListenWarnings_(m,e),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&Ws(t,"w")){const r=Go(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+e._queryParams.getIndex().toString()+'"',u=e._path.toString();mi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||fw(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=IE)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=hw(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(e,r,o=>{const u=o.s,c=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,r=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,r)})}unlisten(t,e){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),at(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,e)}sendUnlisten_(t,e,r,o){this.log_("Unlisten on "+t+" for "+e);const u={p:t},c="n";o&&(u.q=r,u.t=o),this.sendRequest(c,u)}onDisconnectPut(t,e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:r})}onDisconnectMerge(t,e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:r})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,r,o){const u={p:e,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,e,r,o){this.putInternal("p",t,e,r,o)}merge(t,e,r,o){this.putInternal("m",t,e,r,o)}putInternal(t,e,r,o,u){this.initConnection_();const c={p:e,d:r};u!==void 0&&(c.h=u),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,r,u=>{this.log_(e+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+un(t));const e=t.r,r=this.requestCBHash_[e];r&&(delete this.requestCBHash_[e],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):Fm("Unrecognized action received from server: "+un(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){at(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>R4&&(this.reconnectDelay_=du),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*w4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Ys.nextConnectionId_++,u=this.lastSessionId;let c=!1,p=null;const m=function(){p?p.close():(c=!0,r())},g=function(E){at(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(E)};this.realtime_={close:m,sendRequest:g};const S=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,b]=await Promise.all([this.authTokenProvider_.getToken(S),this.appCheckTokenProvider_.getToken(S)]);c?Pn("getToken() completed but was canceled"):(Pn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=b&&b.token,p=new T4(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,r,w=>{mi(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(I4)},u))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&mi(E),m())}}}interrupt(t){Pn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],s1(this.interruptReasons_)&&(this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let r;e?r=e.map(u=>Yg(u)).join("$"):r="default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,e){const r=new Te(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(e),u.delete(e),u.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,e){Pn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=DE&&(this.reconnectDelay_=IE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){Pn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=DE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+KS.replace(/\./g,"-")]=1,sT()?t["framework.cordova"]=1:iw()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=hf.getInstance().currentlyOnline();return s1(this.interruptReasons_)&&t}}Ys.nextPersistentConnectionId_=0;Ys.nextConnectionId_=0;class Bt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Bt(t,e)}}class Ff{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new Bt(Zo,t),o=new Bt(Zo,e);return this.compare(r,o)!==0}minPost(){return Bt.MIN}}let Lh;class bb extends Ff{static get __EMPTY_NODE(){return Lh}static set __EMPTY_NODE(t){Lh=t}compare(t,e){return ol(t.name,e.name)}isDefinedOn(t){throw nl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Bt.MIN}maxPost(){return new Bt(ka,Lh)}makePost(t,e){return at(typeof t=="string","KeyIndex indexValue must always be a string."),new Bt(t,Lh)}toString(){return".key"}}const Ho=new bb;class zh{constructor(t,e,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?r(t.key,e):1,o&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class En{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??En.RED,this.left=o??ei.EMPTY_NODE,this.right=u??ei.EMPTY_NODE}copy(t,e,r,o,u){return new En(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o=o.copy(null,e,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ei.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let r,o;if(r=this,e(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),e(t,r.key)===0){if(r.right.isEmpty())return ei.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}En.RED=!0;En.BLACK=!1;class D4{copy(t,e,r,o,u){return this}insert(t,e,r){return new En(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ei{constructor(t,e=ei.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new ei(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,En.BLACK,null,null))}remove(t){return new ei(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,En.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),e===0)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,o=null;for(;!r.isEmpty();)if(e=this.comparator_(t,r.key),e===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else e<0?r=r.left:e>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new zh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new zh(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new zh(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new zh(this.root_,null,this.comparator_,!0,t)}}ei.EMPTY_NODE=new D4;function N4(i,t){return ol(i.name,t.name)}function Wg(i,t){return ol(i,t)}let Hm;function O4(i){Hm=i}const xb=function(i){return typeof i=="number"?"number:"+ZS(i):"string:"+i},Ab=function(i){if(i.isLeafNode()){const t=i.val();at(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ws(t,".sv"),"Priority must be a string or number.")}else at(i===Hm||i.isEmpty(),"priority of unexpected type.");at(i===Hm||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let NE;class yn{static set __childrenNodeConstructor(t){NE=t}static get __childrenNodeConstructor(){return NE}constructor(t,e=yn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,at(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ab(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new yn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:yn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:Zt(t)===".priority"?this.priorityNode_:yn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:yn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const r=Zt(t);return r===null?e:e.isEmpty()&&r!==".priority"?this:(at(r!==".priority"||Yr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yn.__childrenNodeConstructor.EMPTY_NODE.updateChild(be(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xb(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=ZS(this.value_):t+=this.value_,this.lazyHash_=XS(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===yn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof yn.__childrenNodeConstructor?-1:(at(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,r=typeof this.value_,o=yn.VALUE_TYPE_ORDER.indexOf(e),u=yn.VALUE_TYPE_ORDER.indexOf(r);return at(o>=0,"Unknown leaf type: "+e),at(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}yn.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Cb,wb;function M4(i){Cb=i}function k4(i){wb=i}class V4 extends Ff{compare(t,e){const r=t.node.getPriority(),o=e.node.getPriority(),u=r.compareTo(o);return u===0?ol(t.name,e.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Bt.MIN}maxPost(){return new Bt(ka,new yn("[PRIORITY-POST]",wb))}makePost(t,e){const r=Cb(t);return new Bt(e,new yn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Pe=new V4;const L4=Math.log(2);class z4{constructor(t){const e=u=>parseInt(Math.log(u)/L4,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const ff=function(i,t,e,r){i.sort(t);const o=function(m,g){const S=g-m;let E,b;if(S===0)return null;if(S===1)return E=i[m],b=e?e(E):E,new En(b,E.node,En.BLACK,null,null);{const w=parseInt(S/2,10)+m,O=o(m,w),Q=o(w+1,g);return E=i[w],b=e?e(E):E,new En(b,E.node,En.BLACK,O,Q)}},u=function(m){let g=null,S=null,E=i.length;const b=function(O,Q){const U=E-O,ht=E;E-=O;const ft=o(U+1,ht),lt=i[U],bt=e?e(lt):lt;w(new En(bt,lt.node,Q,null,ft))},w=function(O){g?(g.left=O,g=O):(S=O,g=O)};for(let O=0;O<m.count;++O){const Q=m.nextBitIsOne(),U=Math.pow(2,m.count-(O+1));Q?b(U,En.BLACK):(b(U,En.BLACK),b(U,En.RED))}return S},c=new z4(i.length),p=u(c);return new ei(r||t,p)};let pm;const ko={};class Hs{static get Default(){return at(ko&&Pe,"ChildrenNode.ts has not been loaded"),pm=pm||new Hs({".priority":ko},{".priority":Pe}),pm}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=Go(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ei?e:null}hasIndex(t){return Ws(this.indexSet_,t.toString())}addIndex(t,e){at(t!==Ho,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=e.getIterator(Bt.Wrap);let c=u.getNext();for(;c;)o=o||t.isDefinedOn(c.node),r.push(c),c=u.getNext();let p;o?p=ff(r,t.getCompare()):p=ko;const m=t.toString(),g={...this.indexSet_};g[m]=t;const S={...this.indexes_};return S[m]=p,new Hs(S,g)}addToIndexes(t,e){const r=Qh(this.indexes_,(o,u)=>{const c=Go(this.indexSet_,u);if(at(c,"Missing index implementation for "+u),o===ko)if(c.isDefinedOn(t.node)){const p=[],m=e.getIterator(Bt.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&p.push(g),g=m.getNext();return p.push(t),ff(p,c.getCompare())}else return ko;else{const p=e.get(t.name);let m=o;return p&&(m=m.remove(new Bt(t.name,p))),m.insert(t,t.node)}});return new Hs(r,this.indexSet_)}removeFromIndexes(t,e){const r=Qh(this.indexes_,o=>{if(o===ko)return o;{const u=e.get(t.name);return u?o.remove(new Bt(t.name,u)):o}});return new Hs(r,this.indexSet_)}}let pu;class It{static get EMPTY_NODE(){return pu||(pu=new It(new ei(Wg),null,Hs.Default))}constructor(t,e,r){this.children_=t,this.priorityNode_=e,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ab(this.priorityNode_),this.children_.isEmpty()&&at(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pu}updatePriority(t){return this.children_.isEmpty()?this:new It(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?pu:e}}getChild(t){const e=Zt(t);return e===null?this:this.getImmediateChild(e).getChild(be(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(at(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const r=new Bt(t,e);let o,u;e.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,e),u=this.indexMap_.addToIndexes(r,this.children_));const c=o.isEmpty()?pu:this.priorityNode_;return new It(o,c,u)}}updateChild(t,e){const r=Zt(t);if(r===null)return e;{at(Zt(t)!==".priority"||Yr(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(be(t),e);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let r=0,o=0,u=!0;if(this.forEachChild(Pe,(c,p)=>{e[c]=p.val(t),r++,u&&It.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):u=!1}),!t&&u&&o<2*r){const c=[];for(const p in e)c[p]=e[p];return c}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+xb(this.getPriority().val())+":"),this.forEachChild(Pe,(e,r)=>{const o=r.hash();o!==""&&(t+=":"+e+":"+o)}),this.lazyHash_=t===""?"":XS(t)}return this.lazyHash_}getPredecessorChildName(t,e,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new Bt(t,e));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const r=e.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Bt(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const r=e.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Bt(e,this.children_.get(e)):null}forEachChild(t,e){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>e(o.name,o.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const r=this.resolveIndex_(e);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Bt.Wrap);let u=o.peek();for(;u!=null&&e.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const r=this.resolveIndex_(e);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap);let u=o.peek();for(;u!=null&&e.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nc?-1:0}withIndex(t){if(t===Ho||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new It(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Ho||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const r=this.getIterator(Pe),o=e.getIterator(Pe);let u=r.getNext(),c=o.getNext();for(;u&&c;){if(u.name!==c.name||!u.node.equals(c.node))return!1;u=r.getNext(),c=o.getNext()}return u===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===Ho?null:this.indexMap_.get(t.toString())}}It.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class P4 extends It{constructor(){super(new ei(Wg),It.EMPTY_NODE,Hs.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return It.EMPTY_NODE}isEmpty(){return!1}}const nc=new P4;Object.defineProperties(Bt,{MIN:{value:new Bt(Zo,It.EMPTY_NODE)},MAX:{value:new Bt(ka,nc)}});bb.__EMPTY_NODE=It.EMPTY_NODE;yn.__childrenNodeConstructor=It;O4(nc);k4(nc);const j4=!0;function wn(i,t=null){if(i===null)return It.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),at(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const e=i;return new yn(e,wn(t))}if(!(i instanceof Array)&&j4){const e=[];let r=!1;if(ni(i,(c,p)=>{if(c.substring(0,1)!=="."){const m=wn(p);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),e.push(new Bt(c,m)))}}),e.length===0)return It.EMPTY_NODE;const u=ff(e,N4,c=>c.name,Wg);if(r){const c=ff(e,Pe.getCompare());return new It(u,wn(t),new Hs({".priority":c},{".priority":Pe}))}else return new It(u,wn(t),Hs.Default)}else{let e=It.EMPTY_NODE;return ni(i,(r,o)=>{if(Ws(i,r)&&r.substring(0,1)!=="."){const u=wn(o);(u.isLeafNode()||!u.isEmpty())&&(e=e.updateImmediateChild(r,u))}}),e.updatePriority(wn(t))}}M4(wn);class U4 extends Ff{constructor(t){super(),this.indexPath_=t,at(!Ht(t)&&Zt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),o=this.extractChild(e.node),u=r.compareTo(o);return u===0?ol(t.name,e.name):u}makePost(t,e){const r=wn(t),o=It.EMPTY_NODE.updateChild(this.indexPath_,r);return new Bt(e,o)}maxPost(){const t=It.EMPTY_NODE.updateChild(this.indexPath_,nc);return new Bt(ka,t)}toString(){return vb(this.indexPath_,0).join("/")}}class B4 extends Ff{compare(t,e){const r=t.node.compareTo(e.node);return r===0?ol(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Bt.MIN}maxPost(){return Bt.MAX}makePost(t,e){const r=wn(t);return new Bt(e,r)}toString(){return".value"}}const F4=new B4;function Rb(i){return{type:"value",snapshotNode:i}}function tl(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function Uu(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function Bu(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}function q4(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}class Jg{constructor(t){this.index_=t}updateChild(t,e,r,o,u,c){at(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(e);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?t.hasChild(e)?c.trackChildChange(Uu(e,p)):at(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(tl(e,r)):c.trackChildChange(Bu(e,r,p))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Pe,(o,u)=>{e.hasChild(o)||r.trackChildChange(Uu(o,u))}),e.isLeafNode()||e.forEachChild(Pe,(o,u)=>{if(t.hasChild(o)){const c=t.getImmediateChild(o);c.equals(u)||r.trackChildChange(Bu(o,u,c))}else r.trackChildChange(tl(o,u))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?It.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Fu{constructor(t){this.indexedFilter_=new Jg(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Fu.getStartPost_(t),this.endPost_=Fu.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&r}updateChild(t,e,r,o,u,c){return this.matches(new Bt(e,r))||(r=It.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,o,u,c)}updateFullNode(t,e,r){e.isLeafNode()&&(e=It.EMPTY_NODE);let o=e.withIndex(this.index_);o=o.updatePriority(It.EMPTY_NODE);const u=this;return e.forEachChild(Pe,(c,p)=>{u.matches(new Bt(c,p))||(o=o.updateImmediateChild(c,It.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}class H4{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=e=>{const r=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,r,o,u,c){return this.rangedFilter_.matches(new Bt(e,r))||(r=It.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,o,u,c):this.fullLimitUpdateChild_(t,e,r,u,c)}updateFullNode(t,e,r){let o;if(e.isLeafNode()||e.isEmpty())o=It.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){o=It.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),c++;else break;else continue}}else{o=e.withIndex(this.index_),o=o.updatePriority(It.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let c=0;for(;u.hasNext();){const p=u.getNext();c<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?c++:o=o.updateImmediateChild(p.name,It.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,o,u){let c;if(this.reverse_){const E=this.index_.getCompare();c=(b,w)=>E(w,b)}else c=this.index_.getCompare();const p=t;at(p.numChildren()===this.limit_,"");const m=new Bt(e,r),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),S=this.rangedFilter_.matches(m);if(p.hasChild(e)){const E=p.getImmediateChild(e);let b=o.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===e||p.hasChild(b.name));)b=o.getChildAfterChild(this.index_,b,this.reverse_);const w=b==null?1:c(b,m);if(S&&!r.isEmpty()&&w>=0)return u?.trackChildChange(Bu(e,r,E)),p.updateImmediateChild(e,r);{u?.trackChildChange(Uu(e,E));const Q=p.updateImmediateChild(e,It.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(u?.trackChildChange(tl(b.name,b.node)),Q.updateImmediateChild(b.name,b.node)):Q}}else return r.isEmpty()?t:S&&c(g,m)>=0?(u!=null&&(u.trackChildChange(Uu(g.name,g.node)),u.trackChildChange(tl(e,r))),p.updateImmediateChild(e,r).updateImmediateChild(g.name,It.EMPTY_NODE)):t}}class Zg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return at(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return at(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zo}hasEnd(){return this.endSet_}getIndexEndValue(){return at(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return at(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ka}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return at(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pe}copy(){const t=new Zg;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function G4(i){return i.loadsAllData()?new Jg(i.getIndex()):i.hasLimit()?new H4(i):new Fu(i)}function OE(i){const t={};if(i.isDefault())return t;let e;if(i.index_===Pe?e="$priority":i.index_===F4?e="$value":i.index_===Ho?e="$key":(at(i.index_ instanceof U4,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=un(e),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";t[r]=un(i.indexStartValue_),i.startNameSet_&&(t[r]+=","+un(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";t[r]=un(i.indexEndValue_),i.endNameSet_&&(t[r]+=","+un(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function ME(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;e===""&&(i.isViewFromLeft()?e="l":e="r"),t.vf=e}return i.index_!==Pe&&(t.i=i.index_.toString()),t}class df extends gb{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(at(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=tc("p:rest:"),this.listens_={}}listen(t,e,r,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const c=df.getListenId_(t,r),p={};this.listens_[c]=p;const m=OE(t._queryParams);this.restRequest_(u+".json",m,(g,S)=>{let E=S;if(g===404&&(E=null,g=null),g===null&&this.onDataUpdate_(u,E,!1,r),Go(this.listens_,c)===p){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",o(b,null)}})}unlisten(t,e){const r=df.getListenId_(t,e);delete this.listens_[r]}get(t){const e=OE(t._queryParams),r=t._path.toString(),o=new ig;return this.restRequest_(r+".json",e,(u,c)=>{let p=c;u===404&&(p=null,u=null),u===null?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(e.auth=o.accessToken),u&&u.token&&(e.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+dw(e);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&p.readyState===4){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=Du(p.responseText)}catch{mi("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,m)}else p.status!==401&&p.status!==404&&mi("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class Y4{constructor(){this.rootNode_=It.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function pf(){return{value:null,children:new Map}}function Ib(i,t,e){if(Ht(t))i.value=e,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,e);else{const r=Zt(t);i.children.has(r)||i.children.set(r,pf());const o=i.children.get(r);t=be(t),Ib(o,t,e)}}function Gm(i,t,e){i.value!==null?e(t,i.value):Q4(i,(r,o)=>{const u=new Te(t.toString()+"/"+r);Gm(o,u,e)})}function Q4(i,t){i.children.forEach((e,r)=>{t(r,e)})}class K4{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e={...t};return this.last_&&ni(this.last_,(r,o)=>{e[r]=e[r]-o}),this.last_=t,e}}const kE=10*1e3,$4=30*1e3,X4=300*1e3;class W4{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new K4(t);const r=kE+($4-kE)*Math.random();Cu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;ni(t,(o,u)=>{u>0&&Ws(this.statsToReport_,o)&&(e[o]=u,r=!0)}),r&&this.server_.reportStats(e),Cu(this.reportStats_.bind(this),Math.floor(Math.random()*2*X4))}}var $i;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($i||($i={}));function Db(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function t_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function e_(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class mf{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=$i.ACK_USER_WRITE,this.source=Db()}operationForChild(t){if(Ht(this.path)){if(this.affectedTree.value!=null)return at(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Te(t));return new mf(re(),e,this.revert)}}else return at(Zt(this.path)===t,"operationForChild called for unrelated child."),new mf(be(this.path),this.affectedTree,this.revert)}}class qu{constructor(t,e){this.source=t,this.path=e,this.type=$i.LISTEN_COMPLETE}operationForChild(t){return Ht(this.path)?new qu(this.source,re()):new qu(this.source,be(this.path))}}class Va{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=$i.OVERWRITE}operationForChild(t){return Ht(this.path)?new Va(this.source,re(),this.snap.getImmediateChild(t)):new Va(this.source,be(this.path),this.snap)}}class Hu{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=$i.MERGE}operationForChild(t){if(Ht(this.path)){const e=this.children.subtree(new Te(t));return e.isEmpty()?null:e.value?new Va(this.source,re(),e.value):new Hu(this.source,re(),e)}else return at(Zt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Hu(this.source,be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qr{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ht(t))return this.isFullyInitialized()&&!this.filtered_;const e=Zt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class J4{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Z4(i,t,e,r){const o=[],u=[];return t.forEach(c=>{c.type==="child_changed"&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(q4(c.childName,c.snapshotNode))}),mu(i,o,"child_removed",t,r,e),mu(i,o,"child_added",t,r,e),mu(i,o,"child_moved",u,r,e),mu(i,o,"child_changed",t,r,e),mu(i,o,"value",t,r,e),o}function mu(i,t,e,r,o,u){const c=r.filter(p=>p.type===e);c.sort((p,m)=>e6(i,p,m)),c.forEach(p=>{const m=t6(i,p,u);o.forEach(g=>{g.respondsTo(p.type)&&t.push(g.createEvent(m,i.query_))})})}function t6(i,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function e6(i,t,e){if(t.childName==null||e.childName==null)throw nl("Should only compare child_ events.");const r=new Bt(t.childName,t.snapshotNode),o=new Bt(e.childName,e.snapshotNode);return i.index_.compare(r,o)}function qf(i,t){return{eventCache:i,serverCache:t}}function wu(i,t,e,r){return qf(new Qr(t,e,r),i.serverCache)}function Nb(i,t,e,r){return qf(i.eventCache,new Qr(t,e,r))}function gf(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function La(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let mm;const n6=()=>(mm||(mm=new ei(BN)),mm);class Re{static fromObject(t){let e=new Re(null);return ni(t,(r,o)=>{e=e.set(new Te(r),o)}),e}constructor(t,e=n6()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:re(),value:this.value};if(Ht(t))return null;{const r=Zt(t),o=this.children.get(r);if(o!==null){const u=o.findRootMostMatchingPathAndValue(be(t),e);return u!=null?{path:hn(new Te(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ht(t))return this;{const e=Zt(t),r=this.children.get(e);return r!==null?r.subtree(be(t)):new Re(null)}}set(t,e){if(Ht(t))return new Re(e,this.children);{const r=Zt(t),u=(this.children.get(r)||new Re(null)).set(be(t),e),c=this.children.insert(r,u);return new Re(this.value,c)}}remove(t){if(Ht(t))return this.children.isEmpty()?new Re(null):new Re(null,this.children);{const e=Zt(t),r=this.children.get(e);if(r){const o=r.remove(be(t));let u;return o.isEmpty()?u=this.children.remove(e):u=this.children.insert(e,o),this.value===null&&u.isEmpty()?new Re(null):new Re(this.value,u)}else return this}}get(t){if(Ht(t))return this.value;{const e=Zt(t),r=this.children.get(e);return r?r.get(be(t)):null}}setTree(t,e){if(Ht(t))return e;{const r=Zt(t),u=(this.children.get(r)||new Re(null)).setTree(be(t),e);let c;return u.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,u),new Re(this.value,c)}}fold(t){return this.fold_(re(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(hn(t,o),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,re(),e)}findOnPath_(t,e,r){const o=this.value?r(e,this.value):!1;if(o)return o;if(Ht(t))return null;{const u=Zt(t),c=this.children.get(u);return c?c.findOnPath_(be(t),hn(e,u),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,re(),e)}foreachOnPath_(t,e,r){if(Ht(t))return this;{this.value&&r(e,this.value);const o=Zt(t),u=this.children.get(o);return u?u.foreachOnPath_(be(t),hn(e,o),r):new Re(null)}}foreach(t){this.foreach_(re(),t)}foreach_(t,e){this.children.inorderTraversal((r,o)=>{o.foreach_(hn(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class Xi{constructor(t){this.writeTree_=t}static empty(){return new Xi(new Re(null))}}function Ru(i,t,e){if(Ht(t))return new Xi(new Re(e));{const r=i.writeTree_.findRootMostValueAndPath(t);if(r!=null){const o=r.path;let u=r.value;const c=Fn(o,t);return u=u.updateChild(c,e),new Xi(i.writeTree_.set(o,u))}else{const o=new Re(e),u=i.writeTree_.setTree(t,o);return new Xi(u)}}}function VE(i,t,e){let r=i;return ni(e,(o,u)=>{r=Ru(r,hn(t,o),u)}),r}function LE(i,t){if(Ht(t))return Xi.empty();{const e=i.writeTree_.setTree(t,new Re(null));return new Xi(e)}}function Ym(i,t){return Fa(i,t)!=null}function Fa(i,t){const e=i.writeTree_.findRootMostValueAndPath(t);return e!=null?i.writeTree_.get(e.path).getChild(Fn(e.path,t)):null}function zE(i){const t=[],e=i.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Pe,(r,o)=>{t.push(new Bt(r,o))}):i.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new Bt(r,o.value))}),t}function zr(i,t){if(Ht(t))return i;{const e=Fa(i,t);return e!=null?new Xi(new Re(e)):new Xi(i.writeTree_.subtree(t))}}function Qm(i){return i.writeTree_.isEmpty()}function el(i,t){return Ob(re(),i.writeTree_,t)}function Ob(i,t,e){if(t.value!=null)return e.updateChild(i,t.value);{let r=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(at(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):e=Ob(hn(i,o),u,e)}),!e.getChild(i).isEmpty()&&r!==null&&(e=e.updateChild(hn(i,".priority"),r)),e}}function Hf(i,t){return Lb(t,i)}function i6(i,t,e,r,o){at(r>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:t,snap:e,writeId:r,visible:o}),o&&(i.visibleWrites=Ru(i.visibleWrites,t,e)),i.lastWriteId=r}function s6(i,t){for(let e=0;e<i.allWrites.length;e++){const r=i.allWrites[e];if(r.writeId===t)return r}return null}function r6(i,t){const e=i.allWrites.findIndex(p=>p.writeId===t);at(e>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[e];i.allWrites.splice(e,1);let o=r.visible,u=!1,c=i.allWrites.length-1;for(;o&&c>=0;){const p=i.allWrites[c];p.visible&&(c>=e&&a6(p,r.path)?o=!1:Ki(r.path,p.path)&&(u=!0)),c--}if(o){if(u)return o6(i),!0;if(r.snap)i.visibleWrites=LE(i.visibleWrites,r.path);else{const p=r.children;ni(p,m=>{i.visibleWrites=LE(i.visibleWrites,hn(r.path,m))})}return!0}else return!1}function a6(i,t){if(i.snap)return Ki(i.path,t);for(const e in i.children)if(i.children.hasOwnProperty(e)&&Ki(hn(i.path,e),t))return!0;return!1}function o6(i){i.visibleWrites=Mb(i.allWrites,l6,re()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function l6(i){return i.visible}function Mb(i,t,e){let r=Xi.empty();for(let o=0;o<i.length;++o){const u=i[o];if(t(u)){const c=u.path;let p;if(u.snap)Ki(e,c)?(p=Fn(e,c),r=Ru(r,p,u.snap)):Ki(c,e)&&(p=Fn(c,e),r=Ru(r,re(),u.snap.getChild(p)));else if(u.children){if(Ki(e,c))p=Fn(e,c),r=VE(r,p,u.children);else if(Ki(c,e))if(p=Fn(c,e),Ht(p))r=VE(r,re(),u.children);else{const m=Go(u.children,Zt(p));if(m){const g=m.getChild(be(p));r=Ru(r,re(),g)}}}else throw nl("WriteRecord should have .snap or .children")}}return r}function kb(i,t,e,r,o){if(!r&&!o){const u=Fa(i.visibleWrites,t);if(u!=null)return u;{const c=zr(i.visibleWrites,t);if(Qm(c))return e;if(e==null&&!Ym(c,re()))return null;{const p=e||It.EMPTY_NODE;return el(c,p)}}}else{const u=zr(i.visibleWrites,t);if(!o&&Qm(u))return e;if(!o&&e==null&&!Ym(u,re()))return null;{const c=function(g){return(g.visible||o)&&(!r||!~r.indexOf(g.writeId))&&(Ki(g.path,t)||Ki(t,g.path))},p=Mb(i.allWrites,c,t),m=e||It.EMPTY_NODE;return el(p,m)}}}function u6(i,t,e){let r=It.EMPTY_NODE;const o=Fa(i.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Pe,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(e){const u=zr(i.visibleWrites,t);return e.forEachChild(Pe,(c,p)=>{const m=el(zr(u,new Te(c)),p);r=r.updateImmediateChild(c,m)}),zE(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const u=zr(i.visibleWrites,t);return zE(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function c6(i,t,e,r,o){at(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=hn(t,e);if(Ym(i.visibleWrites,u))return null;{const c=zr(i.visibleWrites,u);return Qm(c)?o.getChild(e):el(c,o.getChild(e))}}function h6(i,t,e,r){const o=hn(t,e),u=Fa(i.visibleWrites,o);if(u!=null)return u;if(r.isCompleteForChild(e)){const c=zr(i.visibleWrites,o);return el(c,r.getNode().getImmediateChild(e))}else return null}function f6(i,t){return Fa(i.visibleWrites,t)}function d6(i,t,e,r,o,u,c){let p;const m=zr(i.visibleWrites,t),g=Fa(m,re());if(g!=null)p=g;else if(e!=null)p=el(m,e);else return[];if(p=p.withIndex(c),!p.isEmpty()&&!p.isLeafNode()){const S=[],E=c.getCompare(),b=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let w=b.getNext();for(;w&&S.length<o;)E(w,r)!==0&&S.push(w),w=b.getNext();return S}else return[]}function p6(){return{visibleWrites:Xi.empty(),allWrites:[],lastWriteId:-1}}function _f(i,t,e,r){return kb(i.writeTree,i.treePath,t,e,r)}function n_(i,t){return u6(i.writeTree,i.treePath,t)}function PE(i,t,e,r){return c6(i.writeTree,i.treePath,t,e,r)}function yf(i,t){return f6(i.writeTree,hn(i.treePath,t))}function m6(i,t,e,r,o,u){return d6(i.writeTree,i.treePath,t,e,r,o,u)}function i_(i,t,e){return h6(i.writeTree,i.treePath,t,e)}function Vb(i,t){return Lb(hn(i.treePath,t),i.writeTree)}function Lb(i,t){return{treePath:i,writeTree:t}}class g6{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;at(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),at(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if(e==="child_added"&&u==="child_removed")this.changeMap.set(r,Bu(r,t.snapshotNode,o.snapshotNode));else if(e==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(e==="child_removed"&&u==="child_changed")this.changeMap.set(r,Uu(r,o.oldSnap));else if(e==="child_changed"&&u==="child_added")this.changeMap.set(r,tl(r,t.snapshotNode));else if(e==="child_changed"&&u==="child_changed")this.changeMap.set(r,Bu(r,t.snapshotNode,o.oldSnap));else throw nl("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}class _6{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}}const zb=new _6;class s_{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Qr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return i_(this.writes_,t,r)}}getChildAfterChild(t,e,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:La(this.viewCache_),u=m6(this.writes_,o,e,1,r,t);return u.length===0?null:u[0]}}function y6(i){return{filter:i}}function v6(i,t){at(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),at(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function E6(i,t,e,r,o){const u=new g6;let c,p;if(e.type===$i.OVERWRITE){const g=e;g.source.fromUser?c=Km(i,t,g.path,g.snap,r,o,u):(at(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered()&&!Ht(g.path),c=vf(i,t,g.path,g.snap,r,o,p,u))}else if(e.type===$i.MERGE){const g=e;g.source.fromUser?c=S6(i,t,g.path,g.children,r,o,u):(at(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered(),c=$m(i,t,g.path,g.children,r,o,p,u))}else if(e.type===$i.ACK_USER_WRITE){const g=e;g.revert?c=A6(i,t,g.path,r,o,u):c=b6(i,t,g.path,g.affectedTree,r,o,u)}else if(e.type===$i.LISTEN_COMPLETE)c=x6(i,t,e.path,r,u);else throw nl("Unknown operation type: "+e.type);const m=u.getChanges();return T6(t,c,m),{viewCache:c,changes:m}}function T6(i,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=gf(i);(e.length>0||!i.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&e.push(Rb(gf(t)))}}function Pb(i,t,e,r,o,u){const c=t.eventCache;if(yf(r,e)!=null)return t;{let p,m;if(Ht(e))if(at(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=La(t),S=g instanceof It?g:It.EMPTY_NODE,E=n_(r,S);p=i.filter.updateFullNode(t.eventCache.getNode(),E,u)}else{const g=_f(r,La(t));p=i.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=Zt(e);if(g===".priority"){at(Yr(e)===1,"Can't have a priority with additional path components");const S=c.getNode();m=t.serverCache.getNode();const E=PE(r,e,S,m);E!=null?p=i.filter.updatePriority(S,E):p=c.getNode()}else{const S=be(e);let E;if(c.isCompleteForChild(g)){m=t.serverCache.getNode();const b=PE(r,e,c.getNode(),m);b!=null?E=c.getNode().getImmediateChild(g).updateChild(S,b):E=c.getNode().getImmediateChild(g)}else E=i_(r,g,t.serverCache);E!=null?p=i.filter.updateChild(c.getNode(),g,E,S,o,u):p=c.getNode()}}return wu(t,p,c.isFullyInitialized()||Ht(e),i.filter.filtersNodes())}}function vf(i,t,e,r,o,u,c,p){const m=t.serverCache;let g;const S=c?i.filter:i.filter.getIndexedFilter();if(Ht(e))g=S.updateFullNode(m.getNode(),r,null);else if(S.filtersNodes()&&!m.isFiltered()){const w=m.getNode().updateChild(e,r);g=S.updateFullNode(m.getNode(),w,null)}else{const w=Zt(e);if(!m.isCompleteForPath(e)&&Yr(e)>1)return t;const O=be(e),U=m.getNode().getImmediateChild(w).updateChild(O,r);w===".priority"?g=S.updatePriority(m.getNode(),U):g=S.updateChild(m.getNode(),w,U,O,zb,null)}const E=Nb(t,g,m.isFullyInitialized()||Ht(e),S.filtersNodes()),b=new s_(o,E,u);return Pb(i,E,e,o,b,p)}function Km(i,t,e,r,o,u,c){const p=t.eventCache;let m,g;const S=new s_(o,t,u);if(Ht(e))g=i.filter.updateFullNode(t.eventCache.getNode(),r,c),m=wu(t,g,!0,i.filter.filtersNodes());else{const E=Zt(e);if(E===".priority")g=i.filter.updatePriority(t.eventCache.getNode(),r),m=wu(t,g,p.isFullyInitialized(),p.isFiltered());else{const b=be(e),w=p.getNode().getImmediateChild(E);let O;if(Ht(b))O=r;else{const Q=S.getCompleteChild(E);Q!=null?yb(b)===".priority"&&Q.getChild(Eb(b)).isEmpty()?O=Q:O=Q.updateChild(b,r):O=It.EMPTY_NODE}if(w.equals(O))m=t;else{const Q=i.filter.updateChild(p.getNode(),E,O,b,S,c);m=wu(t,Q,p.isFullyInitialized(),i.filter.filtersNodes())}}}return m}function jE(i,t){return i.eventCache.isCompleteForChild(t)}function S6(i,t,e,r,o,u,c){let p=t;return r.foreach((m,g)=>{const S=hn(e,m);jE(t,Zt(S))&&(p=Km(i,p,S,g,o,u,c))}),r.foreach((m,g)=>{const S=hn(e,m);jE(t,Zt(S))||(p=Km(i,p,S,g,o,u,c))}),p}function UE(i,t,e){return e.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function $m(i,t,e,r,o,u,c,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;Ht(e)?g=r:g=new Re(null).setTree(e,r);const S=t.serverCache.getNode();return g.children.inorderTraversal((E,b)=>{if(S.hasChild(E)){const w=t.serverCache.getNode().getImmediateChild(E),O=UE(i,w,b);m=vf(i,m,new Te(E),O,o,u,c,p)}}),g.children.inorderTraversal((E,b)=>{const w=!t.serverCache.isCompleteForChild(E)&&b.value===null;if(!S.hasChild(E)&&!w){const O=t.serverCache.getNode().getImmediateChild(E),Q=UE(i,O,b);m=vf(i,m,new Te(E),Q,o,u,c,p)}}),m}function b6(i,t,e,r,o,u,c){if(yf(o,e)!=null)return t;const p=t.serverCache.isFiltered(),m=t.serverCache;if(r.value!=null){if(Ht(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return vf(i,t,e,m.getNode().getChild(e),o,u,p,c);if(Ht(e)){let g=new Re(null);return m.getNode().forEachChild(Ho,(S,E)=>{g=g.set(new Te(S),E)}),$m(i,t,e,g,o,u,p,c)}else return t}else{let g=new Re(null);return r.foreach((S,E)=>{const b=hn(e,S);m.isCompleteForPath(b)&&(g=g.set(S,m.getNode().getChild(b)))}),$m(i,t,e,g,o,u,p,c)}}function x6(i,t,e,r,o){const u=t.serverCache,c=Nb(t,u.getNode(),u.isFullyInitialized()||Ht(e),u.isFiltered());return Pb(i,c,e,r,zb,o)}function A6(i,t,e,r,o,u){let c;if(yf(r,e)!=null)return t;{const p=new s_(r,t,o),m=t.eventCache.getNode();let g;if(Ht(e)||Zt(e)===".priority"){let S;if(t.serverCache.isFullyInitialized())S=_f(r,La(t));else{const E=t.serverCache.getNode();at(E instanceof It,"serverChildren would be complete if leaf node"),S=n_(r,E)}S=S,g=i.filter.updateFullNode(m,S,u)}else{const S=Zt(e);let E=i_(r,S,t.serverCache);E==null&&t.serverCache.isCompleteForChild(S)&&(E=m.getImmediateChild(S)),E!=null?g=i.filter.updateChild(m,S,E,be(e),p,u):t.eventCache.getNode().hasChild(S)?g=i.filter.updateChild(m,S,It.EMPTY_NODE,be(e),p,u):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=_f(r,La(t)),c.isLeafNode()&&(g=i.filter.updateFullNode(g,c,u)))}return c=t.serverCache.isFullyInitialized()||yf(r,re())!=null,wu(t,g,c,i.filter.filtersNodes())}}class C6{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new Jg(r.getIndex()),u=G4(r);this.processor_=y6(u);const c=e.serverCache,p=e.eventCache,m=o.updateFullNode(It.EMPTY_NODE,c.getNode(),null),g=u.updateFullNode(It.EMPTY_NODE,p.getNode(),null),S=new Qr(m,c.isFullyInitialized(),o.filtersNodes()),E=new Qr(g,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=qf(E,S),this.eventGenerator_=new J4(this.query_)}get query(){return this.query_}}function w6(i){return i.viewCache_.serverCache.getNode()}function R6(i){return gf(i.viewCache_)}function I6(i,t){const e=La(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!Ht(t)&&!e.getImmediateChild(Zt(t)).isEmpty())?e.getChild(t):null}function BE(i){return i.eventRegistrations_.length===0}function D6(i,t){i.eventRegistrations_.push(t)}function FE(i,t,e){const r=[];if(e){at(t==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(e,o);c&&r.push(c)})}if(t){let o=[];for(let u=0;u<i.eventRegistrations_.length;++u){const c=i.eventRegistrations_[u];if(!c.matches(t))o.push(c);else if(t.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function qE(i,t,e,r){t.type===$i.MERGE&&t.source.queryId!==null&&(at(La(i.viewCache_),"We should always have a full cache before handling merges"),at(gf(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,u=E6(i.processor_,o,t,e,r);return v6(i.processor_,u.viewCache),at(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,jb(i,u.changes,u.viewCache.eventCache.getNode(),null)}function N6(i,t){const e=i.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Pe,(u,c)=>{r.push(tl(u,c))}),e.isFullyInitialized()&&r.push(Rb(e.getNode())),jb(i,r,e.getNode(),t)}function jb(i,t,e,r){const o=r?[r]:i.eventRegistrations_;return Z4(i.eventGenerator_,t,e,o)}let Ef;class Ub{constructor(){this.views=new Map}}function O6(i){at(!Ef,"__referenceConstructor has already been defined"),Ef=i}function M6(){return at(Ef,"Reference.ts has not been loaded"),Ef}function k6(i){return i.views.size===0}function r_(i,t,e,r){const o=t.source.queryId;if(o!==null){const u=i.views.get(o);return at(u!=null,"SyncTree gave us an op for an invalid query."),qE(u,t,e,r)}else{let u=[];for(const c of i.views.values())u=u.concat(qE(c,t,e,r));return u}}function Bb(i,t,e,r,o){const u=t._queryIdentifier,c=i.views.get(u);if(!c){let p=_f(e,o?r:null),m=!1;p?m=!0:r instanceof It?(p=n_(e,r),m=!1):(p=It.EMPTY_NODE,m=!1);const g=qf(new Qr(p,m,!1),new Qr(r,o,!1));return new C6(t,g)}return c}function V6(i,t,e,r,o,u){const c=Bb(i,t,r,o,u);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,c),D6(c,e),N6(c,e)}function L6(i,t,e,r){const o=t._queryIdentifier,u=[];let c=[];const p=Kr(i);if(o==="default")for(const[m,g]of i.views.entries())c=c.concat(FE(g,e,r)),BE(g)&&(i.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query));else{const m=i.views.get(o);m&&(c=c.concat(FE(m,e,r)),BE(m)&&(i.views.delete(o),m.query._queryParams.loadsAllData()||u.push(m.query)))}return p&&!Kr(i)&&u.push(new(M6())(t._repo,t._path)),{removed:u,events:c}}function Fb(i){const t=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Pr(i,t){let e=null;for(const r of i.views.values())e=e||I6(r,t);return e}function qb(i,t){if(t._queryParams.loadsAllData())return Gf(i);{const r=t._queryIdentifier;return i.views.get(r)}}function Hb(i,t){return qb(i,t)!=null}function Kr(i){return Gf(i)!=null}function Gf(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Tf;function z6(i){at(!Tf,"__referenceConstructor has already been defined"),Tf=i}function P6(){return at(Tf,"Reference.ts has not been loaded"),Tf}let j6=1;class HE{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Re(null),this.pendingWriteTree_=p6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function U6(i,t,e,r,o){return i6(i.pendingWriteTree_,t,e,r,o),o?sc(i,new Va(Db(),t,e)):[]}function Uo(i,t,e=!1){const r=s6(i.pendingWriteTree_,t);if(r6(i.pendingWriteTree_,t)){let u=new Re(null);return r.snap!=null?u=u.set(re(),!0):ni(r.children,c=>{u=u.set(new Te(c),!0)}),sc(i,new mf(r.path,u,e))}else return[]}function ic(i,t,e){return sc(i,new Va(t_(),t,e))}function B6(i,t,e){const r=Re.fromObject(e);return sc(i,new Hu(t_(),t,r))}function F6(i,t){return sc(i,new qu(t_(),t))}function q6(i,t,e){const r=a_(i,e);if(r){const o=o_(r),u=o.path,c=o.queryId,p=Fn(u,t),m=new qu(e_(c),p);return l_(i,u,m)}else return[]}function Gb(i,t,e,r,o=!1){const u=t._path,c=i.syncPointTree_.get(u);let p=[];if(c&&(t._queryIdentifier==="default"||Hb(c,t))){const m=L6(c,t,e,r);k6(c)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const g=m.removed;if(p=m.events,!o){const S=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,E=i.syncPointTree_.findOnPath(u,(b,w)=>Kr(w));if(S&&!E){const b=i.syncPointTree_.subtree(u);if(!b.isEmpty()){const w=Q6(b);for(let O=0;O<w.length;++O){const Q=w[O],U=Q.query,ht=Xb(i,Q);i.listenProvider_.startListening(Iu(U),Gu(i,U),ht.hashFn,ht.onComplete)}}}!E&&g.length>0&&!r&&(S?i.listenProvider_.stopListening(Iu(t),null):g.forEach(b=>{const w=i.queryToTagMap.get(Yf(b));i.listenProvider_.stopListening(Iu(b),w)}))}K6(i,g)}return p}function Yb(i,t,e,r){const o=a_(i,r);if(o!=null){const u=o_(o),c=u.path,p=u.queryId,m=Fn(c,t),g=new Va(e_(p),m,e);return l_(i,c,g)}else return[]}function H6(i,t,e,r){const o=a_(i,r);if(o){const u=o_(o),c=u.path,p=u.queryId,m=Fn(c,t),g=Re.fromObject(e),S=new Hu(e_(p),m,g);return l_(i,c,S)}else return[]}function G6(i,t,e,r=!1){const o=t._path;let u=null,c=!1;i.syncPointTree_.foreachOnPath(o,(b,w)=>{const O=Fn(b,o);u=u||Pr(w,O),c=c||Kr(w)});let p=i.syncPointTree_.get(o);p?(c=c||Kr(p),u=u||Pr(p,re())):(p=new Ub,i.syncPointTree_=i.syncPointTree_.set(o,p));let m;u!=null?m=!0:(m=!1,u=It.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((w,O)=>{const Q=Pr(O,re());Q&&(u=u.updateImmediateChild(w,Q))}));const g=Hb(p,t);if(!g&&!t._queryParams.loadsAllData()){const b=Yf(t);at(!i.queryToTagMap.has(b),"View does not exist, but we have a tag");const w=$6();i.queryToTagMap.set(b,w),i.tagToQueryMap.set(w,b)}const S=Hf(i.pendingWriteTree_,o);let E=V6(p,t,e,S,u,m);if(!g&&!c&&!r){const b=qb(p,t);E=E.concat(X6(i,t,b))}return E}function Qb(i,t,e){const o=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(t,(c,p)=>{const m=Fn(c,t),g=Pr(p,m);if(g)return g});return kb(o,t,u,e,!0)}function Y6(i,t){const e=t._path;let r=null;i.syncPointTree_.foreachOnPath(e,(g,S)=>{const E=Fn(g,e);r=r||Pr(S,E)});let o=i.syncPointTree_.get(e);o?r=r||Pr(o,re()):(o=new Ub,i.syncPointTree_=i.syncPointTree_.set(e,o));const u=r!=null,c=u?new Qr(r,!0,!1):null,p=Hf(i.pendingWriteTree_,t._path),m=Bb(o,t,p,u?c.getNode():It.EMPTY_NODE,u);return R6(m)}function sc(i,t){return Kb(t,i.syncPointTree_,null,Hf(i.pendingWriteTree_,re()))}function Kb(i,t,e,r){if(Ht(i.path))return $b(i,t,e,r);{const o=t.get(re());e==null&&o!=null&&(e=Pr(o,re()));let u=[];const c=Zt(i.path),p=i.operationForChild(c),m=t.children.get(c);if(m&&p){const g=e?e.getImmediateChild(c):null,S=Vb(r,c);u=u.concat(Kb(p,m,g,S))}return o&&(u=u.concat(r_(o,i,r,e))),u}}function $b(i,t,e,r){const o=t.get(re());e==null&&o!=null&&(e=Pr(o,re()));let u=[];return t.children.inorderTraversal((c,p)=>{const m=e?e.getImmediateChild(c):null,g=Vb(r,c),S=i.operationForChild(c);S&&(u=u.concat($b(S,p,m,g)))}),o&&(u=u.concat(r_(o,i,r,e))),u}function Xb(i,t){const e=t.query,r=Gu(i,e);return{hashFn:()=>(w6(t)||It.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?q6(i,e._path,r):F6(i,e._path);{const u=HN(o,e);return Gb(i,e,null,u)}}}}function Gu(i,t){const e=Yf(t);return i.queryToTagMap.get(e)}function Yf(i){return i._path.toString()+"$"+i._queryIdentifier}function a_(i,t){return i.tagToQueryMap.get(t)}function o_(i){const t=i.indexOf("$");return at(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Te(i.substr(0,t))}}function l_(i,t,e){const r=i.syncPointTree_.get(t);at(r,"Missing sync point for query tag that we're tracking");const o=Hf(i.pendingWriteTree_,t);return r_(r,e,o,null)}function Q6(i){return i.fold((t,e,r)=>{if(e&&Kr(e))return[Gf(e)];{let o=[];return e&&(o=Fb(e)),ni(r,(u,c)=>{o=o.concat(c)}),o}})}function Iu(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(P6())(i._repo,i._path):i}function K6(i,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const o=Yf(r),u=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(u)}}}function $6(){return j6++}function X6(i,t,e){const r=t._path,o=Gu(i,t),u=Xb(i,e),c=i.listenProvider_.startListening(Iu(t),o,u.hashFn,u.onComplete),p=i.syncPointTree_.subtree(r);if(o)at(!Kr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,S,E)=>{if(!Ht(g)&&S&&Kr(S))return[Gf(S).query];{let b=[];return S&&(b=b.concat(Fb(S).map(w=>w.query))),ni(E,(w,O)=>{b=b.concat(O)}),b}});for(let g=0;g<m.length;++g){const S=m[g];i.listenProvider_.stopListening(Iu(S),Gu(i,S))}}return c}class u_{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new u_(e)}node(){return this.node_}}class c_{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=hn(this.path_,t);return new c_(this.syncTree_,e)}node(){return Qb(this.syncTree_,this.path_)}}const W6=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},GE=function(i,t,e){if(!i||typeof i!="object")return i;if(at(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return J6(i[".sv"],t,e);if(typeof i[".sv"]=="object")return Z6(i[".sv"],t);at(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},J6=function(i,t,e){switch(i){case"timestamp":return e.timestamp;default:at(!1,"Unexpected server value: "+i)}},Z6=function(i,t,e){i.hasOwnProperty("increment")||at(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;typeof r!="number"&&at(!1,"Unexpected increment value: "+r);const o=t.node();if(at(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return typeof c!="number"?r:c+r},tO=function(i,t,e,r){return h_(t,new c_(e,i),r)},eO=function(i,t,e){return h_(i,new u_(t),e)};function h_(i,t,e){const r=i.getPriority().val(),o=GE(r,t.getImmediateChild(".priority"),e);let u;if(i.isLeafNode()){const c=i,p=GE(c.getValue(),t,e);return p!==c.getValue()||o!==c.getPriority().val()?new yn(p,wn(o)):i}else{const c=i;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new yn(o))),c.forEachChild(Pe,(p,m)=>{const g=h_(m,t.getImmediateChild(p),e);g!==m&&(u=u.updateImmediateChild(p,g))}),u}}class f_{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function d_(i,t){let e=t instanceof Te?t:new Te(t),r=i,o=Zt(e);for(;o!==null;){const u=Go(r.node.children,o)||{children:{},childCount:0};r=new f_(o,r,u),e=be(e),o=Zt(e)}return r}function ll(i){return i.node.value}function Wb(i,t){i.node.value=t,Xm(i)}function Jb(i){return i.node.childCount>0}function nO(i){return ll(i)===void 0&&!Jb(i)}function Qf(i,t){ni(i.node.children,(e,r)=>{t(new f_(e,i,r))})}function Zb(i,t,e,r){e&&t(i),Qf(i,o=>{Zb(o,t,!0)})}function iO(i,t,e){let r=i.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function rc(i){return new Te(i.parent===null?i.name:rc(i.parent)+"/"+i.name)}function Xm(i){i.parent!==null&&sO(i.parent,i.name,i)}function sO(i,t,e){const r=nO(e),o=Ws(i.node.children,t);r&&o?(delete i.node.children[t],i.node.childCount--,Xm(i)):!r&&!o&&(i.node.children[t]=e.node,i.node.childCount++,Xm(i))}const rO=/[\[\].#$\/\u0000-\u001F\u007F]/,aO=/[\[\].#$\u0000-\u001F\u007F]/,gm=10*1024*1024,tx=function(i){return typeof i=="string"&&i.length!==0&&!rO.test(i)},ex=function(i){return typeof i=="string"&&i.length!==0&&!aO.test(i)},oO=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ex(i)},nx=function(i,t,e){const r=e instanceof Te?new b4(e,i):e;if(t===void 0)throw new Error(i+"contains undefined "+Aa(r));if(typeof t=="function")throw new Error(i+"contains a function "+Aa(r)+" with contents = "+t.toString());if(WS(t))throw new Error(i+"contains "+t.toString()+" "+Aa(r));if(typeof t=="string"&&t.length>gm/3&&bf(t)>gm)throw new Error(i+"contains a string greater than "+gm+" utf8 bytes "+Aa(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(ni(t,(c,p)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(u=!0,!tx(c)))throw new Error(i+" contains an invalid key ("+c+") "+Aa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);x4(r,c),nx(i,p,r),A4(r)}),o&&u)throw new Error(i+' contains ".value" child '+Aa(r)+" in addition to actual children.")}},ix=function(i,t,e,r){if(!ex(e))throw new Error(oT(i,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lO=function(i,t,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ix(i,t,e)},uO=function(i,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!tx(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!oO(e))throw new Error(oT(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class cO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hO(i,t){let e=null;for(let r=0;r<t.length;r++){const o=t[r],u=o.getPath();e!==null&&!Tb(u,e.path)&&(i.eventLists_.push(e),e=null),e===null&&(e={events:[],path:u}),e.events.push(o)}e&&i.eventLists_.push(e)}function Xr(i,t,e){hO(i,e),fO(i,r=>Ki(r,t)||Ki(t,r))}function fO(i,t){i.recursionDepth_++;let e=!0;for(let r=0;r<i.eventLists_.length;r++){const o=i.eventLists_[r];if(o){const u=o.path;t(u)?(dO(i.eventLists_[r]),i.eventLists_[r]=null):e=!1}}e&&(i.eventLists_=[]),i.recursionDepth_--}function dO(i){for(let t=0;t<i.events.length;t++){const e=i.events[t];if(e!==null){i.events[t]=null;const r=e.getEventRunner();Au&&Pn("event: "+e.toString()),ec(r)}}}const pO="repo_interrupt",mO=25;class gO{constructor(t,e,r,o){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pf(),this.transactionQueueTree_=new f_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _O(i,t,e){if(i.stats_=Kg(i.repoInfo_),i.forceRestClient_||KN())i.server_=new df(i.repoInfo_,(r,o,u,c)=>{YE(i,r,o,u,c)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>QE(i,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{un(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new Ys(i.repoInfo_,t,(r,o,u,c)=>{YE(i,r,o,u,c)},r=>{QE(i,r)},r=>{vO(i,r)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=ZN(i.repoInfo_,()=>new W4(i.stats_,i.server_)),i.infoData_=new Y4,i.infoSyncTree_=new HE({startListening:(r,o,u,c)=>{let p=[];const m=i.infoData_.getNode(r._path);return m.isEmpty()||(p=ic(i.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),p_(i,"connected",!1),i.serverSyncTree_=new HE({startListening:(r,o,u,c)=>(i.server_.listen(r,u,o,(p,m)=>{const g=c(p,m);Xr(i.eventQueue_,r._path,g)}),[]),stopListening:(r,o)=>{i.server_.unlisten(r,o)}})}function yO(i){const e=i.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function sx(i){return W6({timestamp:yO(i)})}function YE(i,t,e,r,o){i.dataUpdateCount++;const u=new Te(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let c=[];if(o)if(r){const m=Qh(e,g=>wn(g));c=H6(i.serverSyncTree_,u,m,o)}else{const m=wn(e);c=Yb(i.serverSyncTree_,u,m,o)}else if(r){const m=Qh(e,g=>wn(g));c=B6(i.serverSyncTree_,u,m)}else{const m=wn(e);c=ic(i.serverSyncTree_,u,m)}let p=u;c.length>0&&(p=__(i,u)),Xr(i.eventQueue_,p,c)}function QE(i,t){p_(i,"connected",t),t===!1&&SO(i)}function vO(i,t){ni(t,(e,r)=>{p_(i,e,r)})}function p_(i,t,e){const r=new Te("/.info/"+t),o=wn(e);i.infoData_.updateSnapshot(r,o);const u=ic(i.infoSyncTree_,r,o);Xr(i.eventQueue_,r,u)}function EO(i){return i.nextWriteId_++}function TO(i,t,e){const r=Y6(i.serverSyncTree_,t);return r!=null?Promise.resolve(r):i.server_.get(t).then(o=>{const u=wn(o).withIndex(t._queryParams.getIndex());G6(i.serverSyncTree_,t,e,!0);let c;if(t._queryParams.loadsAllData())c=ic(i.serverSyncTree_,t._path,u);else{const p=Gu(i.serverSyncTree_,t);c=Yb(i.serverSyncTree_,t._path,u,p)}return Xr(i.eventQueue_,t._path,c),Gb(i.serverSyncTree_,t,e,null,!0),u},o=>(m_(i,"get for query "+un(t)+" failed: "+o),Promise.reject(new Error(o))))}function SO(i){m_(i,"onDisconnectEvents");const t=sx(i),e=pf();Gm(i.onDisconnect_,re(),(o,u)=>{const c=tO(o,u,i.serverSyncTree_,t);Ib(e,o,c)});let r=[];Gm(e,re(),(o,u)=>{r=r.concat(ic(i.serverSyncTree_,o,u));const c=CO(i,o);__(i,c)}),i.onDisconnect_=pf(),Xr(i.eventQueue_,re(),r)}function bO(i){i.persistentConnection_&&i.persistentConnection_.interrupt(pO)}function m_(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),Pn(e,...t)}function rx(i,t,e){return Qb(i.serverSyncTree_,t,e)||It.EMPTY_NODE}function g_(i,t=i.transactionQueueTree_){if(t||Kf(i,t),ll(t)){const e=ox(i,t);at(e.length>0,"Sending zero length transaction queue"),e.every(o=>o.status===0)&&xO(i,rc(t),e)}else Jb(t)&&Qf(t,e=>{g_(i,e)})}function xO(i,t,e){const r=e.map(g=>g.currentWriteId),o=rx(i,t,r);let u=o;const c=o.hash();for(let g=0;g<e.length;g++){const S=e[g];at(S.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const E=Fn(t,S.path);u=u.updateChild(E,S.currentOutputSnapshotRaw)}const p=u.val(!0),m=t;i.server_.put(m.toString(),p,g=>{m_(i,"transaction put response",{path:m.toString(),status:g});let S=[];if(g==="ok"){const E=[];for(let b=0;b<e.length;b++)e[b].status=2,S=S.concat(Uo(i.serverSyncTree_,e[b].currentWriteId)),e[b].onComplete&&E.push(()=>e[b].onComplete(null,!0,e[b].currentOutputSnapshotResolved)),e[b].unwatcher();Kf(i,d_(i.transactionQueueTree_,t)),g_(i,i.transactionQueueTree_),Xr(i.eventQueue_,t,S);for(let b=0;b<E.length;b++)ec(E[b])}else{if(g==="datastale")for(let E=0;E<e.length;E++)e[E].status===3?e[E].status=4:e[E].status=0;else{mi("transaction at "+m.toString()+" failed: "+g);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=g}__(i,t)}},c)}function __(i,t){const e=ax(i,t),r=rc(e),o=ox(i,e);return AO(i,o,r),r}function AO(i,t,e){if(t.length===0)return;const r=[];let o=[];const c=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const m=t[p],g=Fn(e,m.path);let S=!1,E;if(at(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)S=!0,E=m.abortReason,o=o.concat(Uo(i.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=mO)S=!0,E="maxretry",o=o.concat(Uo(i.serverSyncTree_,m.currentWriteId,!0));else{const b=rx(i,m.path,c);m.currentInputSnapshot=b;const w=t[p].update(b.val());if(w!==void 0){nx("transaction failed: Data returned ",w,m.path);let O=wn(w);typeof w=="object"&&w!=null&&Ws(w,".priority")||(O=O.updatePriority(b.getPriority()));const U=m.currentWriteId,ht=sx(i),ft=eO(O,b,ht);m.currentOutputSnapshotRaw=O,m.currentOutputSnapshotResolved=ft,m.currentWriteId=EO(i),c.splice(c.indexOf(U),1),o=o.concat(U6(i.serverSyncTree_,m.path,ft,m.currentWriteId,m.applyLocally)),o=o.concat(Uo(i.serverSyncTree_,U,!0))}else S=!0,E="nodata",o=o.concat(Uo(i.serverSyncTree_,m.currentWriteId,!0))}Xr(i.eventQueue_,e,o),o=[],S&&(t[p].status=2,(function(b){setTimeout(b,Math.floor(0))})(t[p].unwatcher),t[p].onComplete&&(E==="nodata"?r.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):r.push(()=>t[p].onComplete(new Error(E),!1,null))))}Kf(i,i.transactionQueueTree_);for(let p=0;p<r.length;p++)ec(r[p]);g_(i,i.transactionQueueTree_)}function ax(i,t){let e,r=i.transactionQueueTree_;for(e=Zt(t);e!==null&&ll(r)===void 0;)r=d_(r,e),t=be(t),e=Zt(t);return r}function ox(i,t){const e=[];return lx(i,t,e),e.sort((r,o)=>r.order-o.order),e}function lx(i,t,e){const r=ll(t);if(r)for(let o=0;o<r.length;o++)e.push(r[o]);Qf(t,o=>{lx(i,o,e)})}function Kf(i,t){const e=ll(t);if(e){let r=0;for(let o=0;o<e.length;o++)e[o].status!==2&&(e[r]=e[o],r++);e.length=r,Wb(t,e.length>0?e:void 0)}Qf(t,r=>{Kf(i,r)})}function CO(i,t){const e=rc(ax(i,t)),r=d_(i.transactionQueueTree_,t);return iO(r,o=>{_m(i,o)}),_m(i,r),Zb(r,o=>{_m(i,o)}),e}function _m(i,t){const e=ll(t);if(e){const r=[];let o=[],u=-1;for(let c=0;c<e.length;c++)e[c].status===3||(e[c].status===1?(at(u===c-1,"All SENT items should be at beginning of queue."),u=c,e[c].status=3,e[c].abortReason="set"):(at(e[c].status===0,"Unexpected transaction status in abort"),e[c].unwatcher(),o=o.concat(Uo(i.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));u===-1?Wb(t,void 0):e.length=u+1,Xr(i.eventQueue_,rc(t),o);for(let c=0;c<r.length;c++)ec(r[c])}}function wO(i){let t="";const e=i.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let o=e[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function RO(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const e of i.split("&")){if(e.length===0)continue;const r=e.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mi(`Invalid query segment '${e}' in query '${i}'`)}return t}const KE=function(i,t){const e=IO(i),r=e.namespace;e.domain==="firebase.com"&&Xs(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&e.domain!=="localhost"&&Xs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||jN();const o=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new ub(e.host,e.secure,r,o,t,"",r!==e.subdomain),path:new Te(e.pathString)}},IO=function(i){let t="",e="",r="",o="",u="",c=!0,p="https",m=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(p=i.substring(0,g-1),i=i.substring(g+2));let S=i.indexOf("/");S===-1&&(S=i.length);let E=i.indexOf("?");E===-1&&(E=i.length),t=i.substring(0,Math.min(S,E)),S<E&&(o=wO(i.substring(S,E)));const b=RO(i.substring(Math.min(i.length,E)));g=t.indexOf(":"),g>=0?(c=p==="https"||p==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const w=t.slice(0,g);if(w.toLowerCase()==="localhost")e="localhost";else if(w.split(".").length<=2)e=w;else{const O=t.indexOf(".");r=t.substring(0,O).toLowerCase(),e=t.substring(O+1),u=r}"ns"in b&&(u=b.ns)}return{host:t,port:m,domain:e,subdomain:r,secure:c,scheme:p,pathString:o,namespace:u}};class DO{constructor(t,e,r,o){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+un(this.snapshot.exportVal())}}class NO{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class OO{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return at(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class y_{constructor(t,e,r,o){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=o}get key(){return Ht(this._path)?null:yb(this._path)}get ref(){return new Js(this._repo,this._path)}get _queryIdentifier(){const t=ME(this._queryParams),e=Yg(t);return e==="{}"?"default":e}get _queryObject(){return ME(this._queryParams)}isEqual(t){if(t=jn(t),!(t instanceof y_))return!1;const e=this._repo===t._repo,r=Tb(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return e&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+S4(this._path)}}class Js extends y_{constructor(t,e){super(t,e,new Zg,!1)}get parent(){const t=Eb(this._path);return t===null?null:new Js(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Yu{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Te(t),r=Wm(this.ref,t);return new Yu(this._node.getChild(e),r,Pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new Yu(o,Wm(this.ref,r),Pe)))}hasChild(t){const e=new Te(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ux(i,t){return i=jn(i),i._checkNotDeleted("ref"),t!==void 0?Wm(i._root,t):i._root}function Wm(i,t){return i=jn(i),Zt(i._path)===null?lO("child","path",t):ix("child","path",t),new Js(i._repo,hn(i._path,t))}function cx(i){i=jn(i);const t=new OO(()=>{}),e=new v_(t);return TO(i._repo,i,e).then(r=>new Yu(r,new Js(i._repo,i._path),i._queryParams.getIndex()))}class v_{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const r=e._queryParams.getIndex();return new DO("value",this,new Yu(t.snapshotNode,new Js(e._repo,e._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new NO(this,t,e):null}matches(t){return t instanceof v_?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}O6(Js);z6(Js);const MO="FIREBASE_DATABASE_EMULATOR_HOST",Jm={};let kO=!1;function VO(i,t,e,r){const o=t.lastIndexOf(":"),u=t.substring(0,o),c=za(u);i.repoInfo_=new ub(t,c,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,e),r&&(i.authTokenProvider_=r)}function LO(i,t,e,r,o){let u=r||i.options.databaseURL;u===void 0&&(i.options.projectId||Xs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pn("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let c=KE(u,o),p=c.repoInfo,m;typeof process<"u"&&mE&&(m=mE[MO]),m?(u=`http://${m}?ns=${p.namespace}`,c=KE(u,o),p=c.repoInfo):c.repoInfo.secure;const g=new XN(i.name,i.options,t);uO("Invalid Firebase Database URL",c),Ht(c.path)||Xs("Database URL must point to the root of a Firebase Database (not including a child path).");const S=PO(p,i,g,new $N(i,e));return new jO(S,i)}function zO(i,t){const e=Jm[t];(!e||e[i.key]!==i)&&Xs(`Database ${t}(${i.repoInfo_}) has already been deleted.`),bO(i),delete e[i.key]}function PO(i,t,e,r){let o=Jm[t.name];o||(o={},Jm[t.name]=o);let u=o[i.toURLString()];return u&&Xs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new gO(i,kO,e,r),o[i.toURLString()]=u,u}class jO{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_O(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Js(this._repo,re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Xs("Cannot call "+t+" on a deleted database.")}}function UO(i=fg(),t){const e=ug(i,"database").getImmediate({identifier:t});if(!e._instanceStarted){const r=ng("database");r&&BO(e,...r)}return e}function BO(i,t,e,r={}){i=jn(i),i._checkNotDeleted("useEmulator");const o=`${t}:${e}`,u=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&Nu(r,u.repoInfo_.emulatorOptions))return;Xs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&Xs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Gh(Gh.OWNER);else if(r.mockUserToken){const p=typeof r.mockUserToken=="string"?r.mockUserToken:rg(r.mockUserToken,i.app.options.projectId);c=new Gh(p)}za(t)&&(sg(t),ag("Database",!0)),VO(u,o,r,c)}function FO(i){MN(hg),Yo(new Da("database",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return LO(r,o,u,e)},"PUBLIC").setMultipleInstances(!0)),ds(gE,_E,i),ds(gE,_E,"esm2020")}Ys.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};Ys.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};FO();var qO="firebase",HO="12.6.0";ds(qO,HO,"app");const GO={apiKey:"AIzaSyDnhtjMPh5bkKgRyZEfqIJmVISrJ_UkrB4",authDomain:"downtimelogger-a96fb.firebaseapp.com",projectId:"downtimelogger-a96fb",storageBucket:"downtimelogger-a96fb.firebasestorage.app",messagingSenderId:"941297034751",appId:"1:941297034751:web:80322c27de1b1b2e0cf3ca",measurementId:"G-ZRNDDFPK74"},YO={apiKey:"AIzaSyCnBuhq5hT62J3_O5kQRsTQucNDyYxMnsM",authDomain:"jobs-data-17ee4.firebaseapp.com",projectId:"jobs-data-17ee4",storageBucket:"jobs-data-17ee4.firebasestorage.app",messagingSenderId:"243005500287",appId:"1:243005500287:web:439852c7875e42cc14484a",measurementId:"G-3JJSP5QEFM"},QO={apiKey:"AIzaSyAawMdb8BDr-1l5GKcPk_k0_vhRgvK0ptg",authDomain:"timesheetapp-c4e54.firebaseapp.com",projectId:"timesheetapp-c4e54",storageBucket:"timesheetapp-c4e54.firebasestorage.app",messagingSenderId:"97633147981",appId:"1:97633147981:web:ee0509bda375a968c71004",measurementId:"G-9PQVG8DCJK"},KO={apiKey:"AIzaSyDXtvrCHrjU_e0v46BbWiBb-e-lAviCSR0",authDomain:"shearers-4c4b4.firebaseapp.com",databaseURL:"https://shearers-4c4b4-default-rtdb.firebaseio.com",projectId:"shearers-4c4b4",storageBucket:"shearers-4c4b4.firebasestorage.app",messagingSenderId:"178658388175",appId:"1:178658388175:web:f85bf8ecb0c88570222fba",measurementId:"G-DG6MNF459P"},hx=Qu(GO,"ccwIssues"),fx=Qu(YO,"jobsMaster"),$O=Qu(QO,"timesheet"),XO=Qu(KO,"shearers"),$E=Ug(hx);Ug(fx);const E_=Ug($O),WO=QS(fx);QS(hx);const dx=UO(XO),ti={jobs:null,downtime:null,timesheets:null,headHistory:null,timestamps:{}},JO=300*1e3,$f=i=>!ti[i]||!ti.timestamps[i]?!1:Date.now()-ti.timestamps[i]<JO,Xf=(i,t)=>{ti[i]=t,ti.timestamps[i]=Date.now()},ZO=()=>{ti.jobs=null,ti.downtime=null,ti.timesheets=null,ti.headHistory=null,ti.timestamps={},console.log("Data cache cleared")},Sf=i=>{if(i===!0||i===1)return!0;if(typeof i=="string"){const t=i.toLowerCase().trim();return t==="yes"||t==="true"||t==="1"||t==="paid"}return!1},ac=async()=>{if($f("jobs"))return console.log("Using cached jobs data"),ti.jobs;try{console.log("Fetching fresh jobs data from Firebase...");const i=new Date().getFullYear(),t=2022,e=i+3,r=[];for(let b=t;b<=e;b++)r.push(b.toString());console.log("Fetching years:",r);let o=[];const u=r.map(async b=>{try{const w=RN(WO,`jobs-${b}.json`),Q=await(await DN(w)).text(),U=JSON.parse(Q);console.log(`=== YEAR ${b} DATA FROM STORAGE ===`),console.log("Data type:",Array.isArray(U)?"array":typeof U);let ht=[];return Array.isArray(U)?ht=U:U.jobs&&Array.isArray(U.jobs)?ht=U.jobs:typeof U=="object"&&(ht=Object.values(U)),ht.forEach(ft=>{o.push({...ft,year:b})}),console.log(`Jobs in ${b}:`,ht.length),ht}catch(w){return console.log(`No data for year ${b}:`,w.message),[]}});await Promise.all(u);const c=o;if(console.log("=== TOTAL JOBS LOADED ===",c.length),c.length>0){console.log("=== JOBS DATA STRUCTURE ==="),console.log("Sample job fields:",Object.keys(c[0])),console.log("Sample job data:",c[0]);const b=c.find(w=>w.year==="2023");b&&(console.log("=== SAMPLE 2023 JOB ==="),console.log("2023 job fields:",Object.keys(b)),console.log("2023 job data:",b))}else console.log("NO JOBS LOADED - check if jobs arrays exist in year documents");const p=c.reduce((b,w)=>{const O=parseFloat(w.actual||0),Q=parseFloat(w.quote||0),U=O>0?O:Q;return b+U},0),m=c.reduce((b,w)=>{if(Sf(w.paid)){const O=parseFloat(w.actual||0),Q=parseFloat(w.quote||0),U=O>0?O:Q;return b+U}return b},0),g=p-m,S=c.filter(b=>!Sf(b.paid)).length,E={jobs:c,totalIncome:p,paidIncome:m,unpaidIncome:g,activeJobs:S,totalJobs:c.length};return Xf("jobs",E),E}catch(i){return console.error("Error fetching jobs data:",i),{jobs:[],totalIncome:0,paidIncome:0,unpaidIncome:0,activeJobs:0,totalJobs:0}}},oc=async()=>{if($f("downtime"))return console.log("Using cached downtime data"),ti.downtime;try{console.log("Fetching fresh downtime data from Firebase...");const i="tgezUokMZ1PO7iEDbLbj2U7Uwbx1",t=[],e=of($E,"user_files",i,"customers"),r=await uf(e);console.log("=== FETCHING CCW DATA ==="),console.log("Customers found:",r.docs.length);for(const p of r.docs){console.log("Processing customer:",p.id);const m=p.id,g=of($E,"user_files",i,"customers",p.id,"visits"),S=await uf(g);console.log(`  Visits for ${p.id}:`,S.docs.length);for(const E of S.docs){const b=E.data();if(console.log(`    Visit ${E.id} fields:`,Object.keys(b)),console.log(`    Visit ${E.id} data:`,b),b.lines){console.log("      Lines in visit:",Array.isArray(b.lines)?b.lines.length:typeof b.lines);const w=Array.isArray(b.lines)?b.lines:Object.values(b.lines);for(const O of w)if(console.log("        Line fields:",Object.keys(O)),console.log("        Line data:",O),console.log("        Heads field:",O.heads),console.log("        Heads type:",typeof O.heads,Array.isArray(O.heads)),O.heads&&(Array.isArray(O.heads)?O.heads.length>0:Object.keys(O.heads).length>0)){const Q=Array.isArray(O.heads)?O.heads:Object.values(O.heads);console.log("        Heads count:",Q.length);for(const U of Q){(U.status||U.fixed)&&console.log(`          Head: status=${U.status}, fixed=${U.fixed} (type: ${typeof U.fixed})`);const ht=U.status==="offline"||U.status==="Offline",ft=U.fixed===!0||U.fixed==="Yes"||U.fixed==="yes"||U.fixed==="fixed"||U.fixed==="Fixed";(ht||ft)&&t.push({id:`${E.id}-${O.title||O.name||"line"}-${U.name||U.id||"head"}`,customer:m,line:O.title||O.name||"Unknown Line",visitId:E.id,date:b.date,headName:U.name||U.id,status:U.status,error:U.error||U.errorMessage||"No error info",fixed:U.fixed})}}}}}t.length>0&&(console.log("=== HEADS DATA FROM FIRESTORE ==="),console.log("Sample head fields:",Object.keys(t[0])),console.log("Sample head data:",t[0]),console.log("Total heads:",t.length));const o=t.filter(p=>p.status==="offline"||p.status==="Offline").length,u=t.filter(p=>p.status==="offline"||p.status==="Offline").slice(0,5);console.log("Offline heads:",o);const c={issues:t,activeIssues:o,totalIssues:t.length,recentIssues:u};return Xf("downtime",c),c}catch(i){return console.error("Error fetching downtime data:",i),{issues:[],activeIssues:0,totalIssues:0,recentIssues:[]}}},lc=async()=>{if($f("timesheets"))return console.log("Using cached timesheets data"),ti.timesheets;try{console.log("Fetching fresh timesheets data from Firebase...");const i=of(E_,"timesheets"),e=(await uf(i)).docs.map(m=>({id:m.id,...m.data()}));e.length>0&&(console.log("=== TIMESHEETS DATA STRUCTURE ==="),console.log("Sample timesheet fields:",Object.keys(e[0])),console.log("Sample timesheet data:",e[0]),console.log("Total timesheets:",e.length));const r=new Date,o=new Date(r);o.setDate(r.getDate()-r.getDay()),o.setHours(0,0,0,0);const u=e.reduce((m,g)=>{if((g.date?.toDate?.()||new Date(g.date||0))>=o){const E=parseFloat(g.hours||0);return m+E}return m},0),c=e.reduce((m,g)=>m+parseFloat(g.hours||0),0),p={timesheets:e,hoursThisWeek:u,totalHours:c,totalEntries:e.length};return Xf("timesheets",p),p}catch(i){return console.error("Error fetching timesheet data:",i),{timesheets:[],hoursThisWeek:0,totalHours:0,totalEntries:0}}},tM=async()=>{try{const i=[];return[...(await ac()).jobs].sort((c,p)=>{const m=parseInt(c.sr||0);return parseInt(p.sr||0)-m}).slice(0,5).forEach(c=>{const p=Sf(c.paid)?"Paid":"Unpaid";i.push({type:"job",message:`SR ${c.sr||"N/A"} - ${c.customer||"Unknown"} (${p})`,time:c.date||"Recently",timestamp:c.date?new Date(c.date):new Date,url:"https://jtidt.netlify.app/"})}),(await oc()).issues.slice(0,5).forEach(c=>{const p=c.fixed===!0||c.fixed==="Yes"||c.fixed==="yes"||c.fixed==="fixed"||c.fixed==="Fixed"?"Fixed":"Offline";i.push({type:"downtime",message:`${c.customer||"Unknown"} - ${c.line} (${p})`,time:c.date||"Recently",timestamp:c.date?new Date(c.date):new Date,url:"https://jti-ccwlog.netlify.app/"})}),[...(await lc()).timesheets].sort((c,p)=>{const m=c.timestamp?.toDate?.()||new Date(c.timestamp||0);return(p.timestamp?.toDate?.()||new Date(p.timestamp||0))-m}).slice(0,5).forEach(c=>{const p=c.invoiceInfo?.invoiceNumber||c.visitName||"N/A";i.push({type:"timesheet",message:`${p} - ${c.customer||c.visitName||"Unknown"}`,time:eM(c.timestamp?.toDate?.()||new Date(c.timestamp||0)),timestamp:c.timestamp?.toDate?.()||new Date(c.timestamp||0),url:"https://jti-ts3.netlify.app/"})}),i.sort((c,p)=>p.timestamp-c.timestamp),i.slice(0,10)}catch(i){return console.error("Error fetching recent activity:",i),[]}},eM=i=>{const e=new Date-i,r=Math.floor(e/6e4),o=Math.floor(e/36e5),u=Math.floor(e/864e5);return r<1?"Just now":r<60?`${r} minute${r>1?"s":""} ago`:o<24?`${o} hour${o>1?"s":""} ago`:u<7?`${u} day${u>1?"s":""} ago`:i.toLocaleDateString()},nM=async()=>{try{const[i,t,e]=await Promise.all([ac(),oc(),lc()]),r=new Map;i.jobs.forEach(u=>{const c=u.customer||u.customerName;if(c&&c.trim()&&c.toLowerCase()!=="unknown customer"){const p=c.trim();r.has(p)||r.set(p,{name:p,sources:[]}),r.get(p).sources.includes("Jobs")||r.get(p).sources.push("Jobs")}}),t.issues.forEach(u=>{if(u.customer&&u.customer.trim()&&u.customer.toLowerCase()!=="unknown"){const c=u.customer.trim();r.has(c)||r.set(c,{name:c,sources:[]}),r.get(c).sources.includes("Downtime")||r.get(c).sources.push("Downtime")}}),e.timesheets.forEach(u=>{const c=u.customer||u.visitName;if(c&&c.trim()&&c.toLowerCase()!=="unknown"){const p=c.trim();r.has(p)||r.set(p,{name:p,sources:[]}),r.get(p).sources.includes("Timesheets")||r.get(p).sources.push("Timesheets")}});const o=Array.from(r.values()).sort((u,c)=>u.name.toLowerCase().localeCompare(c.name.toLowerCase()));return console.log("=== CUSTOMERS LIST ==="),console.log("Total unique customers:",o.length),o}catch(i){return console.error("Error fetching customers list:",i),[]}},iM=async i=>{if(!i)return{jobs:[],issues:[],timesheets:[]};try{const[t,e,r]=await Promise.all([ac(),oc(),lc()]),o=i.toLowerCase(),u=t.jobs.filter(E=>{const b=(E.customer||E.customerName||"").toLowerCase();return b.includes(o)||o.includes(b)}),c=e.issues.filter(E=>{const b=(E.customer||"").toLowerCase();return b.includes(o)||o.includes(b)}),p=r.timesheets.filter(E=>{const b=(E.customer||E.visitName||"").toLowerCase();return b.includes(o)||o.includes(b)}),m=(E,b)=>{const w=E.date?.toDate?.()||new Date(E.date||E.timestamp||0);return(b.date?.toDate?.()||new Date(b.date||b.timestamp||0))-w};u.sort(m),c.sort((E,b)=>{const w=E.timestamp?.toDate?.()||new Date(E.timestamp||0);return(b.timestamp?.toDate?.()||new Date(b.timestamp||0))-w}),p.sort(m);const g=u.reduce((E,b)=>{const w=parseFloat(b.actual||0),O=parseFloat(b.quote||0),Q=w>0?w:O;return E+Q},0),S=u.reduce((E,b)=>{if(Sf(b.paid)){const w=parseFloat(b.actual||0),O=parseFloat(b.quote||0),Q=w>0?w:O;return E+Q}return E},0);return console.log(`=== CUSTOMER DATA FOR: ${i} ===`),console.log("Jobs:",u.length),console.log("Issues:",c.length),console.log("Timesheets:",p.length),{jobs:u,issues:c,timesheets:p,totalJobs:u.length,totalIssues:c.length,totalTimesheets:p.length,totalIncome:g,paidIncome:S,unpaidIncome:g-S}}catch(t){return console.error("Error fetching customer data:",t),{jobs:[],issues:[],timesheets:[]}}},sM=async i=>{if(console.log("=== SEARCH STARTED ==="),console.log("Search term:",i),!i||i.trim()==="")return{jobs:[],issues:[],timesheets:[],headHistory:[],totalResults:0};const t=i.trim().toLowerCase(),e=/^\d{7}$/.test(i.trim());console.log("Normalized term:",t),console.log("Is report number:",e);const o=(u=>{const c=[u],p=u.replace(/([A-Za-z]+)(\d+)/g,"$1 $2");p!==u&&c.push(p);const m=u.replace(/([A-Za-z]+)\s+(\d+)/g,"$1$2");return m!==u&&c.push(m),c})(t);console.log("Search variations:",o);try{const[u,c,p,m]=await Promise.all([ac(),oc(),lc(),lM(i)]);if(console.log("Total jobs to search:",u.jobs.length),u.jobs.length>0){const O=u.jobs[0];console.log("Sample job ALL FIELDS:",Object.keys(O)),console.log("Sample job FULL DATA:",O),O.totals&&console.log("Sample job TOTALS:",O.totals),O.jobs&&console.log("Sample job JOBS array:",O.jobs)}if(u.jobs.length>0){const O=u.jobs.slice(0,5).map(Q=>Q.sr);console.log("Sample SR numbers:",O)}console.log("Searching through",u.jobs.length,"jobs for:",i.trim());const g=(O,Q,U="")=>{const ht=[],ft=(lt,bt,jt)=>{if(lt!=null){if(typeof lt=="string"){const At=lt.toLowerCase();o.some(R=>At.includes(R))&&ht.push({field:jt||bt,value:lt})}else if(typeof lt=="number"){const At=lt.toString().toLowerCase();o.some(R=>At.includes(R))&&ht.push({field:jt||bt,value:lt.toString()})}else if(Array.isArray(lt))lt.forEach((At,R)=>{ft(At,`${bt}[${R}]`,`${jt?jt+".":""}${bt}[${R}]`)});else if(typeof lt=="object"){if(lt.toDate)return;Object.entries(lt).forEach(([At,R])=>{ft(R,At,`${jt?jt+".":""}${bt}.${At}`)})}}};return Object.entries(O).forEach(([lt,bt])=>{ft(bt,lt,lt)}),ht},S=u.jobs.filter(O=>{const Q=JSON.stringify(O).toLowerCase();return o.some(U=>Q.includes(U))}).map(O=>({...O,matchedFields:g(O,t)})),E=c.issues.filter(O=>{const Q=JSON.stringify(O).toLowerCase();return o.some(U=>Q.includes(U))}).map(O=>({...O,matchedFields:g(O,t)}));if(p.timesheets.length>0){const O=p.timesheets[0];console.log("Sample timesheet invoiceInfo:",O.invoiceInfo)}const b=p.timesheets.filter(O=>{const Q=JSON.stringify(O).toLowerCase();return o.some(U=>Q.includes(U))}).map(O=>({...O,matchedFields:g(O,t)})),w=(O,Q)=>{const U=O.date?.toDate?.()||new Date(O.date||O.timestamp||0);return(Q.date?.toDate?.()||new Date(Q.date||Q.timestamp||0))-U};return S.sort(w),E.sort((O,Q)=>{const U=O.timestamp?.toDate?.()||new Date(O.timestamp||0);return(Q.timestamp?.toDate?.()||new Date(Q.timestamp||0))-U}),b.sort(w),console.log("=== SEARCH RESULTS ==="),console.log("Jobs found:",S.length),console.log("Issues found:",E.length),console.log("Timesheets found:",b.length),console.log("Head history found:",m.length),S.length>0&&console.log("First matching job:",S[0]),b.length>0&&console.log("First matching timesheet:",b[0]),{jobs:S,issues:E,timesheets:b,headHistory:m,totalResults:S.length+E.length+b.length+m.length,searchTerm:i.trim()}}catch(u){return console.error("Error searching unified data:",u),{jobs:[],issues:[],timesheets:[],headHistory:[],totalResults:0,error:u.message}}},rM=async()=>{try{const i=[],t=of(E_,"timesheets");(await uf(t)).docs.forEach(o=>{const u=o.data(),c=u.customer||u.visitName||"Unknown",p=u.visitName||"",m=u.entries||[];if(m.forEach(g=>{g.date&&i.push({id:o.id,date:g.date,customer:c,visitName:p,hours:g.hours||0,serviceWork:u.serviceReportData?.[g.date]||"",timestamp:u.timestamp,invoiceNumber:u.invoiceInfo?.invoiceNumber||"",type:"timesheet"})}),m.length===0&&u.timestamp){const S=(u.timestamp?.toDate?.()||new Date(u.timestamp)).toISOString().split("T")[0];i.push({id:o.id,date:S,customer:c,visitName:p,hours:0,serviceWork:"",timestamp:u.timestamp,invoiceNumber:u.invoiceInfo?.invoiceNumber||"",type:"timesheet"})}});const r=await oM();return r.calendarEvents&&r.calendarEvents.length>0&&(i.push(...r.calendarEvents),console.log("Added",r.calendarEvents.length,"onsite events from Shearers database")),i.sort((o,u)=>new Date(u.date)-new Date(o.date)),console.log("Calendar events loaded:",i.length,"(timesheets + onsite)"),i}catch(i){return console.error("Error fetching calendar events:",i),[]}},aM=async(i,t)=>{try{const e=TD(E_,"timesheets",i),r=await VD(e);if(!r.exists())throw new Error("Timesheet not found");const o=r.data(),c=(o.entries||[]).filter(m=>m.date!==t),p={...o.serviceReportData||{}};return delete p[t],c.length===0?(await zD(e),console.log("Deleted entire timesheet (no entries left):",i)):(await LD(e,{entries:c,serviceReportData:p}),console.log("Deleted entry from timesheet:",i,t)),!0}catch(e){throw console.error("Error deleting timesheet entry:",e),e}},oM=async()=>{if($f("headHistory"))return console.log("Using cached head history data"),ti.headHistory;try{console.log("Fetching fresh head history data from Firebase...");const i=[],t=[],e=["jti-downtime/head-history","jti-downtime/main-logger/data"],r=m=>{if(!m)return null;if(typeof m=="string"&&m.match(/^\d{4}-\d{2}-\d{2}$/))return m;const g=new Date(m);return isNaN(g.getTime())?null:g.toISOString().split("T")[0]},o=(m,g="",S="")=>{if(!(!m||typeof m!="object")){if(m.date||m.visitDate||m.timestamp){const E=r(m.date||m.visitDate||m.timestamp);if(E){const b={path:g,source:S,...m};i.push(b);let w=[];m.notes&&w.push(m.notes),m.machineNotes&&w.push(`Machine Notes: ${m.machineNotes}`),m.line&&w.push(`Line: ${m.line}`),m.status&&w.push(`Status: ${m.status}`),m.repairStatus&&w.push(`Repair: ${m.repairStatus}`),m.fixed!==void 0&&w.push(`Fixed: ${m.fixed}`),m.error&&w.push(`Error: ${m.error}`),m.description&&w.push(m.description),m.action&&w.push(`Action: ${m.action}`),t.push({id:`${S}-${g||Date.now()}`,date:E,customer:m.customer||m.machine||m.location||"Shearers",visitName:m.line?`Line: ${m.line}`:"Onsite",hours:0,serviceWork:w.join(" | "),status:m.status,repairStatus:m.repairStatus,line:m.line,type:"onsite"})}}if(Array.isArray(m)){m.forEach((E,b)=>{o(E,`${g}[${b}]`,S)});return}for(const E in m)m[E]&&typeof m[E]=="object"&&o(m[E],g?`${g}/${E}`:E,S)}};console.log("Querying paths:",e);for(const m of e)try{console.log(`Attempting to fetch: ${m}`);const g=ux(dx,m),S=await cx(g);if(S.exists()){const E=S.val();console.log(`=== SHEARERS PATH: ${m} ===`),console.log("Data type:",Array.isArray(E)?"array":typeof E),console.log("Sample data:",JSON.stringify(E).substring(0,500)),typeof E=="object"&&!Array.isArray(E)&&console.log("Keys:",Object.keys(E).slice(0,10)),o(E,"",m),console.log(`After processing ${m}: ${i.length} entries, ${t.length} events`)}else console.log(`Path ${m} has no data (snapshot.exists() = false)`)}catch(g){console.error(`Error querying ${m}:`,g.message,g)}const u=[],c=new Set;t.forEach(m=>{const g=`${m.date}-${m.customer}`;c.has(g)||(c.add(g),u.push(m))}),console.log("Head history loaded:",i.length,"entries,",u.length,"unique calendar events");const p={entries:i,calendarEvents:u};return Xf("headHistory",p),p}catch(i){return console.error("Error fetching head history:",i),{entries:[],calendarEvents:[]}}},lM=async i=>{try{console.log("=== SEARCHING HEAD HISTORY ==="),console.log("Search term:",i);const t=[],e=i.toLowerCase(),r=new Set,o=["jti-downtime/head-history","jti-downtime/main-logger/data"],u=(c,p="",m="")=>{if(!c||typeof c!="object")return;const g=[],E=(w=>{const O=[w],Q=w.replace(/([A-Za-z]+)(\d+)/g,"$1 $2");Q!==w&&O.push(Q);const U=w.replace(/([A-Za-z]+)\s+(\d+)/g,"$1$2");return U!==w&&O.push(U),O})(e),b=(w,O)=>{if(O&&typeof O=="string"){const Q=O.toLowerCase();E.some(U=>Q.includes(U))&&g.push({field:w,value:O})}};if(b("notes",c.notes),b("machineNotes",c.machineNotes),b("machine",c.machine),b("customer",c.customer),b("location",c.location),b("action",c.action),b("description",c.description),b("error",c.error),b("head",c.head),b("line",c.line),b("status",c.status),b("repairStatus",c.repairStatus),g.length>0){const w=`${m}-${p}`;r.has(w)||(r.add(w),console.log("Head History entry fields:",Object.keys(c)),console.log("Head History entry data:",c),t.push({path:p,source:m,customer:c.customer||c.machine||c.location||"Shearers",date:c.date||c.visitDate||c.timestamp||"",status:c.status||c.Status,repairStatus:c.repaired||c.repairStatus||c.repair_status||c.RepairStatus,line:c.line||c.Line,error:c.issue||c.error||c.Error||c.errorMessage,fixed:c.fixed||c.Fixed||c.repaired,head:c.head,matchedFields:g,data:c}))}if(Array.isArray(c)){c.forEach((w,O)=>{u(w,`${p}[${O}]`,m)});return}for(const w in c)c[w]&&typeof c[w]=="object"&&u(c[w],p?`${p}/${w}`:w,m)};for(const c of o)try{console.log(`Searching path: ${c}`);const p=ux(dx,c),m=await cx(p);if(m.exists()){const g=m.val();console.log(`Data found in ${c}, type:`,Array.isArray(g)?"array":typeof g),typeof g=="object"&&!Array.isArray(g)&&console.log(`Keys in ${c}:`,Object.keys(g).slice(0,10)),u(g,"",c),console.log(`Results after ${c}:`,t.length)}else console.log(`No data in ${c}`)}catch(p){console.error(`Error searching ${c}:`,p.message)}return console.log("=== HEAD HISTORY SEARCH COMPLETE ==="),console.log("Total results:",t.length),t.length>0&&(console.log("Sample result object:",t[0]),console.log("Sample result data keys:",Object.keys(t[0].data||{})),console.log("Sample result FULL DATA:",JSON.stringify(t[0].data,null,2))),t}catch(t){return console.error("Error searching head history:",t),[]}},Di=i=>{if(i===!0||i===1)return!0;if(typeof i=="string"){const t=i.toLowerCase().trim();return t==="yes"||t==="true"||t==="1"||t==="paid"}return!1},Ph=({text:i,searchTerm:t})=>{if(!t||!i)return T.jsx(T.Fragment,{children:i});const e=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),r=i.toString().split(e);return T.jsx(T.Fragment,{children:r.map((o,u)=>e.test(o)?T.jsx("mark",{style:{backgroundColor:"#fef08a",padding:"1px 2px",borderRadius:"2px",fontWeight:"600"},children:o},u):T.jsx("span",{children:o},u))})},uM=i=>{const e=new Date-i,r=Math.floor(e/1e3),o=Math.floor(e/6e4),u=Math.floor(e/36e5);return r<60?"just now":o<60?`${o}m ago`:u<24?`${u}h ago`:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};function cM(){const[i,t]=Ot.useState("dashboard"),[e,r]=Ot.useState({totalIncome:0,currentYearIncome:0,unpaidJobs:0,unpaidJobsList:[],overdueJobsList:[],currentSR:"",currentSRCustomer:""}),[o,u]=Ot.useState(0),[c,p]=Ot.useState(!0),[m,g]=Ot.useState([]),[S,E]=Ot.useState(()=>localStorage.getItem("jti-unified-search-term")||""),[b,w]=Ot.useState(()=>{const P=localStorage.getItem("jti-unified-search-results");return P?JSON.parse(P):null}),[O,Q]=Ot.useState(!1),[U,ht]=Ot.useState([]),[ft,lt]=Ot.useState(""),[bt,jt]=Ot.useState(null),[At,R]=Ot.useState(!1),[C,N]=Ot.useState(!1),[L,k]=Ot.useState(!0),[z,I]=Ot.useState(new Date().getFullYear().toString()),[ce,Ve]=Ot.useState("all"),[$,ct]=Ot.useState({paid:[],unpaid:[]}),[vt,Xt]=Ot.useState([]),[ee,V]=Ot.useState(null),[W,ut]=Ot.useState("all"),[dt,Nt]=Ot.useState(!1),[kt,Gt]=Ot.useState(null),[xe,me]=Ot.useState(null),[Mi,Wi]=Ot.useState([]),[Tn,Ts]=Ot.useState(!1),[ii,Wr]=Ot.useState([]),[Ss,Jr]=Ot.useState(new Date),[qa,je]=Ot.useState(null),[Ue,ki]=Ot.useState(!1),ul=async P=>{if(!P||P.trim()===""){w(null);return}Q(!0);try{const it=await sM(P);if(W==="customer"&&ft){const yt=ft.toLowerCase(),rt={...it,jobs:it.jobs.filter(Et=>(Et.customer||Et.customerName||"").toLowerCase().includes(yt)),issues:it.issues.filter(Et=>(Et.customer||"").toLowerCase().includes(yt)),timesheets:it.timesheets.filter(Et=>(Et.customer||Et.visitName||"").toLowerCase().includes(yt))};rt.totalResults=rt.jobs.length+rt.issues.length+rt.timesheets.length,w(rt)}else w(it)}catch(it){console.error("Search error:",it)}finally{Q(!1)}};Ot.useEffect(()=>{const P=setTimeout(()=>{ul(S)},300);return()=>clearTimeout(P)},[S,W,ft]),Ot.useEffect(()=>{S?localStorage.setItem("jti-unified-search-term",S):localStorage.removeItem("jti-unified-search-term")},[S]),Ot.useEffect(()=>{b?localStorage.setItem("jti-unified-search-results",JSON.stringify(b)):localStorage.removeItem("jti-unified-search-results")},[b]);const Ha=()=>{E(""),w(null),localStorage.removeItem("jti-unified-search-term"),localStorage.removeItem("jti-unified-search-results")},pn=async()=>{ki(!0);try{const P=await rM();Wr(P)}catch(P){console.error("Error loading calendar events:",P)}finally{ki(!1)}},bs=()=>{!Tn&&ii.length===0&&pn(),Ts(!Tn),lt(""),w(null),E("")},Zs=async P=>{if(lt(P),N(!1),w(null),E(""),P){R(!0);try{const it=await iM(P);jt(it)}catch(it){console.error("Error fetching customer data:",it)}finally{R(!1)}}else jt(null)},Zr=()=>{lt(""),jt(null),ut("all")},Vi=async()=>{p(!0),V(null);try{const[P,it,yt,rt,Et]=await Promise.all([ac(),oc(),lc(),tM(),nM()]),K=new Date().getFullYear().toString(),wt=P.jobs.filter(ne=>ne.year===K).reduce((ne,Se)=>{if(Di(Se.paid)){const Mn=parseFloat(Se.actual||0),Be=parseFloat(Se.quote||0),Ye=Mn>0?Mn:Be;return ne+Ye}return ne},0),nt=[...P.jobs].sort((ne,Se)=>{const Mn=parseInt(ne.sr||0);return parseInt(Se.sr||0)-Mn})[0];console.log("Total jobs loaded:",P.jobs.length),console.log("Current job (highest SR):",nt),console.log("Unpaid jobs count:",P.jobs.filter(ne=>!Di(ne.paid)).length);const he=P.jobs.filter(ne=>!Di(ne.paid)),on=new Date;on.setHours(0,0,0,0);const On=he.filter(ne=>{if(!ne.expPaid)return!1;const Se=new Date(ne.expPaid);return isNaN(Se.getTime())?!1:(Se.setHours(0,0,0,0),Se<on)});r({totalIncome:P.paidIncome,currentYearIncome:wt,unpaidJobs:he.length,unpaidJobsList:he.slice(0,5),overdueJobsList:On,currentSR:nt?.sr||nt?.invoiceNumber||"N/A",currentSRCustomer:nt?.customer||nt?.customerName||"N/A"}),g(rt),ht(Et),Xt(P.jobs);const gi=Array(12).fill(0),Li=Array(12).fill(0);P.jobs.forEach(ne=>{if(ne.year===K&&ne.invoiceDate){let Se;if(ne.invoiceDate.includes("-")){const[Mn,Be,Ye]=ne.invoiceDate.split("-").map(Number);Se=new Date(Mn,Be-1,Ye)}else Se=new Date(ne.invoiceDate);if(!isNaN(Se.getTime())){const Mn=Se.getMonth(),Be=parseFloat(ne.actual||0),Ye=parseFloat(ne.quote||0),Ae=Be>0?Be:Ye;Di(ne.paid)?gi[Mn]+=Ae:Li[Mn]+=Ae}}}),ct({paid:gi,unpaid:Li}),Gt(new Date)}catch(P){console.error("Error loading dashboard data:",P),V(`Failed to load data: ${P.message}`)}finally{p(!1)}},cl=async()=>{ZO(),await Vi()},Ga=P=>{if(xe===P)me(null),Wi([]);else{const it=z==="all"?new Date().getFullYear().toString():z,yt=vt.filter(rt=>{if(rt.year!==it||!rt.invoiceDate)return!1;let Et;if(rt.invoiceDate.includes("-")){const[K,Ct,wt]=rt.invoiceDate.split("-").map(Number);Et=new Date(K,Ct-1,wt)}else Et=new Date(rt.invoiceDate);return!isNaN(Et.getTime())&&Et.getMonth()===P});me(P),Wi(yt)}};Ot.useEffect(()=>{Vi()},[]),Ot.useEffect(()=>{if(vt.length===0)return;const P=Array(12).fill(0),it=Array(12).fill(0);vt.forEach(yt=>{if((z==="all"||yt.year===z)&&yt.invoiceDate){let Et;if(yt.invoiceDate.includes("-")){const[K,Ct,wt]=yt.invoiceDate.split("-").map(Number);Et=new Date(K,Ct-1,wt)}else Et=new Date(yt.invoiceDate);if(!isNaN(Et.getTime())){const K=Et.getMonth(),Ct=parseFloat(yt.actual||0),wt=parseFloat(yt.quote||0),le=Ct>0?Ct:wt;Di(yt.paid)?P[K]+=le:it[K]+=le}}}),ct({paid:P,unpaid:it})},[z,ce,vt]);const Ya=[{id:"jobs",name:"Jobs Tracker",url:"https://jtidt.netlify.app/",icon:T.jsx("img",{src:"/jtijobs.png",alt:"Jobs",style:{width:"48px",height:"48px",objectFit:"contain"}}),color:"#3b82f6",description:"Manage quotes, invoices, and job tracking"},{id:"downtime",name:"Shearers DTL",url:"https://shearersjtidowntime.netlify.app/",icon:T.jsx("img",{src:"/shearersdowntime.png",alt:"Downtime",style:{width:"48px",height:"48px",objectFit:"contain"}}),color:"#ef4444",description:"Track equipment downtime events"},{id:"timesheet",name:"Time Sheet",url:"https://jti-ts3.netlify.app/",icon:T.jsx("img",{src:"/timesheet.png",alt:"TimeSheet",style:{width:"48px",height:"48px",objectFit:"contain"}}),color:"#10b981",description:"Employee time tracking and payroll"},{id:"weigher",name:"Weigher Issues",url:"https://jti-ccwlog.netlify.app/",icon:T.jsx("img",{src:"/mdtl.png",alt:"Weigher",style:{width:"48px",height:"48px",objectFit:"contain"}}),color:"#f59e0b",description:"Ishida weigher issue logging"},{id:"servicequote",name:"Service Quote",url:"https://jtiservicequote.netlify.app/",icon:T.jsx("img",{src:"/servicequote.png",alt:"Quote",style:{width:"48px",height:"48px",objectFit:"contain"}}),color:"#8b5cf6",description:"Create and manage service quotes"}],Qa=({icon:P,title:it,value:yt,color:rt,trend:Et,onClick:K})=>T.jsxs("div",{onClick:K,style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",cursor:K?"pointer":"default",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:Ct=>{K&&(Ct.currentTarget.style.transform="translateY(-2px)",Ct.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)")},onMouseLeave:Ct=>{Ct.currentTarget.style.transform="translateY(0)",Ct.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[T.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:`${rt}20`,display:"flex",alignItems:"center",justifyContent:"center",color:rt},children:P}),Et&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:Et>0?"#10b981":"#ef4444",fontSize:"14px",fontWeight:"500"},children:[T.jsx(jC,{size:16,style:{transform:Et<0?"rotate(180deg)":"none"}}),Math.abs(Et),"%"]})]}),T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"14px",color:st.textSecondary,marginBottom:"4px"},children:it}),T.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:st.text},children:yt})]})]}),si=({app:P})=>T.jsx("div",{style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.2s",border:"2px solid transparent"},onMouseEnter:it=>{it.currentTarget.style.transform="translateY(-4px)",it.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",it.currentTarget.style.borderColor=P.color},onMouseLeave:it=>{it.currentTarget.style.transform="translateY(0)",it.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)",it.currentTarget.style.borderColor="transparent"},onClick:()=>window.open(P.url,"_blank"),children:T.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"16px"},children:[T.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"12px",background:`${P.color}20`,display:"flex",alignItems:"center",justifyContent:"center",color:P.color,flexShrink:0},children:P.icon}),T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[T.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:st.text},children:P.name}),T.jsx(Jp,{size:16,style:{color:st.textSecondary}})]}),T.jsx("p",{style:{fontSize:"14px",color:st.textSecondary,lineHeight:"1.5"},children:P.description})]})]})}),an=({item:P,colors:it})=>{const yt={job:"#3b82f6",downtime:"#ef4444",timesheet:"#10b981",issue:"#f59e0b"};return T.jsxs("div",{onClick:()=>P.url&&window.open(P.url,"_blank"),style:{display:"flex",gap:"12px",borderBottom:`1px solid ${it?.border||"#f3f4f6"}`,cursor:P.url?"pointer":"default",transition:"background 0.2s",margin:"0 -8px",padding:"12px 8px",borderRadius:"6px"},onMouseEnter:rt=>{P.url&&(rt.currentTarget.style.background=it?.hover||"#f9fafb")},onMouseLeave:rt=>{rt.currentTarget.style.background="transparent"},children:[T.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:yt[P.type],marginTop:"6px",flexShrink:0}}),T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{fontSize:"14px",color:it?.text||"#111827",marginBottom:"4px"},children:P.message}),T.jsx("div",{style:{fontSize:"12px",color:it?.textSecondary||"#9ca3af"},children:P.time})]}),P.url&&T.jsx(Jp,{size:14,style:{color:it?.textSecondary||"#9ca3af",marginTop:"4px"}})]})},qn=({events:P,currentMonth:it,setCurrentMonth:yt,colors:rt,onRefresh:Et})=>{const[K,Ct]=Ot.useState(null),[wt,le]=Ot.useState([]),[nt,he]=Ot.useState(null),[on,On]=Ot.useState(!1),gi=async Rt=>{On(!0);try{await aM(Rt.id,Rt.date),le(Ke=>Ke.filter(mn=>!(mn.id===Rt.id&&mn.date===Rt.date))),he(null),Et&&Et()}catch(Ke){alert("Failed to delete entry: "+Ke.message)}On(!1)},Li=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Se=Rt=>{const Ke=Rt.getFullYear(),mn=Rt.getMonth(),zi=new Date(Ke,mn,1),yi=new Date(Ke,mn+1,0).getDate(),$e=zi.getDay();return{daysInMonth:yi,startingDay:$e}},Mn=()=>{yt(new Date(it.getFullYear(),it.getMonth()-1))},Be=()=>{yt(new Date(it.getFullYear(),it.getMonth()+1))},Ye=Rt=>{const Ke=`${it.getFullYear()}-${String(it.getMonth()+1).padStart(2,"0")}-${String(Rt).padStart(2,"0")}`;return P.filter(mn=>mn.date===Ke)},Ae=Rt=>{const Ke=Ye(Rt);Ct(Rt),le(Ke)},{daysInMonth:Qe,startingDay:_i}=Se(it);return T.jsxs("div",{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[T.jsx("button",{onClick:Mn,style:{padding:"8px 12px",background:rt.cardBg,border:`1px solid ${rt.border}`,borderRadius:"6px",cursor:"pointer",color:rt.text},children:T.jsx(dC,{size:20})}),T.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:rt.text},children:[Li[it.getMonth()]," ",it.getFullYear()]}),T.jsx("button",{onClick:Be,style:{padding:"8px 12px",background:rt.cardBg,border:`1px solid ${rt.border}`,borderRadius:"6px",cursor:"pointer",color:rt.text},children:T.jsx(mC,{size:20})})]}),T.jsx("div",{className:"calendar-day-names",children:ne.map(Rt=>T.jsx("div",{className:"calendar-day-name",style:{color:rt.textSecondary},children:Rt},Rt))}),T.jsxs("div",{className:"calendar-grid",children:[Array.from({length:_i}).map((Rt,Ke)=>T.jsx("div",{className:"calendar-day-cell",style:{background:rt.cardBg,opacity:.3}},`empty-${Ke}`)),Array.from({length:Qe}).map((Rt,Ke)=>{const mn=Ke+1,zi=Ye(mn),Hn=zi.length>0,yi=new Date().toDateString()===new Date(it.getFullYear(),it.getMonth(),mn).toDateString();return T.jsxs("div",{onClick:()=>Ae(mn),className:"calendar-day-cell",style:{background:Hn?L?"#1e3a5f":"#e0f2fe":rt.cardBg,border:yi?"2px solid #3b82f6":`1px solid ${rt.border}`},children:[T.jsx("div",{className:"calendar-day-number",style:{fontWeight:yi?"700":"500",color:yi?"#3b82f6":rt.text},children:mn}),Hn&&T.jsxs("div",{style:{color:rt.textSecondary,overflow:"hidden"},children:[[...new Set(zi.map($e=>$e.customer))].slice(0,2).map(($e,Gn)=>T.jsx("div",{className:"calendar-event-preview",children:$e},Gn)),[...new Set(zi.map($e=>$e.customer))].length>2&&T.jsxs("div",{className:"calendar-event-preview",children:["+",[...new Set(zi.map($e=>$e.customer))].length-2," more"]})]})]},mn)})]}),K&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>Ct(null),children:T.jsxs("div",{style:{background:rt.cardBg,borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:Rt=>Rt.stopPropagation(),children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[T.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:rt.text},children:[Li[it.getMonth()]," ",K,", ",it.getFullYear()]}),T.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[T.jsxs("button",{onClick:()=>{window.open("https://jti-ts3.netlify.app/","_blank")},style:{padding:"6px 10px",fontSize:"12px",background:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(Z0,{size:14})," Add"]}),T.jsx("button",{onClick:()=>Ct(null),style:{background:"none",border:"none",cursor:"pointer",color:rt.textSecondary},children:T.jsx(tm,{size:20})})]})]}),wt.length===0?T.jsxs("div",{style:{textAlign:"center",padding:"24px",color:rt.textSecondary},children:[T.jsx("p",{style:{marginBottom:"12px"},children:"No entries for this day"}),T.jsxs("button",{onClick:()=>{window.open("https://jti-ts3.netlify.app/","_blank")},style:{padding:"8px 16px",fontSize:"13px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[T.jsx(Z0,{size:16})," Add Entry"]})]}):wt.map((Rt,Ke)=>T.jsxs("div",{style:{padding:"12px",background:L?"#374151":"#f3f4f6",borderRadius:"8px",marginBottom:"8px",borderLeft:`4px solid ${Rt.type==="onsite"?"#f59e0b":"#10b981"}`},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[T.jsx("div",{style:{fontWeight:"600",color:rt.text},children:Rt.customer}),Rt.type==="onsite"&&T.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[Rt.status&&T.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",background:Rt.status.toLowerCase()==="offline"?"#fee2e2":"#d1fae5",color:Rt.status.toLowerCase()==="offline"?"#991b1b":"#065f46",borderRadius:"4px",fontWeight:"500"},children:Rt.status}),Rt.repairStatus&&T.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",background:"#dbeafe",color:"#1e40af",borderRadius:"4px",fontWeight:"500"},children:Rt.repairStatus}),!Rt.status&&!Rt.repairStatus&&T.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",background:"#fef3c7",color:"#92400e",borderRadius:"4px",fontWeight:"500"},children:"Onsite"})]})]}),Rt.visitName&&T.jsx("div",{style:{fontSize:"12px",color:rt.textSecondary,marginBottom:"4px"},children:Rt.visitName}),Rt.hours>0&&T.jsxs("div",{style:{fontSize:"12px",color:rt.textSecondary},children:[Rt.hours," hours"]}),Rt.serviceWork&&T.jsx("div",{style:{fontSize:"12px",color:rt.textSecondary,marginTop:"8px",padding:"8px",background:L?"#1f2937":"white",borderRadius:"4px"},children:Rt.serviceWork}),Rt.type!=="onsite"&&T.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[T.jsxs("button",{onClick:()=>{Rt.id&&window.open(`https://jti-ts3.netlify.app/?id=${Rt.id}`,"_blank")},style:{padding:"4px 8px",fontSize:"11px",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(RC,{size:12})," Edit"]}),T.jsxs("button",{onClick:()=>he(Rt),style:{padding:"4px 8px",fontSize:"11px",background:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(zC,{size:12})," Delete"]})]}),Rt.type==="onsite"&&T.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:rt.textSecondary},children:"From Shearers Head History"})]},Ke)),nt&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:T.jsxs("div",{style:{background:rt.cardBg,borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%"},children:[T.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:rt.text,marginBottom:"12px"},children:"Delete Entry?"}),T.jsxs("p",{style:{fontSize:"14px",color:rt.textSecondary,marginBottom:"16px"},children:["Are you sure you want to delete this entry for ",T.jsx("strong",{children:nt.customer})," on ",nt.date,"?"]}),T.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[T.jsx("button",{onClick:()=>he(null),style:{padding:"8px 16px",fontSize:"13px",background:rt.cardBg,color:rt.text,border:`1px solid ${rt.border}`,borderRadius:"6px",cursor:"pointer"},disabled:on,children:"Cancel"}),T.jsx("button",{onClick:()=>gi(nt),style:{padding:"8px 16px",fontSize:"13px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",opacity:on?.7:1},disabled:on,children:on?"Deleting...":"Delete"})]})]})})]})})]})},ke=({results:P,loading:it})=>{const[yt,rt]=Ot.useState({jobs:!1,issues:!1,timesheets:!1,headHistory:!1}),Et=K=>{rt(Ct=>({...Ct,[K]:!Ct[K]}))};return it?T.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"40px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center",color:"#6b7280"},children:"Searching..."}):P?T.jsxs("div",{style:{marginBottom:"32px"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[T.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#111827",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(t1,{size:24}),'Search Results for "',P.searchTerm,'"']}),T.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:[P.totalResults," result",P.totalResults!==1?"s":""," found"]})]}),P.totalResults===0?T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"40px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center",color:"#6b7280"},children:['No results found for "',P.searchTerm,'"']}):T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[P.jobs.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Et("jobs"),style:{fontSize:"16px",fontWeight:"600",color:"#3b82f6",marginBottom:yt.jobs?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(Ih,{size:20}),"Jobs (",P.jobs.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:yt.jobs?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!yt.jobs&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.jobs.map((K,Ct)=>T.jsxs("div",{onClick:()=>{lt(K.customer||K.customerName),w(null),E("")},style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:"4px solid #3b82f6",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:wt=>wt.currentTarget.style.background="#f3f4f6",onMouseLeave:wt=>wt.currentTarget.style.background="#f9fafb",children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:K.customer||K.customerName||"Unknown Customer"}),(K.sr||K.invoiceNumber||K.serviceReportNumber||K.reportNumber)&&T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:["SR #: ",K.sr||K.invoiceNumber||K.serviceReportNumber||K.reportNumber]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:Di(K.paid)?"#10b981":"#f59e0b"},children:[Di(K.paid)?T.jsx(cu,{size:16}):T.jsx(Rh,{size:16}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:Di(K.paid)?"Paid":"Unpaid"})]})]}),K.matchedFields&&K.matchedFields.length>0&&T.jsxs("div",{style:{background:"#fefce8",borderRadius:"6px",padding:"8px 12px",marginBottom:"8px",fontSize:"12px"},children:[T.jsx("div",{style:{fontWeight:"600",color:"#854d0e",marginBottom:"4px"},children:"Matches found:"}),K.matchedFields.slice(0,5).map((wt,le)=>T.jsxs("div",{style:{color:"#713f12",marginBottom:"2px"},children:[T.jsxs("span",{style:{color:"#a16207"},children:[wt.field,": "]}),T.jsx(Ph,{text:wt.value,searchTerm:P.searchTerm})]},le)),K.matchedFields.length>5&&T.jsxs("div",{style:{color:"#a16207",fontStyle:"italic"},children:["+",K.matchedFields.length-5," more matches"]})]}),T.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"8px"},children:"Click to view customer details"})]},K.id||Ct))})]}),P.issues.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Et("issues"),style:{fontSize:"16px",fontWeight:"600",color:"#ef4444",marginBottom:yt.issues?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(Zp,{size:20}),"Issues / Downtime (",P.issues.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:yt.issues?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!yt.issues&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.issues.map((K,Ct)=>T.jsxs("div",{onClick:()=>{if(K.visitId){if(confirm(`Open "${K.customer||"this issue"}" in Weigher Issues app?`)){const wt=K.line?`&line=${encodeURIComponent(K.line)}`:"",le=K.headName?`&head=${encodeURIComponent(K.headName)}`:"";window.open(`https://jti-ccwlog.netlify.app/?id=${K.visitId}${wt}${le}`,"_blank")}}else lt(K.customer),w(null),E("")},style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:"4px solid #ef4444",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:wt=>wt.currentTarget.style.background="#f3f4f6",onMouseLeave:wt=>wt.currentTarget.style.background="#f9fafb",children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:K.customer||"Unknown Customer"}),T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:[K.line,"  ",K.headName||"Head"]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:K.fixed===!0||K.fixed==="Yes"||K.fixed==="fixed"||K.fixed==="Fixed"?"#10b981":"#ef4444",marginLeft:"12px"},children:[K.fixed===!0||K.fixed==="Yes"||K.fixed==="fixed"||K.fixed==="Fixed"?T.jsx(cu,{size:16}):T.jsx(Wp,{size:16}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:K.fixed===!0||K.fixed==="Yes"||K.fixed==="fixed"||K.fixed==="Fixed"?"Fixed":"Not Fixed"})]})]}),K.matchedFields&&K.matchedFields.length>0&&T.jsxs("div",{style:{background:"#fefce8",borderRadius:"6px",padding:"8px 12px",marginBottom:"8px",fontSize:"12px"},children:[T.jsx("div",{style:{fontWeight:"600",color:"#854d0e",marginBottom:"4px"},children:"Matches found:"}),K.matchedFields.slice(0,5).map((wt,le)=>T.jsxs("div",{style:{color:"#713f12",marginBottom:"2px"},children:[T.jsxs("span",{style:{color:"#a16207"},children:[wt.field,": "]}),T.jsx(Ph,{text:wt.value,searchTerm:P.searchTerm})]},le)),K.matchedFields.length>5&&T.jsxs("div",{style:{color:"#a16207",fontStyle:"italic"},children:["+",K.matchedFields.length-5," more matches"]})]}),T.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"8px"},children:"Click to open in Weigher Issues app"})]},K.id||Ct))})]}),P.timesheets.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Et("timesheets"),style:{fontSize:"16px",fontWeight:"600",color:"#10b981",marginBottom:yt.timesheets?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(Rh,{size:20}),"Timesheets (",P.timesheets.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:yt.timesheets?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!yt.timesheets&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.timesheets.map((K,Ct)=>T.jsxs("div",{onClick:()=>{K.id?confirm(`Open "${K.visitName||"this visit"}" in Timesheet app?`)&&window.open(`https://jti-ts3.netlify.app/?id=${K.id}`,"_blank"):(lt(K.customer||K.visitName),w(null),E(""))},style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:"4px solid #10b981",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:wt=>wt.currentTarget.style.background="#f3f4f6",onMouseLeave:wt=>wt.currentTarget.style.background="#f9fafb",children:[T.jsxs("div",{style:{marginBottom:"12px"},children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:K.customer||K.visitName||"Unknown"}),K.visitName&&T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:["Visit: ",K.visitName]})]}),K.matchedFields&&K.matchedFields.length>0&&T.jsxs("div",{style:{background:"#fefce8",borderRadius:"6px",padding:"8px 12px",marginBottom:"8px",fontSize:"12px"},children:[T.jsx("div",{style:{fontWeight:"600",color:"#854d0e",marginBottom:"4px"},children:"Matches found:"}),K.matchedFields.slice(0,5).map((wt,le)=>T.jsxs("div",{style:{color:"#713f12",marginBottom:"2px"},children:[T.jsxs("span",{style:{color:"#a16207"},children:[wt.field,": "]}),T.jsx(Ph,{text:wt.value,searchTerm:P.searchTerm})]},le)),K.matchedFields.length>5&&T.jsxs("div",{style:{color:"#a16207",fontStyle:"italic"},children:["+",K.matchedFields.length-5," more matches"]})]}),T.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"8px",display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(Jp,{size:12}),"Click to open in Timesheet app"]})]},K.id||Ct))})]}),P.headHistory&&P.headHistory.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Et("headHistory"),style:{fontSize:"16px",fontWeight:"600",color:"#8b5cf6",marginBottom:yt.headHistory?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(e1,{size:20}),"Head History (",P.headHistory.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:yt.headHistory?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!yt.headHistory&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.headHistory.map((K,Ct)=>T.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:`4px solid ${K.status?.toLowerCase()==="offline"?"#ef4444":"#8b5cf6"}`,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:wt=>wt.currentTarget.style.background="#f3f4f6",onMouseLeave:wt=>wt.currentTarget.style.background="#f9fafb",children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:K.customer}),T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:[K.line?`Line ${K.line}`:"Head History"," ",K.data?.head?` ${K.data.head}`:""]}),K.date&&T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:["Date: ",K.date]})]}),T.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",alignItems:"center"},children:K.status&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:K.status.toLowerCase()==="offline"?"#ef4444":"#10b981"},children:[K.status.toLowerCase()==="offline"?T.jsx(Wp,{size:16}):T.jsx(cu,{size:16}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:K.status})]})})]}),K.repairStatus&&T.jsxs("div",{style:{fontSize:"12px",color:K.repairStatus.toLowerCase()==="fixed"?"#92400e":"#991b1b",marginBottom:"8px",padding:"4px 8px",background:K.repairStatus.toLowerCase()==="fixed"?"#fef3c7":"#fee2e2",borderRadius:"4px",display:"inline-block"},children:["Repair: ",K.repairStatus]}),K.error&&T.jsxs("div",{style:{fontSize:"12px",color:"#dc2626",marginBottom:"8px",padding:"8px",background:"#fee2e2",borderRadius:"4px"},children:[T.jsx("strong",{children:"Error:"})," ",K.error]}),K.data?.notes&&T.jsxs("div",{style:{fontSize:"12px",color:"#374151",marginBottom:"8px",padding:"8px",background:"white",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[T.jsx("strong",{children:"Notes:"})," ",K.data.notes]}),K.data?.machineNotes&&T.jsxs("div",{style:{fontSize:"12px",color:"#374151",marginBottom:"8px",padding:"8px",background:"white",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[T.jsx("strong",{children:"Machine Notes:"})," ",K.data.machineNotes]}),K.matchedFields&&K.matchedFields.length>0&&T.jsxs("div",{style:{background:"#fefce8",borderRadius:"6px",padding:"8px 12px",fontSize:"12px"},children:[T.jsx("div",{style:{fontWeight:"600",color:"#854d0e",marginBottom:"4px"},children:"Matches found:"}),K.matchedFields.slice(0,5).map((wt,le)=>T.jsxs("div",{style:{color:"#713f12",marginBottom:"2px"},children:[T.jsxs("span",{style:{color:"#a16207"},children:[wt.field,": "]}),T.jsx(Ph,{text:wt.value,searchTerm:P.searchTerm})]},le)),K.matchedFields.length>5&&T.jsxs("div",{style:{color:"#a16207",fontStyle:"italic"},children:["+",K.matchedFields.length-5," more matches"]})]})]},K.path||Ct))})]})]})]}):null},Ka=({data:P,customerName:it,loading:yt,onClear:rt})=>{const[Et,K]=Ot.useState({jobs:!1,issues:!1,timesheets:!1}),Ct=nt=>{K(he=>({...he,[nt]:!he[nt]}))};if(yt)return T.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"40px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center",color:"#6b7280"},children:"Loading customer data..."});if(!P)return null;const wt=nt=>nt?(nt?.toDate?.()||new Date(nt)).toLocaleDateString():"N/A",le=nt=>nt?`$${parseFloat(nt).toLocaleString()}`:"N/A";return T.jsxs("div",{style:{marginBottom:"32px"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[T.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#111827",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(FC,{size:28}),it]}),T.jsxs("button",{onClick:rt,style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(tm,{size:16}),"Clear Selection"]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[T.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Total Jobs"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#3b82f6"},children:P.totalJobs})]}),T.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Total Income"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#10b981"},children:le(P.totalIncome)})]}),T.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Paid"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#10b981"},children:le(P.paidIncome)})]}),T.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Unpaid"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#f59e0b"},children:le(P.unpaidIncome)})]}),T.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Issues"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#ef4444"},children:P.totalIssues})]}),T.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Timesheets"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#8b5cf6"},children:P.totalTimesheets})]})]}),P.totalJobs===0&&P.totalIssues===0&&P.totalTimesheets===0?T.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"40px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center",color:"#6b7280"},children:"No data found for this customer"}):T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[P.jobs.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Ct("jobs"),style:{fontSize:"16px",fontWeight:"600",color:"#3b82f6",marginBottom:Et.jobs?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(Ih,{size:20}),"Jobs (",P.jobs.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:Et.jobs?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!Et.jobs&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.jobs.map((nt,he)=>T.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:"4px solid #3b82f6"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:nt.customer||nt.customerName||"Unknown Customer"}),(nt.sr||nt.invoiceNumber)&&T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:["SR #: ",nt.sr||nt.invoiceNumber]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:Di(nt.paid)?"#10b981":"#f59e0b"},children:[Di(nt.paid)?T.jsx(cu,{size:16}):T.jsx(Rh,{size:16}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:Di(nt.paid)?"Paid":"Unpaid"})]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px",fontSize:"13px"},children:[nt.quote&&T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Quote: "}),T.jsx("span",{style:{color:"#111827",fontWeight:"600"},children:le(nt.quote)})]}),nt.actual&&T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Actual: "}),T.jsx("span",{style:{color:"#10b981",fontWeight:"600"},children:le(nt.actual)})]}),nt.date&&T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Date: "}),T.jsx("span",{style:{color:"#111827"},children:nt.date})]}),nt.year&&T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Year: "}),T.jsx("span",{style:{color:"#111827"},children:nt.year})]}),nt.customerInfo&&T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("span",{style:{color:"#6b7280"},children:"Info: "}),T.jsx("span",{style:{color:"#111827"},children:nt.customerInfo})]})]})]},nt.id||he))})]}),P.issues.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Ct("issues"),style:{fontSize:"16px",fontWeight:"600",color:"#ef4444",marginBottom:Et.issues?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(Zp,{size:20}),"Issues / Downtime (",P.issues.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:Et.issues?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!Et.issues&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.issues.map((nt,he)=>T.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:"4px solid #ef4444"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[T.jsx("div",{children:T.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#111827"},children:[nt.line,"  ",nt.headName||"Head"]})}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:nt.fixed===!0||nt.fixed==="Yes"||nt.fixed==="fixed"||nt.fixed==="Fixed"?"#10b981":"#ef4444",marginLeft:"12px"},children:[nt.fixed===!0||nt.fixed==="Yes"||nt.fixed==="fixed"||nt.fixed==="Fixed"?T.jsx(cu,{size:16}):T.jsx(Wp,{size:16}),T.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:nt.fixed===!0||nt.fixed==="Yes"||nt.fixed==="fixed"||nt.fixed==="Fixed"?"Fixed":"Not Fixed"})]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px",fontSize:"13px"},children:[T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Date: "}),T.jsx("span",{style:{color:"#111827"},children:nt.date||"N/A"})]}),T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Visit: "}),T.jsx("span",{style:{color:"#111827"},children:nt.visitId||"N/A"})]}),nt.error&&T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("span",{style:{color:"#6b7280"},children:"Error: "}),T.jsx("span",{style:{color:"#ef4444",fontWeight:"500"},children:nt.error})]})]})]},nt.id||he))})]}),P.timesheets.length>0&&T.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Ct("timesheets"),style:{fontSize:"16px",fontWeight:"600",color:"#10b981",marginBottom:Et.timesheets?"0":"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(Rh,{size:20}),"Timesheets (",P.timesheets.length,")",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:Et.timesheets?"rotate(-90deg)":"rotate(0)",transition:"transform 0.2s"}})]}),!Et.timesheets&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.timesheets.map((nt,he)=>T.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",borderLeft:"4px solid #10b981"},children:[T.jsxs("div",{style:{marginBottom:"12px"},children:[T.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:nt.customer||nt.visitName||"Unknown"}),nt.visitName&&T.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:["Visit: ",nt.visitName]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"8px",fontSize:"13px"},children:[T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Date: "}),T.jsx("span",{style:{fontWeight:"500",color:"#111827"},children:wt(nt.timestamp||nt.date)})]}),nt.invoiceInfo?.invoiceNumber&&T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Invoice #: "}),T.jsx("span",{style:{fontWeight:"500",color:"#111827"},children:nt.invoiceInfo.invoiceNumber})]}),nt.invoiceInfo?.amount&&T.jsxs("div",{children:[T.jsx("span",{style:{color:"#6b7280"},children:"Amount: "}),T.jsx("span",{style:{fontWeight:"500",color:"#111827"},children:le(nt.invoiceInfo.amount)})]}),nt.serviceReportData&&Object.keys(nt.serviceReportData).length>0&&T.jsxs("div",{style:{gridColumn:"1 / -1"},children:[T.jsx("span",{style:{color:"#6b7280",fontWeight:"500"},children:"Service Report: "}),T.jsx("div",{style:{marginTop:"8px"},children:Object.entries(nt.serviceReportData).map(([on,On])=>T.jsxs("div",{style:{marginBottom:"8px",padding:"8px",background:"#e5e7eb",borderRadius:"4px"},children:[T.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:on}),T.jsx("div",{style:{color:"#111827",lineHeight:"1.4"},children:On})]},on))})]})]})]},nt.id||he))})]})]})]})},st=L?{bg:"#111827",cardBg:"#1f2937",text:"#f9fafb",textSecondary:"#9ca3af",border:"#374151",hover:"#374151"}:{bg:"#f9fafb",cardBg:"white",text:"#111827",textSecondary:"#6b7280",border:"#e5e7eb",hover:"#f3f4f6"};return T.jsxs("div",{style:{minHeight:"100vh",background:st.bg,transition:"background 0.3s"},children:[T.jsx("style",{children:`
        @media (max-width: 768px) {
          .mobile-header {
            padding: 12px 16px !important;
          }
          .header-container {
            flex-direction: column !important;
            gap: 12px !important;
            align-items: stretch !important;
          }
          .header-controls {
            flex-wrap: wrap !important;
            justify-content: center !important;
            gap: 8px !important;
          }
          .search-input {
            width: 100% !important;
            min-width: 0 !important;
          }
          .search-container {
            width: 100% !important;
            order: -1 !important;
          }
          .customer-dropdown {
            min-width: 0 !important;
            flex: 1 !important;
          }
          .customer-dropdown button {
            min-width: 0 !important;
          }
          .stats-grid {
            grid-template-columns: 1fr !important;
            gap: 16px !important;
          }
          .apps-grid {
            grid-template-columns: 1fr !important;
            gap: 16px !important;
          }
          .main-content {
            padding: 16px !important;
          }
          .header-title {
            font-size: 18px !important;
          }
          .stat-value {
            font-size: 22px !important;
          }
          .hide-on-mobile {
            display: none !important;
          }
        }
        @media (max-width: 480px) {
          .header-controls > button,
          .header-controls > div {
            flex: 1 1 calc(50% - 4px) !important;
            min-width: 0 !important;
          }
          .header-controls > button {
            padding: 8px 12px !important;
            font-size: 12px !important;
          }
        }
        @media (max-width: 768px) {
          .filter-buttons button {
            padding: 4px 8px !important;
            font-size: 11px !important;
          }
          .filter-divider {
            display: none !important;
          }
          .chart-container {
            height: 120px !important;
          }
          .chart-label {
            font-size: 7px !important;
          }
          .chart-value {
            font-size: 7px !important;
          }
        }
      `}),T.jsx("header",{className:"mobile-header",style:{background:st.cardBg,borderBottom:`1px solid ${st.border}`,padding:"16px 32px",position:"sticky",top:0,zIndex:100,transition:"background 0.3s, border-color 0.3s"},children:T.jsxs("div",{className:"header-container",style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("img",{src:"/logo.png",alt:"JTI Logo",style:{height:"40px",width:"auto"}}),T.jsx("h1",{className:"header-title",style:{fontSize:"24px",fontWeight:"700",color:st.text},children:"Unified Dashboard"})]}),T.jsxs("div",{className:"header-controls",style:{display:"flex",gap:"16px",alignItems:"center"},children:[T.jsxs("div",{className:"search-container",style:{position:"relative",display:"flex",alignItems:"center"},children:[T.jsx(t1,{size:18,style:{position:"absolute",left:"12px",color:"#9ca3af",pointerEvents:"none"}}),T.jsx("input",{type:"text",placeholder:"Search customer or report #...",value:S,onChange:P=>E(P.target.value),className:"search-input",style:{padding:"8px 36px 8px 40px",borderRadius:"8px",border:`1px solid ${st.border}`,fontSize:"14px",width:"280px",outline:"none",transition:"border-color 0.2s",background:st.cardBg,color:st.text},onFocus:P=>P.target.style.borderColor="#3b82f6",onBlur:P=>P.target.style.borderColor=st.border}),S&&T.jsx("button",{onClick:Ha,style:{position:"absolute",right:"8px",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#9ca3af"},children:T.jsx(tm,{size:16})})]}),ft&&T.jsxs("div",{style:{display:"flex",borderRadius:"6px",overflow:"hidden",border:`1px solid ${st.border}`,fontSize:"12px"},children:[T.jsx("button",{onClick:()=>ut("customer"),style:{padding:"6px 10px",border:"none",background:W==="customer"?"#3b82f6":st.cardBg,color:W==="customer"?"white":st.textSecondary,cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},children:"This Customer"}),T.jsx("button",{onClick:()=>ut("all"),style:{padding:"6px 10px",border:"none",borderLeft:`1px solid ${st.border}`,background:W==="all"?"#3b82f6":st.cardBg,color:W==="all"?"white":st.textSecondary,cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},children:"All"})]}),T.jsxs("div",{className:"customer-dropdown",style:{position:"relative"},children:[T.jsxs("button",{onClick:()=>N(!C),style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:ft?"#3b82f6":"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:ft?"white":"#374151",minWidth:"180px",justifyContent:"space-between",width:"100%"},children:[T.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,textAlign:"left"},children:ft||"Select Customer"}),T.jsx(Fs,{size:16,style:{transform:C?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),C&&T.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"300px",overflowY:"auto",zIndex:200},children:[ft&&T.jsx("button",{onClick:()=>Zs(""),style:{width:"100%",padding:"10px 16px",border:"none",background:"#f3f4f6",cursor:"pointer",textAlign:"left",fontSize:"14px",color:"#6b7280",fontStyle:"italic"},children:"Clear selection"}),U.length===0?T.jsx("div",{style:{padding:"10px 16px",color:"#6b7280",fontSize:"14px"},children:"Loading customers..."}):U.map((P,it)=>T.jsxs("button",{onClick:()=>Zs(P.name),style:{width:"100%",padding:"10px 16px",border:"none",borderTop:it>0||ft?"1px solid #f3f4f6":"none",background:ft===P.name?"#eff6ff":"white",cursor:"pointer",textAlign:"left",fontSize:"14px",color:"#111827",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:yt=>{ft!==P.name&&(yt.currentTarget.style.background="#f9fafb")},onMouseLeave:yt=>{yt.currentTarget.style.background=ft===P.name?"#eff6ff":"white"},children:[T.jsx("span",{children:P.name}),T.jsxs("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:["(",P.sources.join(", "),")"]})]},it))]})]}),T.jsxs("button",{onClick:bs,style:{padding:"8px 16px",borderRadius:"8px",border:`1px solid ${Tn?"#3b82f6":st.border}`,background:Tn?"#3b82f6":st.cardBg,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:Tn?"white":st.text},children:[T.jsx(Xp,{size:16}),"Calendar"]}),T.jsxs("button",{onClick:cl,disabled:c,style:{padding:"8px 16px",borderRadius:"8px",border:`1px solid ${st.border}`,background:c?st.hover:st.cardBg,cursor:c?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:st.text},children:[T.jsx(NC,{size:16,style:{animation:c?"spin 1s linear infinite":"none"}}),c?"Loading...":"Refresh"]}),kt&&T.jsxs("span",{className:"hide-on-mobile",style:{fontSize:"12px",color:st.textSecondary,display:"flex",alignItems:"center"},children:["Updated ",uM(kt)]}),T.jsxs("button",{className:"hide-on-mobile",style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:[T.jsx(Xp,{size:16}),"Today: ",new Date().toLocaleDateString()]}),T.jsx("button",{onClick:()=>k(!L),style:{padding:"8px",borderRadius:"8px",border:`1px solid ${st.border}`,background:st.cardBg,cursor:"pointer",display:"flex",alignItems:"center"},children:L?T.jsx(VC,{size:20,style:{color:"#f59e0b"}}):T.jsx(CC,{size:20,style:{color:"#6b7280"}})}),T.jsx("button",{style:{padding:"8px",borderRadius:"8px",border:`1px solid ${st.border}`,background:st.cardBg,cursor:"pointer",display:"flex",alignItems:"center"},children:T.jsx(e1,{size:20,style:{color:st.textSecondary}})})]})]})}),T.jsxs("main",{className:"main-content",style:{maxWidth:"1400px",margin:"0 auto",padding:"32px"},children:[ee&&T.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #ef4444",borderRadius:"8px",padding:"16px",marginBottom:"16px",color:"#dc2626"},children:[T.jsx("strong",{children:"Error:"})," ",ee]}),!c&&!ee&&vt.length===0&&T.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"16px",marginBottom:"16px",color:"#92400e",fontSize:"14px"},children:[T.jsx("strong",{children:"No jobs data loaded."})," This is likely a CORS issue with Firebase Storage on mobile. Try accessing from a desktop browser or check Firebase Storage CORS configuration."]}),Tn&&T.jsxs("section",{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[T.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:st.text,display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(Xp,{size:24}),"Work Calendar"]}),T.jsx("button",{onClick:()=>Ts(!1),style:{padding:"8px 16px",background:st.cardBg,border:`1px solid ${st.border}`,borderRadius:"6px",cursor:"pointer",color:st.text,fontSize:"14px"},children:"Back to Dashboard"})]}),T.jsx("div",{style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:Ue?T.jsx("div",{style:{textAlign:"center",padding:"40px",color:st.textSecondary},children:"Loading calendar events..."}):T.jsx(qn,{events:ii,currentMonth:Ss,setCurrentMonth:Jr,colors:st,onRefresh:pn})})]}),(b||O)&&T.jsx(ke,{results:b,loading:O}),(ft||At)&&!b&&T.jsx(Ka,{data:bt,customerName:ft,loading:At,onClear:Zr}),!b&&!ft&&!Tn&&T.jsxs("div",{style:{marginBottom:"24px"},children:[T.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"24px",alignItems:"center"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:st.textSecondary,fontSize:"14px"},children:[T.jsx(xC,{size:16}),"Year:"]}),(()=>{const P=new Date().getFullYear(),it=["all"];for(let yt=P+3;yt>=2022;yt--)it.push(yt.toString());return it})().map(P=>T.jsx("button",{onClick:()=>I(P),style:{padding:"6px 12px",borderRadius:"6px",border:`1px solid ${z===P?"#3b82f6":st.border}`,background:z===P?"#3b82f6":st.cardBg,color:z===P?"white":st.text,cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:P==="all"?"All":P},P)),T.jsx("div",{className:"filter-divider",style:{width:"1px",height:"24px",background:st.border,margin:"0 8px"}}),T.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:st.textSecondary,fontSize:"14px"},children:"Status:"}),["all","paid","unpaid"].map(P=>T.jsx("button",{onClick:()=>Ve(P),style:{padding:"6px 12px",borderRadius:"6px",border:`1px solid ${ce===P?"#3b82f6":st.border}`,background:ce===P?"#3b82f6":st.cardBg,color:ce===P?"white":st.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",textTransform:"capitalize"},children:P==="all"?"All":P},P))]}),T.jsxs("div",{style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsxs("h3",{onClick:()=>Nt(!dt),style:{fontSize:"16px",fontWeight:"600",color:st.text,marginBottom:dt?"16px":"0",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[T.jsx(J0,{size:20}),z==="all"?"All Years":z," Monthly Income",T.jsx(Fs,{size:18,style:{marginLeft:"auto",transform:dt?"rotate(0)":"rotate(-90deg)",transition:"transform 0.2s"}})]}),dt&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"chart-container",style:{display:"flex",alignItems:"flex-end",gap:"6px",height:"150px",paddingTop:"20px"},children:$.paid.map((P,it)=>{const yt=$.unpaid[it],rt=P+yt,Et=$.paid.map((On,gi)=>On+$.unpaid[gi]),K=Math.max(...Et,1),Ct=K>0?rt/K*100:0,wt=K>0?P/K*100:0,le=Ct-wt,nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],he=it===new Date().getMonth(),on=xe===it;return T.jsxs("div",{onClick:()=>Ga(it),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",height:"100%",justifyContent:"flex-end",cursor:"pointer",opacity:on?1:xe!==null?.5:1,transition:"opacity 0.2s"},children:[rt>0&&T.jsxs("span",{className:"chart-value",style:{fontSize:"9px",color:st.text,fontWeight:"600",whiteSpace:"nowrap"},children:["$",rt>=1e3?`${(rt/1e3).toFixed(1)}k`:rt.toFixed(0)]}),T.jsxs("div",{style:{width:"100%",height:`${Ct}%`,minHeight:rt>0?"8px":"2px",display:"flex",flexDirection:"column-reverse",borderRadius:"4px 4px 0 0",overflow:"hidden",transition:"height 0.3s"},children:[P>0&&T.jsx("div",{style:{width:"100%",height:`${wt/Ct*100}%`,background:he?"#3b82f6":"#10b981",transition:"height 0.3s"},title:`${nt[it]} Paid: $${P.toLocaleString()}`}),yt>0&&T.jsx("div",{style:{width:"100%",height:`${le/Ct*100}%`,background:"#f59e0b",transition:"height 0.3s"},title:`${nt[it]} Unpaid: $${yt.toLocaleString()}`})]}),T.jsx("span",{className:"chart-label",style:{fontSize:"9px",color:on||he?"#3b82f6":st.textSecondary,fontWeight:on?"700":he?"600":"400",padding:"2px 4px",borderRadius:"3px",background:on?"#dbeafe":"transparent"},children:nt[it].slice(0,3)})]},it)})}),T.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"16px",fontSize:"11px",justifyContent:"center",color:st.textSecondary},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[T.jsx("div",{style:{width:"12px",height:"12px",background:"#10b981",borderRadius:"2px"}}),T.jsx("span",{children:"Paid (Actual)"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[T.jsx("div",{style:{width:"12px",height:"12px",background:"#f59e0b",borderRadius:"2px"}}),T.jsx("span",{children:"Unpaid (Potential)"})]})]}),T.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${st.border}`,display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[T.jsxs("span",{style:{color:st.textSecondary},children:["Total Paid: ",T.jsxs("strong",{style:{color:"#10b981"},children:["$",$.paid.reduce((P,it)=>P+it,0).toLocaleString()]})]}),T.jsxs("span",{style:{color:st.textSecondary},children:["Total Unpaid: ",T.jsxs("strong",{style:{color:"#f59e0b"},children:["$",$.unpaid.reduce((P,it)=>P+it,0).toLocaleString()]})]})]}),xe!==null&&Mi.length>0&&T.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${st.border}`},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[T.jsxs("h4",{style:{margin:0,fontSize:"14px",fontWeight:"600",color:st.text},children:[["January","February","March","April","May","June","July","August","September","October","November","December"][xe]," Jobs (",Mi.length,")"]}),T.jsx("button",{onClick:()=>{me(null),Wi([])},style:{padding:"4px 8px",fontSize:"12px",border:`1px solid ${st.border}`,borderRadius:"4px",background:st.cardBg,color:st.textSecondary,cursor:"pointer"},children:"Clear"})]}),T.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:Mi.map((P,it)=>{const yt=parseFloat(P.actual||0),rt=parseFloat(P.quote||0),Et=yt>0?yt:rt,K=Di(P.paid);return T.jsxs("div",{style:{padding:"8px 12px",background:st.cardBg,border:`1px solid ${st.border}`,borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px"},children:[T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{fontWeight:"600",color:st.text},children:P.customer}),T.jsxs("div",{style:{color:st.textSecondary,fontSize:"11px"},children:["SR# ",P.sr,"  ",P.invoiceDate]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsxs("span",{style:{fontWeight:"600",color:st.text},children:["$",Et.toLocaleString()]}),T.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",background:K?"#d1fae5":"#fef3c7",color:K?"#065f46":"#92400e"},children:K?"Paid":"Unpaid"})]})]},it)})})]})]})]})]}),!b&&!ft&&!Tn&&T.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"24px",marginBottom:"32px"},children:[T.jsx("div",{onClick:()=>u((o+1)%3),style:{cursor:"pointer"},children:T.jsx(Qa,{icon:T.jsx(EC,{size:24}),title:o===0?"Paid Income":o===1?`${new Date().getFullYear()} Paid`:"Total Paid",value:o===0?"Tap to view":`$${(o===1?e.currentYearIncome:e.totalIncome).toLocaleString()}`,color:"#10b981"})}),T.jsxs("div",{onClick:()=>Ve("unpaid"),style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-2px)",P.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0)",P.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:T.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:"#3b82f620",display:"flex",alignItems:"center",justifyContent:"center",color:"#3b82f6"},children:T.jsx(Ih,{size:24})})}),T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"14px",color:st.textSecondary,marginBottom:"4px"},children:"Unpaid Jobs"}),T.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:st.text},children:e.unpaidJobs}),e.unpaidJobsList&&e.unpaidJobsList.length>0&&T.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"8px"},children:e.unpaidJobsList.map((P,it)=>T.jsxs("div",{style:{marginBottom:"2px"},children:[P.sr," - ",P.customer||P.customerName||"Unknown"]},P.sr||it))}),e.overdueJobsList&&e.overdueJobsList.length>0&&T.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #f3f4f6"},children:[T.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#ef4444",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(Zp,{size:12}),"Overdue (",e.overdueJobsList.length,")"]}),T.jsxs("div",{style:{fontSize:"11px",color:"#ef4444"},children:[e.overdueJobsList.slice(0,5).map((P,it)=>T.jsxs("div",{style:{marginBottom:"2px"},children:[P.sr," - ",P.customer||P.customerName||"Unknown"]},P.sr||it)),e.overdueJobsList.length>5&&T.jsxs("div",{children:["+",e.overdueJobsList.length-5," more"]})]})]})]})]}),T.jsxs("div",{onClick:()=>{e.currentSR&&e.currentSR!=="N/A"&&E(e.currentSR)},style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-2px)",P.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0)",P.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)"},children:[T.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:T.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:"#8b5cf620",display:"flex",alignItems:"center",justifyContent:"center",color:"#8b5cf6"},children:T.jsx(Ih,{size:24})})}),T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"14px",color:st.textSecondary,marginBottom:"4px"},children:"Current Service Report"}),T.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:st.text},children:e.currentSR}),T.jsx("div",{style:{fontSize:"12px",color:st.textSecondary,marginTop:"4px"},children:e.currentSRCustomer})]})]})]}),!b&&!ft&&!Tn&&T.jsxs("section",{style:{marginBottom:"32px"},children:[T.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:st.text,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(J0,{size:24}),"Your Applications"]}),T.jsx("div",{className:"apps-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:Ya.map(P=>T.jsx(si,{app:P},P.id))})]}),!b&&!ft&&!Tn&&T.jsxs("section",{children:[T.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:st.text,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(lC,{size:24}),"Recent Activity"]}),T.jsx("div",{style:{background:st.cardBg,borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:c?T.jsx("div",{style:{textAlign:"center",padding:"40px",color:st.textSecondary},children:"Loading activity..."}):m.length===0?T.jsx("div",{style:{textAlign:"center",padding:"40px",color:st.textSecondary},children:"No recent activity found"}):m.map((P,it)=>T.jsx(an,{item:P,colors:st},it))})]})]})]})}eC.createRoot(document.getElementById("root")).render(T.jsx(QA.StrictMode,{children:T.jsx(cM,{})}));
